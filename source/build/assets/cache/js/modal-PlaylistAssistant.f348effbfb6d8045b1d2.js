"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[8271],{"/uRm":(e,t,a)=>{a.d(t,{F:()=>l});let l=function(e){return e.ONBOARDING="ON_BOARDING",e.ONBOARDING_LEGACY="ON_BOARDING_LEGACY",e.SELECT_PROFILE="SELECT_PROFILE",e.BRIDGED_WEBVIEW="BRIDGED_WEBVIEW",e.PLAYLIST_ASSISTANT="PLAYLIST_ASSISTANT",e}({})},"9OcB":(e,t,a)=>{a.d(t,{A:()=>m});var l=a("+9dH"),n=a("q1tI"),i=a("SGue"),o=a("P1K6"),r=a("5G9X"),s=a("Fzox"),c=a("CyAC");const d=({type:e=r.Ay.Album,isExplicitCover:t=!1,...a})=>{const[d,m]=(0,n.useState)(""),p=(0,s.G)((({user:e})=>(0,c.Gr)(e))),u=t&&p;return e===r.Ay.User&&console.log("Use Avatar instead https://dev-tempo-web.dev-kube.deez.re/docs/media-and-icons/avatar"),n.createElement(i.Y,(0,l.A)({fallbackSrc:(0,o.j5)(e),hideImage:u,onLoad:e=>{u&&m((0,o.zx)(e.currentTarget))},backgroundImage:`url(${(0,o.$c)()})`,backgroundColor:d},a))};d.displayName="Cover";const m=d},P1K6:(e,t,a)=>{a.d(t,{$c:()=>u,AE:()=>m,j5:()=>p,zx:()=>g});var l=a("FMs+"),n=a("z+LD"),i=a("Vd8Q"),o=a("nMcH"),r=a("kPsn"),s=a("5G9X");const c=1200,d=1200,m=(e="misc",t,a=c,l=d,r="000000",s=80)=>{const m="none"===r?"png":"jpg",p=`https://${i.default.get("host_img_url_ssl")}`;return"misc"!==e&&80!==s&&n.A.warn('Quality param should be used ONLY with "misc" image type. Use with caution.'),(0,o.A)()&&(a=Math.round(2*a),l=Math.round(2*l),a>c||l>d)&&(a/l>1?(l=l*c/a,a=c):(a=a*d/l,l=d)),`${p}/${e}/${t}/${l}x${a}-${r}-${s}-0-0.${m}`},p=(e,t=r.SE.MEDIUM)=>{const a=(e=>{switch(e){case s.Ay.Album:case s.Ay.Flow:case s.Ay.Track:case s.Ay.Smarttracklist:case s.Ay.Song:return"cover";case s.Ay.Episode:case s.Ay.Show:return"talk";case s.Ay.Artist:case s.Ay.Playlist:case s.Ay.User:return e;default:return"misc"}})(e);return m(a,"d41d8cd98f00b204e9800998ecf8427e",t,t)},u=(e=r.SE.MEDIUM)=>m("misc","c272206c2d8b94d10ccfdea8b7a6f986",e,e),g=e=>{try{const{color:t,visiblePixelsPercentage:a}=(0,l.xH)(e);if(a>10)return(0,l.s3)(t)}catch(e){}return"rgba(0,0,0,0)"}},X3nu:(e,t,a)=>{a.r(t),a.d(t,{default:()=>yl});var l={};a.r(l),a.d(l,{Alarm:()=>zt,Boom:()=>Nt,Boombox:()=>at,BoxingGlove:()=>lt,Butterfly:()=>Ht,Cherry:()=>nt,Chili:()=>it,Confetti:()=>Bt,Crying:()=>ot,Dancing:()=>Gt,Devil:()=>Yt,Diamond:()=>tt,Discoball:()=>rt,Dog:()=>st,Fire:()=>ct,FlameHeart:()=>dt,Flower:()=>Ut,Guitar:()=>mt,HandsRaised:()=>pt,Heart:()=>ut,HeartEyes:()=>$t,Heartbreak:()=>jt,HotFace:()=>gt,IceCream:()=>vt,Kiss:()=>Ft,LightningBolt:()=>Et,Lotus:()=>Wt,Maki:()=>ft,Megaphone:()=>bt,Mug:()=>ht,Muscle:()=>Xt,MusicNote1:()=>yt,MusicNote2:()=>kt,MusicNote3:()=>_t,MusicNote4:()=>At,MusicNote5:()=>Ct,Palmtree:()=>Vt,Piano:()=>xt,Rock:()=>Lt,Running:()=>St,Saxophone:()=>Pt,StarFace:()=>wt,Stars:()=>It,Strawberry:()=>Dt,Sun:()=>Mt,Sunglasses:()=>Ot,Tamborine:()=>Tt,Watermelon:()=>Rt});var n,i=a("q1tI"),o=a("TRpf"),r=a("tZCQ"),s=a("TqF5"),c=a("A2sV"),d=a("aoCz"),m=a("TDRX"),p=a("FVVF"),u=a("wZBD"),g=(a("aRRr"),a("Votb")),v=a("pVdW"),E=a("6vqc");const f=({title:e,description:t,icon:a,onClick:l})=>i.createElement(g.z,{onClick:()=>{l()},w:"full",gap:"spacing.m",py:"spacing.s",role:"group",_hover:{bg:"background.neutral.secondary.hovered"},cursor:"pointer"},i.createElement(m.a,{bg:"background.neutral.tertiary.default",_groupHover:{bg:"background.neutral.tertiary.hovered"},p:"spacing.s",borderRadius:"2xs"},a),i.createElement(m.a,{flex:"1"},i.createElement(v.E,{variant:"body.l.default"},e),i.createElement(v.E,{variant:"body.s.default",color:"text.neutral.secondary.default",as:"span"},t)),n||(n=i.createElement(E.v,null)));var b,h,y,k=a("W1Rt"),_=a("h1OE"),A=a("nxAS"),C=a("/uRm");function x({onShowCreation:e}){const t=(0,o.wA)();return i.createElement(p.T,{gap:"spacing.xs",p:"spacing.m"},i.createElement(f,{title:"Playlist",description:"Add your favorite songs",icon:b||(b=i.createElement(k.G,{size:"medium"})),onClick:e}),i.createElement(f,{title:h||(h=i.createElement(i.Fragment,null,"AI Playlist ",i.createElement(u.J,{variant:"accent"},"BETA"))),description:"Generate a playlist from an idea",icon:y||(y=i.createElement(_.A,{size:"medium"})),onClick:()=>{t((0,s.Oo)()),t((0,A.J2)({name:C.F.BRIDGED_WEBVIEW,data:{pathname:"/genplaylist",fixedLogo:!0}}))}}))}var S=a("chf7"),P=a("FMs+");let w=function(e){return e.COLOR="color",e.CUSTOM_PICTURE="customPicture",e.MOSAIC="mosaic",e}({}),I=function(e){return e.Diamond="Diamond",e.Boombox="Boombox",e.BoxingGlove="BoxingGlove",e.Cherry="Cherry",e.Chili="Chili",e.Crying="Crying",e.Discoball="Discoball",e.Dog="Dog",e.Fire="Fire",e.FlameHeart="FlameHeart",e.Guitar="Guitar",e.HandsRaised="HandsRaised",e.Heart="Heart",e.HotFace="HotFace",e.IceCream="IceCream",e.LightningBolt="LightningBolt",e.Maki="Maki",e.Megaphone="Megaphone",e.Mug="Mug",e.MusicNote1="MusicNote1",e.MusicNote2="MusicNote2",e.MusicNote3="MusicNote3",e.MusicNote4="MusicNote4",e.MusicNote5="MusicNote5",e.Piano="Piano",e.Running="Running",e.Saxophone="Saxophone",e.StarFace="StarFace",e.Stars="Stars",e.Strawberry="Strawberry",e.Sun="Sun",e.Sunglasses="Sunglasses",e.Tamborine="Tamborine",e.Watermelon="Watermelon",e.Rock="Rock",e.Kiss="Kiss",e.Alarm="Alarm",e.Boom="Boom",e.Butterfly="Butterfly",e.Confetti="Confetti",e.Dancing="Dancing",e.Devil="Devil",e.Flower="Flower",e.HeartEyes="HeartEyes",e.Heartbreak="Heartbreak",e.Lotus="Lotus",e.Palmtree="Palmtree",e.Muscle="Muscle",e}({});const D=[{id:"template-color-1",color:P.H_[P.DP.purple][P.Y6.default],stickers:[],background:w.COLOR},{id:"template-color-2",color:P.H_[P.DP.orange][P.Y6.default],stickers:[],background:w.COLOR},{id:"template-color-3",color:P.H_[P.DP.acid][P.Y6.default],stickers:[],background:w.COLOR},{id:"template-color-4",color:P.H_[P.DP.teal][P.Y6.light],stickers:[],background:w.COLOR},{id:"template-color-5",color:P.H_[P.DP.magenta][P.Y6.default],stickers:[],background:w.COLOR},{id:"template-color-6",color:P.H_[P.DP.blue][P.Y6.dark],stickers:[],background:w.COLOR},{id:"template-color-7",color:P.H_[P.DP.lava][P.Y6.default],stickers:[],background:w.COLOR}];var M=a("bLDf");const O=(0,M.A)("tempo-colors-background-neutral-tertiary-default"),T=[I.Fire,I.Megaphone,I.Diamond,I.MusicNote1,I.Stars,I.Strawberry,I.Heart].map(((e,t)=>({id:`template-image-sticker-${t+1}`,color:[O,!1],stickers:[{id:"sticker-1",name:e,position:{x:-.12,y:.15},rotation:-2,width:.33,height:.33},{id:"sticker-2",name:e,position:{x:.3,y:-.05},rotation:-1,width:.31,height:.31},{id:"sticker-3",name:e,position:{x:.62,y:.04},rotation:-.4,width:.48,height:.48}],background:w.COLOR,canPickImage:!0}))),R=[{id:"template-sticker-1",color:P.H_[P.DP.blue][P.Y6.dark],stickers:[{id:"sticker-1",name:I.Stars,position:{x:.42,y:.1},rotation:0,width:.18,height:.18},{id:"sticker-2",name:I.BoxingGlove,position:{x:.66,y:0},rotation:28,width:.38,height:.38}],background:w.COLOR},{id:"template-sticker-2",color:P.H_[P.DP.magenta][P.Y6.light],stickers:[{id:"sticker-1",name:I.HandsRaised,position:{x:.05,y:.1},rotation:-15,width:.22,height:.22},{id:"sticker-2",name:I.HandsRaised,position:{x:.66,y:0},rotation:22,width:.38,height:.38}],background:w.COLOR},{id:"template-sticker-3",color:P.H_[P.DP.teal][P.Y6.dark],stickers:[{id:"sticker-1",name:I.Maki,position:{x:.33,y:.1},rotation:-21,width:.22,height:.22},{id:"sticker-2",name:I.Maki,position:{x:.6,y:0},rotation:13,width:.42,height:.42}],background:w.COLOR},{id:"template-sticker-4",color:P.H_[P.DP.lava][P.Y6.dark],stickers:[{id:"sticker-1",name:I.Chili,position:{x:.38,y:.2},rotation:-41,width:.22,height:.22},{id:"sticker-2",name:I.Chili,position:{x:.5,y:.1},rotation:-5,width:.42,height:.42}],background:w.COLOR},{id:"template-sticker-5",color:P.H_[P.DP.purple][P.Y6.default],stickers:[{id:"sticker-1",name:I.MusicNote1,position:{x:.23,y:.1},rotation:-8.4,width:.23,height:.23},{id:"sticker-2",name:I.Crying,position:{x:.5,y:.1},rotation:-5.5,width:.42,height:.42},{id:"sticker-3",name:I.MusicNote5,position:{x:.75,y:.29},rotation:31.6,width:.22,height:.22}],background:w.COLOR},{id:"template-sticker-6",color:P.H_[P.DP.teal][P.Y6.light],stickers:[{id:"sticker-1",name:I.Sun,position:{x:.49,y:.03},rotation:0,width:.22,height:.22},{id:"sticker-2",name:I.Dog,position:{x:.52,y:.02},rotation:7,width:.48,height:.48}],background:w.COLOR},{id:"template-sticker-7",color:P.H_[P.DP.purple][P.Y6.deep],stickers:[{id:"sticker-1",name:I.Boombox,position:{x:.4,y:-.14},rotation:11,width:.6,height:.6},{id:"sticker-2",name:I.Fire,position:{x:.73,y:.28},rotation:0,width:.22,height:.22}],background:w.COLOR}],L=["color","image","sticker","imageSticker","color","mosaic","sticker","imageSticker","color"],F=()=>{const e=[...D],t=[...R],a=[...T],l=[];return L.forEach(((n,i)=>{switch(n){case"sticker":{const e=t[Math.floor(Math.random()*t.length)];l.push({...e}),t.splice(t.indexOf(e),1);break}case"image":{const e=(0,M.A)("tempo-colors-background-neutral-tertiary-default");l.push({id:`template-${i}`,color:[e,!1],stickers:[],background:w.COLOR,canPickImage:!0});break}case"imageSticker":{const e=a[Math.floor(Math.random()*a.length)];l.push({...e}),a.splice(a.indexOf(e),1);break}case"mosaic":l.push({id:`template-${i}`,color:P.H_[P.DP.blue][P.Y6.default],stickers:[],background:w.MOSAIC});break;default:{const t=e[Math.floor(Math.random()*e.length)];l.push({...t}),e.splice(e.indexOf(t),1);break}}})),l};var z=a("dn5u"),N=a.n(z);function H(e,t){switch(t.type){case"SELECT_CONFIG":return{...e,configSelected:e.templates.find((e=>e.id===t.configId))};case"SAVE_CONFIG":return{...e,templates:e.templates.map((e=>e.id===t.config.id?t.config:e)),lastTemplateSelected:t.config.id,lastSavedConfig:t.config,configSelected:t.config,isEditing:!1};case"SET_EDITING":{let a=e.configSelected;return t.isEditing?void 0!==t.config&&(a=t.config):a=e.lastSavedConfig,{...e,isEditing:t.isEditing,configSelected:a,...a&&{lastTemplateSelected:a.id}}}default:return e}}const[B,G]=(0,S.q6)({name:"TemplateContext"}),Y=({children:e,playlistId:t,isCreation:a})=>{const[l,n]=(0,i.useReducer)(H,{configSelected:null,isEditing:!1,lastSavedConfig:null,lastTemplateSelected:null,playlistId:t,sessionId:N()(),templates:a?F():[],isCreation:a||!1});return i.createElement(B,{value:{...l,setIsEditing:(e,t)=>n({type:"SET_EDITING",isEditing:e,config:t}),saveConfig:e=>n({type:"SAVE_CONFIG",config:e}),selectConfig:e=>n({type:"SELECT_CONFIG",configId:e})}},e)};var U=a("X51p"),$=a("CdHq"),j=a("9MQu"),W=a("HmE0"),V=a("Wp0Y"),X=a("iooo"),J=a("WmA5"),q=a("fkXJ"),K=a("XkdG");const Q=({onChange:e,value:t,hasError:a})=>i.createElement($.s,{flexDirection:"column",gap:"spacing.xs",alignItems:"flex-start"},i.createElement(v.E,{id:"playlist-assistant-name",role:"heading",variant:"body.s.default","data-testid":"playlist_name_title"},(0,V.AP)("createeditplaylistfield_title_name_web")),i.createElement(K.p,{placeholder:(0,V.AP)("Nom de la playlist"),maxLength:50,onChange:e,value:t,"aria-labelledby":"playlist-assistant-name","aria-required":"true",size:"small",isInvalid:a,"data-testid":"playlist_name_field"}));var Z=a("p+cz");const ee=({onChange:e,value:t})=>i.createElement($.s,{flexDirection:"column",gap:"spacing.xs",my:"spacing.s",alignItems:"flex-start"},i.createElement(v.E,{id:"playlist-assistant-description",variant:"body.s.default","data-testid":"playlist_description_title"},(0,V.AP)("createeditplaylistfield_title_description_web")),i.createElement(Z.T,{maxLength:200,placeholder:(0,V.AP)("createeditplaylistfield_text_playlistdescription_web"),onChange:e,"aria-labelledby":"playlist-assistant-description","aria-required":"false",value:t||"",fontSize:"sm",height:"92px",resize:"none","data-testid":"playlist_description_field"}));var te,ae=a("80JK"),le=a("8WIx"),ne=a("oh0j"),ie=a("FFEP");const oe=({onToggle:e,isChecked:t,disabled:a})=>i.createElement(ae.MJ,{key:"private",display:"flex",alignItems:"center",opacity:a?.4:void 0,pointerEvents:a?"none":void 0,onChange:a=>e(a,t)},i.createElement($.s,{as:le.l,htmlFor:"private",direction:"row",m:0,gap:"spacing.l",flex:1},te||(te=i.createElement($.s,{align:"center",justify:"center",boxSize:"size.m",borderRadius:"full",bg:"background.neutral.tertiary.default"},i.createElement(ie.X,{color:"icon.neutral.secondary.default"}))),i.createElement($.s,{direction:"row",align:"center",justify:"space-between",flex:1},i.createElement($.s,{direction:"column"},i.createElement(v.E,{variant:"body.l.default","data-testid":"private_title",color:"text.neutral.primary.default"},(0,V.AP)("Privée")),i.createElement(v.E,{as:"span",variant:"body.2xs.default","data-testid":"private_description",color:"text.neutral.secondary.default"},(0,V.AP)("createeditplaylistsettings_title_onlyyoucanseethisplaylist_web"))),i.createElement(ne.d,{id:"private",isChecked:t,isDisabled:a,"data-testid":t?"private_toggle_on":"private_toggle_off"}))));var re,se=a("vZvY");const ce=({onToggle:e,isChecked:t,disabled:a})=>i.createElement(ae.MJ,{key:"collab",display:"flex",alignItems:"center",opacity:a?.4:void 0,pointerEvents:a?"none":void 0,onChange:a=>e(a,t)},i.createElement($.s,{as:le.l,htmlFor:"collab",direction:"row",m:0,gap:"spacing.l",flex:1},re||(re=i.createElement($.s,{align:"center",justify:"center",boxSize:"size.m",borderRadius:"full",bg:"background.neutral.tertiary.default"},i.createElement(se.O,{color:"icon.neutral.secondary.default"}))),i.createElement($.s,{direction:"row",align:"center",justify:"space-between",flex:1},i.createElement($.s,{direction:"column"},i.createElement(v.E,{variant:"body.l.default","data-testid":"collaborative_title",color:"text.neutral.primary.default"},(0,V.AP)("Collaborative")),i.createElement(v.E,{as:"span",variant:"body.2xs.default","data-testid":"collaborative_subtitle",color:"text.neutral.secondary.default"},(0,V.AP)("createeditplaylistsettings_title_inviteotherstoaddtracks_web")))),i.createElement(ne.d,{id:"collab",isChecked:t,isDisabled:a,"data-testid":t?"collaborative_toggle_on":"collaborative_toggle_off"})));var de=a("5G9X"),me=a("K5vB"),pe=a("QOhT");const ue=({picture:e,size:t,onSucessUpdate:a,onErrorUpdate:l,onDisplayUpdate:n})=>i.createElement(me.AG,{value:{isGraphQlUpload:!0,onSuccess:a,onError:l,onDisplay:n}},i.createElement(pe.A,{bordered:!0,multiCover:!0,type:de.Ay.Playlist,height:t,width:t,uploadCover:"force",coverLink:!1,imgSrc:e})),ge=({type:e,playlistId:t,trackIds:a=[],onPlaylistCreation:l,data:n})=>{var r;const m=null==n?void 0:n.playlist,p=e===d.F.EDITION,u=e===d.F.CREATION,[g,v]=(0,i.useState)(null==m||null===(r=m.picture)||void 0===r?void 0:r.medium[0]),[E,f]=(0,i.useState)(void 0),b=(0,o.wA)(),[h,y]=(0,i.useState)(!1),[k]=(0,c.$IV)(),_=e=>{C({variables:{input:{title:D.trim(),description:M||void 0,isPrivate:O,isCollaborative:T,picture:e||void 0}}})},A=(e,a)=>{if(t){if(a)return void x({variables:{input:{playlistId:t,picture:e||void 0}}});x({variables:{input:{playlistId:t,title:D.trim(),description:M||"",isPrivate:O,isCollaborative:T,picture:e||void 0}}})}},[C]=(0,c.DpH)({onCompleted:e=>{var t;const l=null===(t=e.createPlaylist)||void 0===t||null===(t=t.playlist)||void 0===t?void 0:t.id;if(l){if(!a||0===a.length)return void R(l);a.length>0&&k({variables:{input:{playlistId:l,trackIds:a}}}).then((()=>{R(l)}))}},onError:()=>{y(!1)}}),[x]=(0,c.U3y)({onCompleted:e=>{var t;const a=null===(t=e.updatePlaylist)||void 0===t||null===(t=t.playlist)||void 0===t?void 0:t.id;a&&R(a)},onError:()=>{y(!1)}}),[S,P]=(0,i.useState)(!1),[w,I]=(0,i.useState)({title:(null==m?void 0:m.title)||"",description:(null==m?void 0:m.description)||null,isPrivate:(null==m?void 0:m.isPrivate)||!1,isCollab:(null==m?void 0:m.isCollaborative)||!1}),{title:D,description:M,isPrivate:O,isCollab:T}=w,R=t=>{e===d.F.CREATION?(J.A.push((0,X.jd)(`/playlist/${t}`)),(0,q.A)({body:(0,V.AP)("toastmessage_title_playlistcreated_web")}),null==l||l()):e===d.F.EDITION&&(0,q.A)({body:(0,V.AP)("toastmessage_title_playlistupdated_web")}),y(!1),b((0,s.Oo)())},L=(e,t)=>{I({...w,[e]:t})};return i.createElement(i.Fragment,null,i.createElement($.s,{direction:"column",gap:"spacing.l",p:"spacing.xl"},i.createElement($.s,{direction:"row",gap:"spacing.xl"},i.createElement(ue,{picture:g,onDisplayUpdate:(e,t)=>{v(e),f((()=>t))},onErrorUpdate:()=>{u?_():p&&A()},onSucessUpdate:e=>{u?_(e):p&&A(e,(null==m?void 0:m.title)===D&&(null==m?void 0:m.description)===M&&(null==m?void 0:m.isPrivate)===O&&(null==m?void 0:m.isCollaborative)===T)},size:200}),i.createElement($.s,{direction:"column",flex:1,gap:"spacing.l"},i.createElement(Q,{value:D,onChange:e=>{P(!1),L("title",e.target.value)},hasError:S}),i.createElement(ce,{isChecked:T,onToggle:(e,t)=>{e.stopPropagation(),I({...w,isCollab:!T,isPrivate:!t&&O})},disabled:O}),i.createElement(oe,{isChecked:O,onToggle:(e,t)=>{e.stopPropagation(),I({...w,isPrivate:!O,isCollab:!t&&T})},disabled:T}))),i.createElement(ee,{value:M,onChange:e=>L("description",e.target.value)})),i.createElement(j.e,{display:"flex",justifyContent:"flex-end",p:"spacing.xl",borderTop:"1px solid",borderTopColor:"divider.neutral.primary.default"},i.createElement(W.$n,{isDisabled:h,onClick:()=>{""!==D.trim()?(y(!0),E?E("",!0):u?_():p&&A()):P(!0)},"data-testid":p?"playlist_save_button":"playlist_create_button"},p?(0,V.AP)("Enregistrer"):(0,V.AP)("Créer"))))};a("/eM8");var ve=a("NgX8"),Ee=a("kD7r"),fe=a("kSUS"),be=a("LOQS"),he=a("Fzox"),ye=a("xobL"),ke=a("0JBE");function _e(){const{page:e}=(0,ke.iQ)(),t=(0,he.G)((e=>(0,ye.F6)(e.user).toString())),{sessionId:a,playlistId:l,isCreation:n}=G(),o=(0,i.useCallback)((a=>{var n;(n={playlist_id:null!=l?l:"0",screen_view_id_type:"user",screen_view_id:t,screen_view_name:e,...a}).screen_view_name&&be.A.log({type:"cdp",eventName:"playlist_edition_started",customAttributes:{...n}})}),[e,t,l]),r=(0,i.useCallback)((l=>{var n;(n={playlist_id:"0",playlist_uid:a,screen_view_id_type:"user",screen_view_id:t,screen_view_name:e,...l}).screen_view_name&&be.A.log({type:"cdp",eventName:"playlist_creation_started",customAttributes:{...n}})}),[e,a,t]);return{track:n?r:o,trackEdition:o,trackCreation:r}}const[Ae,Ce]=(0,S.q6)({name:"CarouselContext"}),xe=({children:e,onSelectionChanged:t})=>{const[a,l]=(0,i.useState)(null),n=(0,i.useRef)(new Map),o=(0,i.useMemo)((()=>({itemSelected:a,setItemSelected:e=>{l(e),null==t||t(e)},itemsRegistrated:n.current,registerItem:(e,t)=>{t?n.current.set(e,t):n.current.delete(e)}})),[a]);return i.createElement(Ae,{value:o},e)},Pe=({children:e,id:t})=>{const{itemSelected:a,registerItem:l}=Ce(),n=a===t;return i.createElement($.s,{key:t,id:t,align:"center",justify:"center",height:144,minWidth:144,sx:{"& *":{scrollSnapAlign:"none"},"&":{scrollSnapAlign:"center"}},borderRadius:n?"s":"xs",position:"relative",ref:e=>l(t,e)},e)};var we,Ie,De,Me,Oe=a("+9dH"),Te=a("4vn4"),Re=a("RSbz");const Le=({scrollToPrevious:e,scrollToNext:t})=>{const a=(0,he.G)((e=>e.user.DIRECTION));return i.createElement(i.Fragment,null,i.createElement($.s,{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 0.2s ease-in",position:"absolute",top:0,insetStart:0,align:"center",justify:"center",padding:"spacing.xl",height:"100%",zIndex:1,bgGradient:"ltr"===a?"linear(to-r, background.neutral.primary.default, transparent)":"linear(to-l, background.neutral.primary.default, transparent)"},i.createElement(W.K0,{"aria-label":"Scroll to previous",variant:"onDark",icon:"ltr"===a?we||(we=i.createElement(Re.Y,null)):Ie||(Ie=i.createElement(E.v,null)),onClick:e,size:"small"})),i.createElement($.s,{opacity:t?1:0,pointerEvents:t?"auto":"none",transition:"opacity 0.2s ease-in",position:"absolute",top:0,insetEnd:0,align:"center",justify:"center",padding:"spacing.xl",height:"100%",zIndex:1,bgGradient:"ltr"===a?"linear(to-l, background.neutral.primary.default, transparent)":"linear(to-r, background.neutral.primary.default, transparent)"},i.createElement(W.K0,{"aria-label":"Scroll to next",variant:"onDark",icon:"ltr"===a?De||(De=i.createElement(E.v,null)):Me||(Me=i.createElement(Re.Y,null)),onClick:t,size:"small"})))},Fe=({children:e,defaultItemToFocus:t,...a})=>{var l,n;const o=(0,i.useRef)(null),{itemSelected:r,setItemSelected:s,itemsRegistrated:c}=Ce();return i.useEffect((()=>{var e;t&&c.has(t)&&(null===(e=c.get(t))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))}),[t,c]),i.useEffect((()=>{if(!o.current)return;const e=new IntersectionObserver((e=>{e.forEach((e=>{var t;null!=e&&null!==(t=e.target)&&void 0!==t&&t.parentElement&&e.isIntersecting&&[...e.target.parentElement.children].forEach((t=>{if(t===e.target){const e=t.getAttribute("id");e&&s(e)}}))}))}),{root:o.current,rootMargin:"0px -49% 0px -49%",threshold:[...Array(5).keys()].map((e=>e/4))});for(const t of c.values())e.observe(t);return()=>null==e?void 0:e.disconnect()}),[c,s]),i.createElement(m.a,(0,Oe.A)({position:"relative",w:"100%",maxW:"100%"},a),i.createElement(Le,{scrollToPrevious:r&&null!==(l=c.get(r))&&void 0!==l&&l.previousElementSibling?()=>{var e;null===(e=c.get(r))||void 0===e||null===(e=e.previousElementSibling)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}:void 0,scrollToNext:r&&null!==(n=c.get(r))&&void 0!==n&&n.nextElementSibling?()=>{var e;null===(e=c.get(r))||void 0===e||null===(e=e.nextElementSibling)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}:void 0}),i.createElement(Te.FN,null,i.createElement(Te.vQ,{position:"relative",ref:o,px:"calc(50% - 72px)",py:"spacing.3xl",gap:"spacing.2xl"},e)))},ze=({children:e,id:t})=>{const{itemSelected:a,itemsRegistrated:l}=Ce(),n=(0,he.G)((e=>e.user.DIRECTION)),o=a===t,r=[...l.keys()],s=r.indexOf(t)<r.indexOf(a||""),c=!s&&!o;return i.createElement(m.a,{as:"button",width:"100%",height:"100%",borderRadius:"xs",outline:"2px solid transparent",outlineOffset:"2px",outlineColor:o?"border.accent.primary.default":void 0,transform:o?"scale(1.4,1.4)":"ltr"===n&&s||"rtl"===n&&c?`translateX(-${(0,M.A)("--tempo-space-spacing-xl")})`:"ltr"===n&&c||"rtl"===n&&s?`translateX(${(0,M.A)("--tempo-space-spacing-xl")})`:void 0,transition:"transform 0.2s ease-in, outline-color 0.2s ease-in",onClick:e=>{o||e.target.scrollIntoView({block:"nearest",inline:"center"})}},e)};var Ne,He=a("ZUSG");const Be=i.forwardRef((function({onClick:e,...t},a){return i.createElement(W.$n,(0,Oe.A)({ref:a,variant:"onDark",size:"small",onClick:e,position:"absolute",bottom:"-48px",left:"50%",transform:"translateX(-50%)",leftIcon:Ne||(Ne=i.createElement(He.r,null))},t),(0,V.AP)("playlistcover_action_customize_web"))}));var Ge=a("Tub5"),Ye=a("Ni3L"),Ue=a.n(Ye);const $e=[P.DP.purple,P.DP.magenta,P.DP.lava,P.DP.orange,P.DP.acid,P.DP.teal,P.DP.blue,P.DP.black,P.DP.white],je={id:"template-default",color:P.H_[P.DP.purple][P.Y6.default],stickers:[],background:w.COLOR},We={padding:4,borderStroke:"--tempo-colors-border-accent-primary-default",borderStrokeWidth:2,rotateAnchorOffset:20,rotateAnchorCursor:"grab",enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],anchorFill:"--tempo-colors-background-neutral-inverse-default",anchorCornerRadius:2,anchorStrokeWidth:0,anchorSize:12,flipEnabled:!1},[Ve,Xe,Je]=(0,S.q6)({name:"TemplateCanvasContext"}),qe=({children:e,config:t})=>{const[a,l]=(0,i.useState)(t.color||(0,P.D8)()),[n,o]=(0,i.useState)(t.background||w.COLOR),[r,s]=(0,i.useState)(t.stickers||[]),[c,d]=(0,i.useState)(null),[m,p]=(0,i.useState)(t.image),[u,g]=(0,i.useState)(t.text||{isSelected:!1}),v=(0,i.useMemo)((()=>({color:a,setColor:l,image:m,setImage:p,background:n,setBackground:o,stickers:r,text:u,selectText:()=>{d(null),g((e=>({...e,isSelected:!0})))},deselectText:()=>{g((e=>({...e,isSelected:!1})))},moveText:e=>{g((t=>({...t,position:e})))},resizeText:(e,t)=>{g((a=>({...a,scale:{x:e,y:t}})))},addSticker:e=>{const t=400/1200,a=.33333333333333337,l={id:N()(),name:e,position:{x:a,y:a},rotation:0,width:t,height:t};s((e=>[...e,l]))},removeSticker:()=>{s((e=>[...e.filter((e=>e.id!==c))])),d(null)},stickerSelected:c,selectSticker:e=>{s((t=>{const a=t.find((t=>t.id===e));return a?[...t.filter((t=>t.id!==e)),a]:t})),d(e)},deselectSticker:()=>d(null),updateStickerPosition:(e,t)=>{s((a=>a.map((a=>a.id===e?{...a,position:t}:a))))},updateStickerShape:(e,t,a,l,n)=>{s((i=>i.map((i=>i.id===e?{...i,position:t,width:a,height:l,rotation:n}:i))))},config:{...t,background:n,color:a,stickers:r,image:m,text:u}})),[a,n,r,c,m,u,t]);return i.createElement(Ve,{value:v},e)},Ke=qe;function Qe(e){const t=.16666666666666666-1*e/1200;return t<.1?.1:t}const et=({title:e,disabled:t})=>{var a,l,n,o,r,s,c;const{color:d,text:m,selectText:p,deselectText:u,moveText:g,resizeText:v}=Xe(),E=function(e){return e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\u24C2|[\uD83C-\uDBFF\uDC00-\uDFFF])+/gu,"")}(e)||(0,V.AP)("Nom de la playlist"),[,f]=d,b=i.useRef(null),h=i.useRef(null);i.useEffect((()=>{var e;m.isSelected&&null!=b&&b.current&&null!=h&&h.current&&(b.current.nodes([h.current]),null===(e=b.current.getLayer())||void 0===e||e.batchDraw())}),[m.isSelected]);const y={x:.06,width:.94,y:1-((null==h||null===(a=h.current)||void 0===a?void 0:a.getHeight())||0)-.06,rotation:0};return i.createElement(Ge.YJ,null,m.isSelected&&!t&&i.createElement(Ge.rw,{x:0,y:0,width:1,height:1,opacity:.7,fill:f?"#FFFFFF":"#000000",onClick:u}),i.createElement(Ge.EY,{text:E,fontSize:Qe(E.length),fontFamily:(0,M.A)("tempo-fonts-heading"),fontStyle:"bold",fill:(0,M.A)(f?"tempo-colors-text-accent-onLight-default":"tempo-colors-text-accent-onDark-default"),x:null!==(l=null===(n=m.position)||void 0===n?void 0:n.x)&&void 0!==l?l:y.x,y:null!==(o=null===(r=m.position)||void 0===r?void 0:r.y)&&void 0!==o?o:y.y,width:null!==(s=m.width)&&void 0!==s?s:y.width,rotation:null!==(c=m.rotation)&&void 0!==c?c:y.rotation,scale:m.scale,align:"left",ref:h,listening:!t,draggable:!t,onClick:p,onDragStart:p,onDragMove:e=>{const t=h.current;if(!t)return;const a=t.scaleX(),l=t.scaleY(),n=t.width()*a,i=t.height()*l,o=.2*n,r=.2*i;let s=e.target.x(),c=e.target.y();s<-n+o&&(s=-n+o),s>1-o&&(s=1-o),c<-i+r&&(c=-i+r),c>1-r&&(c=1-r),s===e.target.x()&&c===e.target.y()||(t.x(s),t.y(c))},onDragEnd:e=>{const t=e.target.x(),a=e.target.y();g({x:t,y:a})},onTransformEnd:()=>{const e=h.current;e&&v(e.scaleX(),e.scaleY())}}),m.isSelected&&!t&&i.createElement(Ge.Ge,(0,Oe.A)({},We,{ref:b,borderStroke:(0,M.A)(We.borderStroke),anchorFill:(0,M.A)(f?"--tempo-colors-background-neutral-primary-default":"--tempo-colors-background-neutral-inverse-default")})))},tt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/diamond.ec35196257adcf98f011.svg",at=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/boombox.0e4a785468aaabe2dc96.svg",lt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/boxing_glove.bae66eddb54ada8a6265.svg",nt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/cherry.acc1b235a80aa41a8a48.svg",it=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/chili.8415d9e91d689de974c0.svg",ot=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/crying.d9c2b1bff8d7748dd9c4.svg",rt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/discoball.7e0b1005c885656b33b3.svg",st=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/dog.cda0d1f8bff124116b81.svg",ct=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/fire.b65081b49fac28032151.svg",dt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/flame_heart.4c12ad71401625423ffc.svg",mt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/guitar.5a0dcc76374529fdd2f0.svg",pt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/hands_raised.c8713447b4bb4f5b0971.svg",ut=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/heart.174e3cc92756651a7d42.svg",gt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/hot_face.8dfbf69a8423f10c7ee5.svg",vt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/ice_cream.b976e1c5e04623d43b8a.svg",Et=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/lightning_bolt.440910584dd62a78f6a6.svg",ft=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/maki.99c8b94ccb4636eedcb5.svg",bt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/megaphone.d036edb5b5e78848d3d4.svg",ht=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/mug.92d0f8d0b0d6a9306f98.svg",yt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/music_note_1.e8700c169f105263a832.svg",kt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/music_note_2.262833d375bbbaad258d.svg",_t=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/music_note_3.544e4850bd748bd28bc2.svg",At=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/music_note_4.b1a1ec5598871778e7a1.svg",Ct=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/music_note_5.1ce6991a2a263a37944c.svg",xt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/piano.59f8775ca9f762d58427.svg",St=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/running.c393db348d114411a42f.svg",Pt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/saxophone.212c0b7629921ed9d7d3.svg",wt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/star_face.7457cf107cb4b5d0d989.svg",It=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/stars.4835641a3e37b0993413.svg",Dt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/strawberry.ca31ffd9848d87e10f02.svg",Mt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/sun.74e436f1fdf1eeca0cf5.svg",Ot=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/sunglasses.2e13b1f8e0752b6eab41.svg",Tt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/tamborine.c21cd3598136c26f4910.svg",Rt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/watermelon.584f2e053e700e5a51aa.svg",Lt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/rock.7a271c4731b7f87e5093.svg",Ft=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/kiss.22ca2fa9b68b850b0b88.svg",zt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/alarm.529caf6476dc41e6fdb4.svg",Nt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/boom.9fa51bff195a18b41741.svg",Ht=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/butterfly.7505e3e01f8cf11466ed.svg",Bt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/confetti.e111d215a0ea4a613a80.svg",Gt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/dancing.58d4a3fe2363a2421cc8.svg",Yt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/devil.59587a6b0e6d3ce32c1b.svg",Ut=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/flower.f03282150eb1ab385d7b.svg",$t=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/heart_eyes.746b0b8d1d472849c0f8.svg",jt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/heartbreak.065d19f8e4e1035f43df.svg",Wt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/lotus.b52c602838978f135b68.svg",Vt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/palm_tree.acde7aa88fb748b75b95.svg",Xt=a.p+"src/components/Modal/components/PlaylistAssistant/elements/template/tools/Sticker/icons/muscle.f3da8d98c643677a4fc7.svg",Jt=i.forwardRef((({x:e,y:t,src:a,width:l,height:n,fitCover:o,...r},s)=>{const[c,d]=(0,i.useState)(null);(0,i.useEffect)((()=>{const e=new window.Image;e.src=a,e.crossOrigin="Anonymous",e.onload=()=>{d(e)}}),[a]);const m=i.useMemo((()=>c&&o?function(e){let t,a;return 1>=e.width/e.height?(t=e.width,a=e.width/1):(t=1*e.height,a=e.height),{cropX:(e.width-t)/2,cropY:(e.height-a)/2,cropWidth:t,cropHeight:a}}(c):null),[c,o]);return c?i.createElement(Ge._V,(0,Oe.A)({x:e,y:t,width:l,height:n},r,m,{ref:s,image:c})):null}));Jt.displayName="Image";const qt=Jt,Kt=({position:e,src:t,isSelected:a,width:l,height:n,rotation:o,hasStickerSelected:r,disabled:s,onSelect:c,onDeselect:d,onDragEnd:m,onTransformEnd:p})=>{const u=(0,i.useRef)(null),g=(0,i.useRef)(null);return i.useEffect((()=>{var e;a&&null!=g&&g.current&&null!=u&&u.current&&(g.current.nodes([u.current]),null===(e=g.current.getLayer())||void 0===e||e.batchDraw())}),[a]),i.createElement(Ge.YJ,null,a&&!s&&i.createElement(Ge.rw,{x:0,y:0,width:1,height:1,opacity:.7,fill:"#000000",onClick:d}),i.createElement(qt,{x:e.x,y:e.y,rotation:o,src:t,onClick:c,ref:u,width:l,height:n,draggable:a||!r,listening:!s,onDragStart:()=>{r||c()},onDragEnd:e=>{m(e.target.x(),e.target.y())},onTransformEnd:()=>{const e=u.current;if(!e)return;const t=e.scaleX(),a=e.scaleY();e.scaleX(1),e.scaleY(1),p(e.x(),e.y(),e.width()*t,e.height()*a,e.rotation())}}),a&&!s&&i.createElement(Ge.Ge,(0,Oe.A)({},We,{ref:g,borderStroke:(0,M.A)(We.borderStroke),anchorFill:(0,M.A)(We.anchorFill),boundBoxFunc:(e,t)=>Math.abs(t.width)<32||Math.abs(t.height)<32?e:t})))},Qt=({isEditable:e=!1})=>{const{stickers:t,stickerSelected:a,selectSticker:n,deselectSticker:o,updateStickerPosition:r,updateStickerShape:s}=Xe();return i.createElement(i.Fragment,null,t.map((t=>i.createElement(Kt,{key:t.id,src:l[t.name],width:t.width,height:t.height,position:t.position,rotation:t.rotation,disabled:!e,isSelected:a===t.id,hasStickerSelected:null!==a,onSelect:()=>n(t.id),onDeselect:o,onDragEnd:(e,a)=>{r(t.id,{x:e,y:a})},onTransformEnd:(e,a,l,n,i)=>{const o={x:e,y:a};s(t.id,o,l,n,i)}}))))},Zt=i.forwardRef((({title:e,isEditable:t},a)=>{const{color:l,background:n,image:o}=Xe(),r=i.useRef(null),[s,c]=i.useState({width:0,height:0}),[d]=l;return i.useLayoutEffect((()=>{Ue().pixelRatio=3*window.devicePixelRatio}),[]),i.useEffect((()=>{if(!r.current)return;const e=new ResizeObserver((e=>{e[0].target&&c({width:e[0].target.offsetWidth,height:e[0].target.offsetHeight})}));return e.observe(r.current),()=>e.disconnect()}),[]),i.createElement(m.a,{overflow:"hidden",borderRadius:"xs",width:"100%",height:"100%",ref:r},i.createElement(Ge.BI,{width:s.width,height:s.height,scale:{x:s.width,y:s.height},ref:a},i.createElement(Ge.Wd,null,(n===w.COLOR||!o)&&i.createElement(Ge.rw,{x:0,y:0,width:1,height:1,fill:d}),n===w.CUSTOM_PICTURE&&o&&i.createElement(qt,{x:0,y:0,width:1,height:1,src:o,fitCover:!0}),i.createElement(Qt,{isEditable:t}),i.createElement(et,{title:e,disabled:!t}))))}));Zt.displayName="TemplateCanvas";const ea=Zt;var ta=a("siwx");const aa=a.p+"images/components/modals/playlist_assistant/mosaic.f908989931add75c2177.png";function la({variant:e="preview"}){var t;const{playlistId:a}=G(),{data:l}=(0,c.EG)({variables:{playlistId:a},skip:!a}),n=null==l||null===(t=l.playlist)||void 0===t?void 0:t.defaultPicture,o=n?{src:"edit"===e?n.medium[0]:n.small[0],h:"edit"===e?"120px":"60px",w:"edit"===e?"120px":"60px",borderRadius:"xs"}:{src:aa,h:"auto",w:"90%",maxW:"180px"};return i.createElement($.s,{alignItems:"center",backgroundColor:"background.neutral.tertiary.default",borderRadius:"xs",flexDirection:"column",gap:"spacing.l",height:"100%",justifyContent:"center",overflow:"hidden",p:"edit"===e?"spacing.l":"spacing.xs",width:"100%"},i.createElement(ta._,(0,Oe.A)({alt:"mosaic of the playlist"},o)),i.createElement(v.E,{variant:"edit"===e?"body.l.default":"body.2xs.default",color:"text.neutral.secondary.default",textAlign:"center"},(0,V.AP)("playlistcovertooltip_text_albummosaicdescription_web")))}var na,ia=a("kqs6");const oa=({children:e,onChange:t,...a})=>{const l=(0,i.useRef)(null);return i.createElement(m.a,(0,Oe.A)({position:"relative",width:"100%",height:"100%"},a),i.createElement(W.K0,{variant:"onLight",size:"small",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",_hover:{transform:"translate(-50%, -50%) scale(1.2)"},icon:na||(na=i.createElement(ia.x,null)),zIndex:1,onClick:e=>{var t;e.stopPropagation(),null===(t=l.current)||void 0===t||t.click()},"aria-label":(0,V.AP)("playlistcover_action_uploadimage_web")}),e,i.createElement(K.p,{type:"file",accept:"image/jpeg,image/png",ref:l,display:"none",onChange:t}))};var ra;const sa=(0,i.forwardRef)((function({config:e,isSelected:t=!0,title:a},l){let n;switch(e.background){case w.MOSAIC:n=ra||(ra=i.createElement(la,null));break;case w.CUSTOM_PICTURE:case w.COLOR:default:n=i.createElement(Zt,{title:a,ref:t?l:void 0})}return i.createElement(qe,{config:e},e.canPickImage?i.createElement(Je.Consumer,null,(({setImage:e,setBackground:t})=>i.createElement(oa,{onChange:a=>((e,t)=>{const a=e.target.files;if(a){const e=new FileReader;e.onload=()=>{"string"==typeof e.result&&t(e.result)},e.readAsDataURL(a[0])}})(a,(a=>{e(a),t(w.CUSTOM_PICTURE)}))},n))):n)})),ca=i.forwardRef((({title:e},t)=>{const{itemSelected:a}=Ce(),{setIsEditing:l,lastTemplateSelected:n,templates:o}=G(),{track:r}=_e();return i.createElement(Fe,{defaultItemToFocus:n||void 0,mt:"spacing.xl"},o.map((n=>i.createElement(Pe,{key:n.id,id:n.id},i.createElement(ze,{id:n.id},i.createElement(sa,{title:e,config:n,isSelected:a===n.id,ref:t})),a===n.id&&i.createElement(Be,{onClick:()=>{r({action:"customization_clicked"}),l(!0)}})))))}));ca.displayName="CoverCarousel";const da=ca;var ma=a("Qx5r"),pa=a("XiLM"),ua=a("Ti9p"),ga=a("9vg6"),va=a("zgkh"),Ea=a("y7xR"),fa=a("yJYf");const ba=({children:e})=>i.createElement($.s,{direction:"row",align:"center",gap:"spacing.m",mb:"spacing.m"},e),ha=({color:e,onClick:t,selected:a})=>i.createElement(m.a,{as:"button",onClick:t,boxSize:"size.l",padding:a?"spacing.xs":void 0,transition:"padding 0.2s ease-in",_hover:{padding:"spacing.xs","& > div":{outlineColor:"border.neutral.primary.default",border:"transparent"},"& > div:after":{content:"none"}}},i.createElement(m.a,{bgColor:e,borderRadius:"rounded",outline:"2px solid transparent",outlineOffset:"2px",outlineColor:a?"border.accent.primary.default":void 0,transition:"outline-color 0.2s ease-in",width:"100%",height:"100%",position:"relative",sx:a?void 0:{"&:after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"rounded",outline:"1px solid",outlineOffset:"-1px",outlineColor:"border.neutral.primary.default",backgroundColor:"transparent",opacity:.2}}}));var ya,ka=a("KoOM"),_a=a("xLNB");const Aa=()=>{const{color:e}=Xe();return i.createElement($.s,{position:"relative"},ya||(ya=i.createElement(m.a,{as:ka.G,size:"medium",color:"icon.neutral.primary.default"})),i.createElement(m.a,{as:_a.Z,size:"medium",color:e[0],position:"absolute",top:0,left:0}))},Ca=({children:e,...t})=>i.createElement(W.K0,(0,Oe.A)({"aria-label":"tool-icon",bgColor:"background.neutral.secondary.default",boxSize:"size.xl",variant:"ghost"},t),e);Ca.displayName="ToolIcon";const xa=({children:e,...t})=>i.createElement(v.E,(0,Oe.A)({variant:"body.default.2xs",color:"text.neutral.primary.default"},t),e);xa.displayName="ToolLabel";const Sa=i.forwardRef((({children:e,...t},a)=>i.createElement($.s,(0,Oe.A)({direction:"column",alignItems:"center",gap:"spacing.s",ref:a},t),e)));Sa.displayName="Tool",Sa.Icon=Ca,Sa.Label=xa;const Pa=Sa;var wa,Ia;const Da=()=>{const{setColor:e,color:t,background:a}=Xe(),{track:l}=_e(),n=i.useRef((0,fe.A)((()=>{l({action:"color_validated"})}),400));return a===w.MOSAIC?i.createElement(Pa,null,wa||(wa=i.createElement(Pa.Icon,{isDisabled:!0},i.createElement(Aa,null))),i.createElement(Pa.Label,{color:"text.neutral.primary.disabled"},(0,V.AP)("playlistcover_title_color_web"))):i.createElement(pa.A,{placement:"left-start",onOpen:()=>{l({action:"color_clicked"})}},i.createElement(ua.W,null,i.createElement(Pa,null,Ia||(Ia=i.createElement(Pa.Icon,null,i.createElement(Aa,null))),i.createElement(Pa.Label,null,(0,V.AP)("playlistcover_title_color_web")))),i.createElement(ga.h,{maxWidth:"fit-content",mr:"spacing.2xl"},i.createElement(va.D,null,i.createElement(Ea.D,{variant:"heading.s",color:"text.neutral.primary.default"},(0,V.AP)("playlistcover_title_color_web"))),i.createElement(fa.e,null,i.createElement($.s,{direction:"column-reverse"},i.createElement(ba,null,i.createElement(ha,{color:P.H_[P.DP.black][0],onClick:()=>e(P.H_[P.DP.black]),selected:P.H_[P.DP.black][0]===t[0]}),i.createElement(ha,{color:P.H_[P.DP.white][0],onClick:()=>e(P.H_[P.DP.white]),selected:P.H_[P.DP.white][0]===t[0]})),Object.entries(P.H_).filter((([e])=>$e.includes(e)&&e!==P.DP.black&&e!==P.DP.white)).map((([a,l])=>i.createElement(ba,{key:a},Object.entries(l).map((([a,l])=>i.createElement(ha,{key:a,color:l[0],onClick:()=>{e(l),n.current()},selected:l[0]===t[0]}))))))))))};var Ma=a("wXyi"),Oa=a("Iiij"),Ta=a("Efr0"),Ra=a("9OcB");const La=({acceptFiles:e,children:t,onChange:a,onDragOver:l,onDragLeave:n,...o})=>{const r=(0,i.useRef)(null),[s,c]=(0,i.useState)(!1),d=t=>{a&&1===t.length&&e.includes(t[0].type)&&(null==a||a(t[0]))};return i.createElement($.s,(0,Oe.A)({position:"relative",direction:"column",align:"center",border:"1px dashed",borderColor:`border.${s?"accent":"neutral"}.primary.default`,borderRadius:"s",gap:"spacing.s",p:"spacing.l",backgroundColor:"background.neutral.primary.default",onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",null==l||l(e),c(!0)},onDragLeave:e=>{null==n||n(e),c(!1)},onDrop:e=>{e.preventDefault();const t=e.dataTransfer.files;d(t),c(!1)}},o),t((()=>{r.current&&r.current.click()})),i.createElement(m.a,{as:"input",type:"file",accept:e,ref:r,display:"none",onChange:e=>{const t=e.target.files;t&&d(t)}}))};var Fa,za,Na;const Ha=({isOpen:e,onClose:t})=>{var a;const{image:l,setImage:n,setBackground:o}=Xe(),r=i.useRef(null);var s,c;return s=r,c=t,(0,i.useEffect)((()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&c(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[s,c]),i.createElement(pa.A,{isLazy:!0,placement:"left-start",isOpen:e},Fa||(Fa=i.createElement(ua.W,null,i.createElement(m.a,{w:0,h:0,visibility:"hidden","aria-hidden":!0}))),i.createElement(ga.h,{maxWidth:"fit-content",mr:"spacing.2xl",ref:r},i.createElement(va.D,null,i.createElement(Ea.D,{variant:"heading.s",color:"text.neutral.primary.default"},(0,V.AP)("playlistcover_title_image_web"))),i.createElement(fa.e,null,i.createElement(La,{acceptFiles:"image/jpeg,image/png",onChange:e=>{o(w.CUSTOM_PICTURE);const t=new FileReader;t.onload=()=>{"string"==typeof t.result&&n(t.result)},t.readAsDataURL(e)}},(e=>l?i.createElement($.s,{gap:"spacing.l",align:"center",direction:"column"},a||(a=i.createElement(Ra.A,{size:"size.2xl",src:l})),i.createElement(W.$n,{size:"small",variant:"outline",leftIcon:Na||(Na=i.createElement(ia.x,null)),onClick:e},(0,V.AP)("playlistcover_title_changepicture_web"))):i.createElement($.s,{direction:"column",gap:"spacing.s",align:"center"},za||(za=i.createElement(ia.x,{size:"medium"})),i.createElement(v.E,{variant:"body.s.default",id:"input_preview_text"},(0,V.AP)("playlistcover_action_dragimagehere_web")),i.createElement(v.E,{variant:"body.xs.default",color:"text.neutral.secondary.default"},(0,V.AP)("generic_text_or_web")),i.createElement(W.$n,{size:"small",onClick:e},(0,V.AP)("playlistcover_action_uploadimage_web"))))))))};var Ba,Ga,Ya,Ua;const $a=()=>{const{setBackground:e,background:t,image:a}=Xe(),[l,n]=i.useState(!1),{track:o}=_e();return i.createElement($.s,{direction:"row"},i.createElement(Ha,{isOpen:l,onClose:()=>n(!1)}),i.createElement(pa.A,{placement:"left-start",onOpen:()=>n(!1)},i.createElement(ua.W,null,i.createElement(Pa,null,Ba||(Ba=i.createElement(Pa.Icon,null,i.createElement(Ma.I,{size:"medium"}))),i.createElement(Pa.Label,null,(0,V.AP)("playlistcover_title_background_web")))),i.createElement(ga.h,{maxWidth:"fit-content",mr:"spacing.2xl"},i.createElement(va.D,null,i.createElement(Ea.D,{variant:"heading.s",color:"text.neutral.primary.default"},(0,V.AP)("playlistcover_title_background_web"))),i.createElement(fa.e,null,i.createElement($.s,{direction:"row",gap:"spacing.l"},i.createElement(Pa,{onClick:()=>{t!==w.COLOR&&(o({action:"plain_clicked"}),e(w.COLOR))}},i.createElement(Pa.Icon,{isActive:t===w.COLOR},Ga||(Ga=i.createElement(Oa.d,{size:"medium"}))),i.createElement(Pa.Label,null,(0,V.AP)("playlistcover_title_plain_web"))),i.createElement(Pa,{onClick:()=>{o({action:"personal_image_clicked"}),n(!0),a&&e(w.CUSTOM_PICTURE)}},i.createElement(Pa.Icon,{isActive:t===w.CUSTOM_PICTURE},Ya||(Ya=i.createElement(ia.x,{size:"medium"}))),i.createElement(Pa.Label,null,(0,V.AP)("playlistcover_title_image_web"))),i.createElement(Pa,{onClick:()=>{t!==w.MOSAIC&&(o({action:"mosaic_clicked"}),e(w.MOSAIC))}},i.createElement(Pa.Icon,{isActive:t===w.MOSAIC},Ua||(Ua=i.createElement(Ta.X,{size:"medium"}))),i.createElement(Pa.Label,null,(0,V.AP)("playlistcover_title_mosaic_web"))))))))};var ja,Wa,Va,Xa=a("aIaO"),Ja=a("K4J6");const qa=()=>{const{addSticker:e,background:t}=Xe(),[a,n]=i.useState(!0),{track:o}=_e(),r=i.useRef((0,fe.A)((()=>{o({action:"sticker_validated"})}),400));return t===w.MOSAIC?i.createElement(Pa,null,ja||(ja=i.createElement(Pa.Icon,{isDisabled:!0},i.createElement(Ja.f,{size:"medium"}))),i.createElement(Pa.Label,{color:"text.neutral.primary.disabled"},(0,V.AP)("playlistcover_title_stickers_web"))):i.createElement(pa.A,{isLazy:!0,placement:"left",onOpen:()=>{o({action:"sticker_clicked"})}},i.createElement(ua.W,null,i.createElement(Pa,null,Wa||(Wa=i.createElement(Pa.Icon,null,i.createElement(Ja.f,{size:"medium"}))),i.createElement(Pa.Label,null,(0,V.AP)("playlistcover_title_stickers_web")))),i.createElement(ga.h,{maxWidth:"fit-content",mr:"spacing.2xl"},i.createElement(va.D,null,i.createElement(Ea.D,{variant:"heading.s",color:"text.neutral.primary.default"},(0,V.AP)("playlistcover_title_stickers_web"))),i.createElement(fa.e,{p:0,position:"relative"},i.createElement(Xa.x,{gap:"spacing.xl",templateColumns:"repeat(3, 1fr)",maxHeight:380,p:"spacing.xl",overflowY:"scroll",onScroll:e=>{const t=e.target;t.offsetHeight+t.scrollTop>=t.scrollHeight?n(!1):n(!0)}},Object.values(I).map((t=>i.createElement(m.a,{key:t,as:"button",onClick:()=>{e(t),r.current()}},i.createElement(ta._,{loading:"lazy",src:l[t],alt:t,boxSize:"size.2xl"}))))),a&&(Va||(Va=i.createElement(m.a,{position:"absolute",pointerEvents:"none",bottom:0,left:0,width:"100%",height:"100px",bgGradient:"linear-gradient(0deg, background.neutral.primary.default 0%, rgba(0,0,0,0) 100%)"}))))))};var Ka;const Qa=()=>Ka||(Ka=i.createElement($.s,{direction:"column",borderLeft:"1px solid",borderLeftColor:"border.neutral.primary.default",p:"spacing.xl",gap:"spacing.l"},i.createElement(Da,null),i.createElement($a,null),i.createElement(qa,null)));var Za,el,tl;function al({title:e}){const{background:t}=Xe();return t===w.MOSAIC?Za||(Za=i.createElement(la,{variant:"edit"})):i.createElement(ea,{title:e,isEditable:!0})}const ll=({title:e})=>{var t;const{configSelected:a,isEditing:l,setIsEditing:n,saveConfig:o}=G(),{track:r}=_e();return a&&l?i.createElement(Ke,{config:a},i.createElement(Je.Consumer,null,(({config:a,removeSticker:l,stickerSelected:s})=>i.createElement(i.Fragment,null,i.createElement($.s,{direction:"row",justify:"space-between",align:"stretch"},i.createElement($.s,{direction:"column",gap:"spacing.xl",align:"center",mx:"auto",py:"72px",position:"relative"},t||(t=i.createElement(m.a,{width:320,height:320},i.createElement(al,{title:e}))),s&&i.createElement(W.$n,{onClick:l,size:"small",variant:"onLight",position:"absolute",bottom:"spacing.xl",leftIcon:el||(el=i.createElement(ma.u,null)),bg:"background.feedback.error.default",_hover:{bg:"background.feedback.error.hovered"},_active:{bg:"background.feedback.error.pressed"}},(0,V.AP)("Supprimer"))),tl||(tl=i.createElement(Qa,null))),i.createElement(j.e,{display:"flex",justifyContent:"flex-end",p:"spacing.xl",borderTop:"1px solid",borderTopColor:"divider.neutral.primary.default"},i.createElement(W.$n,{variant:"ghost",onClick:()=>{r({action:"customization_cancelled"}),n(!1)}},(0,V.AP)("generic_action_cancel_web")),i.createElement(W.$n,{onClick:()=>{r({action:"customization_saved"}),o(a)}},(0,V.AP)("generic_action_save_web"))))))):null};var nl=a("QSbk"),il=a("Vd8Q");const ol=({type:e,playlistId:t,trackIds:a=[],onPlaylistCreation:l,data:n})=>{var r;const u=null==n?void 0:n.playlist,g=e===d.F.EDITION,E=e===d.F.CREATION,{configSelected:f,isEditing:b,selectConfig:h,setIsEditing:y}=G(),k=(0,o.wA)(),[_,A]=(0,i.useState)(!1),C=i.useRef(null),{track:x,trackCreation:S,trackEdition:P}=_e(),[I]=(0,c.$IV)(),D=i.useRef((0,fe.A)((()=>{S({action:"template_selected"})}),400)),M=e=>{T({variables:{input:{title:z.trim(),description:N||void 0,isPrivate:H,isCollaborative:B,picture:e||void 0}}})},O=(e,a)=>{if(t){if(a)return void R({variables:{input:{playlistId:t,picture:e||void 0}}});R({variables:{input:{playlistId:t,title:z.trim(),description:N||"",isPrivate:H,isCollaborative:B,picture:e||void 0}}})}},[T]=(0,c.DpH)({onCompleted:e=>{var t;const l=null===(t=e.createPlaylist)||void 0===t||null===(t=t.playlist)||void 0===t?void 0:t.id;if(l){if(!a||0===a.length)return S({action:"playlist_created",playlist_id:l}),void ne(l);a.length>0&&I({variables:{input:{playlistId:l,trackIds:a}}}).then((()=>{ne(l)}))}},onError:()=>{A(!1)}}),[R]=(0,c.U3y)({onCompleted:e=>{var t;const a=null===(t=e.updatePlaylist)||void 0===t||null===(t=t.playlist)||void 0===t?void 0:t.id;a&&(P({action:"playlist_edited"}),ne(a))},onError:()=>{A(!1)}}),[L,F]=(0,i.useState)(!1),{fieldValues:{title:z,description:N,isPrivate:H,isCollab:B},onlyPictureChanged:Y,onToggleCollab:U,onChangeField:K,onTogglePrivate:Z}=function(e){const[t,a]=(0,i.useState)({title:(null==e?void 0:e.title)||"",description:(null==e?void 0:e.description)||null,isPrivate:(null==e?void 0:e.isPrivate)||!1,isCollab:(null==e?void 0:e.isCollaborative)||!1});return{fieldValues:t,onToggleCollab:(e,l)=>{e.stopPropagation(),a({...t,isCollab:!t.isCollab,isPrivate:!l&&t.isPrivate})},onTogglePrivate:(e,l)=>{e.stopPropagation(),a({...t,isPrivate:!t.isPrivate,isCollab:!l&&t.isCollab})},onChangeField:(e,l)=>{a({...t,[e]:l})},onlyPictureChanged:(null==e?void 0:e.title)===t.title&&(null==e?void 0:e.description)===t.description&&(null==e?void 0:e.isPrivate)===t.isPrivate&&(null==e?void 0:e.isCollaborative)===t.isCollab}}(u),te=()=>k((0,s.Oo)()),ae=e=>{E?M(e):g&&O(e,Y)},le=()=>{E?M():g&&O()},ne=t=>{e===d.F.CREATION?(J.A.push((0,X.jd)(`/playlist/${t}`)),(0,q.A)({body:(0,V.AP)("toastmessage_title_playlistcreated_web")}),null==l||l()):e===d.F.EDITION&&(0,q.A)({body:(0,V.AP)("toastmessage_title_playlistupdated_web")}),A(!1),te()},[ie]=(0,c.DCO)();return b&&f?i.createElement(ke.OJ,{value:{page:"playlist_customization"}},i.createElement(ll,{title:z})):i.createElement($.s,{direction:"column"},e===d.F.CREATION&&i.createElement(xe,{onSelectionChanged:e=>{h(e),D.current()}},i.createElement(da,{title:z,ref:C})),e===d.F.EDITION&&i.createElement($.s,{position:"relative",alignItems:"center",h:"200px",justifyContent:"center",mt:"spacing.xl",mx:"auto",w:"200px"},f?i.createElement(sa,{config:f,title:z,isSelected:!0,ref:C}):i.createElement(Ra.A,{type:de.Ay.Playlist,src:null==u||null===(r=u.picture)||void 0===r?void 0:r.medium[0]}),i.createElement(ve.m,{label:i.createElement(Ee._G,null,i.createElement(p.T,{textAlign:"center",spacing:"spacing.2xs"},i.createElement(v.E,{variant:"body.s.default"},(0,V.AP)("playlistcovertooltip_title_customize_web")),i.createElement(v.E,{variant:"body.2xs.default"},(0,V.AP)("playlistcovertooltip_text_customizedescription_web"))))},i.createElement(Be,{bottom:"-16px",onClick:()=>{x({action:"customization_clicked"}),y(!0,null!=f?f:je)}}))),i.createElement(m.a,{p:"spacing.xl"},i.createElement($.s,{direction:"column",flex:1,gap:"spacing.l",mb:"spacing.l"},i.createElement(Q,{value:z,onChange:e=>{F(!1),K("title",e.target.value)},hasError:L}),i.createElement(ce,{isChecked:B,onToggle:U,disabled:H}),i.createElement(oe,{isChecked:H,onToggle:Z,disabled:B})),i.createElement(ee,{value:N,onChange:e=>K("description",e.target.value)})),i.createElement(j.e,{display:"flex",justifyContent:"flex-end",p:"spacing.xl",borderTop:"1px solid",borderTopColor:"divider.neutral.primary.default"},i.createElement(W.$n,{variant:"ghost",onClick:()=>{te(),E?S({action:"playlist_creation_cancelled"}):P({action:"playlist_edition_cancelled"})}},(0,V.AP)("generic_action_cancel_web")),i.createElement(W.$n,{isDisabled:_,onClick:()=>{""!==z.trim()?(A(!0),!g||f?f&&f.background===w.MOSAIC&&t?ie({variables:{input:{playlistId:t}},onCompleted:e=>{if("ResetDefaultPlaylistCoverMutationOutput"===e.resetDefaultPlaylistCover.__typename)return ne(t);A(!1)}}):C.current&&C.current.toBlob({pixelRatio:8.333333333333334,mimeType:"image/jpeg",quality:1,callback:async e=>{e?(async(e,t,a,l,n)=>{const i=`https://${il.default.get("host_upload")}/v2/playlist/picture`,o=new FormData;o.append("file",e);try{const e=await(0,nl.gf)(!0),t=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:o});if(t.ok){const e=await t.json();return Object.keys(e.error).length>0?void n(e.error):void l(e.results)}n()}catch(e){n()}})(new File([e],"template.jpg",{type:"image/jpeg"}),0,0,ae,le):le()}}):O()):F(!0)},"data-testid":g?"playlist_save_button":"playlist_create_button"},g?(0,V.AP)("Enregistrer"):(0,V.AP)("Créer"))))};var rl;const sl=({title:e})=>{const{setIsEditing:t}=G(),{track:a}=_e();return i.createElement($.s,{display:"inline-flex",direction:"row"},i.createElement(Ea.D,{as:"button",type:"button",variant:"heading.m",onClick:()=>{t(!1),a({action:"customization_cancelled"})},color:"text.neutral.secondary.default",_hover:{color:"text.neutral.primary.default"},_focus:{color:"text.neutral.primary.default"},_active:{color:"text.neutral.primary.default"}},e),rl||(rl=i.createElement(E.v,{color:"icon.neutral.secondary.default"})),i.createElement(Ea.D,{as:"h3",color:"text.neutral.primary.default",variant:"heading.m"},(0,V.AP)("playlistcover_title_customize_web")))},cl=({isCreation:e})=>{const{isEditing:t}=G(),a=e?(0,V.AP)("generic_title_createplaylist_web"):(0,V.AP)("generic_title_editplaylist_web"),{trackCreation:l,trackEdition:n}=_e();return i.createElement(U.A.Header,{height:"auto",borderBottom:"1px solid",borderBottomColor:"divider.neutral.primary.default",p:"spacing.xl"},t?i.createElement(ke.OJ,{value:{page:"playlist_customization"}},i.createElement(sl,{title:a})):i.createElement(Ea.D,{color:"text.neutral.primary.default",variant:"heading.m"},a),i.createElement(U.A.Close,{position:"static",width:"auto",height:"auto",onClick:()=>{e?l({action:"playlist_creation_cancelled"}):n({action:"playlist_edition_cancelled"})}}))};var dl,ml=a("arV3");const pl=()=>dl||(dl=i.createElement($.s,{direction:"column",gap:"spacing.s"},i.createElement(ml.E,{height:"size.xs",width:"50px"}),i.createElement(ml.E,{height:"size.m",width:"100%"})));var ul;const gl=()=>ul||(ul=i.createElement($.s,{direction:"column",gap:"spacing.s"},i.createElement(ml.E,{height:"size.xs",width:"70px"}),i.createElement(ml.E,{height:"92px"})));var vl;const El=()=>vl||(vl=i.createElement($.s,{direction:"row",width:"100%",justify:"space-between"},i.createElement(ml.E,{width:"size.m",height:"size.m",mr:"spacing.l",borderRadius:"full"}),i.createElement($.s,{direction:"row",align:"center",flex:1},i.createElement($.s,{direction:"column",flex:1},i.createElement(ml.E,{height:"size.s",width:"70px",mb:"spacing.m"}),i.createElement(ml.E,{height:"size.xs",width:"140px"})),i.createElement(ml.E,{width:"size.l",height:"size.s"}))));var fl;const bl=()=>fl||(fl=i.createElement($.s,{direction:"column"},i.createElement($.s,{direction:"row",mb:"spacing.l"},i.createElement(ml.E,{w:"200px",h:"200px",mr:"20px"}),i.createElement($.s,{direction:"column",flex:1,gap:"spacing.l"},i.createElement(pl,null),i.createElement(El,null),i.createElement(El,null))),i.createElement(gl,null),i.createElement(ml.E,{w:"100px",h:"size.xl",mt:"spacing.l",alignSelf:"flex-end"})));var hl;const yl=({playlistId:e,sngId:t,type:a,onPlaylistCreation:l})=>{var n,p;const[u,g]=i.useState(!1),v=(0,o.wA)(),E=a===d.F.CREATION,f=r.A.isAllowed("employee_feature")&&E&&!u&&!(null!=t&&t.length),{data:b}=(0,c.EG)({variables:{playlistId:e},skip:E||!e});return i.createElement(m.a,{role:"dialog","aria-labelledby":"modal_title",bgColor:"background.neutral.primary.default"},i.createElement(ke.OJ,{value:{page:E?"playlist_creation":"playlist_edition"}},i.createElement(Y,{playlistId:e,isCreation:E},i.createElement(cl,{isCreation:E}),i.createElement(U.A.Body,{className:"wrapper",padding:0},f?i.createElement(x,{onShowCreation:()=>{g(!0),v((0,s.Yo)({size:"large"}))}}):E||b?r.A.isAllowed("feature_2025_playlist_cover")?n||(n=i.createElement(ol,{type:a,playlistId:e,trackIds:t,onPlaylistCreation:l,data:b})):p||(p=i.createElement(ge,{type:a,playlistId:e,trackIds:t,onPlaylistCreation:l,data:b})):hl||(hl=i.createElement(bl,null))))))}},X51p:(e,t,a)=>{a.d(t,{A:()=>x});var l=a("WKgy"),n=a("+9dH"),i=a("q1tI"),o=a("TRpf"),r=a("Zlrv"),s=a("TqF5"),c=a("Wp0Y");const d=({onClick:e,...t})=>{const a=(0,o.wA)();return i.createElement(r.s_,(0,n.A)({id:"modal-close",onClick:t=>{null==e||e(t),a((0,s.Oo)())},"aria-label":(0,c.AP)("Fermer")},t))};d.displayName="Close";const m=d;var p,u=a("9yOc"),g=a("jiu+"),v=a("LSdk"),E=a("PBDT"),f=a("juqV"),b=a("CV49");var y=a("nHPd");var _=a("tZCQ");class A extends i.Component{render(){if(_.A.isAllowed("revamp2023"))return i.createElement(r.jl,null,this.props.children);const e=(0,f.A)("modal-footer",this.props.className);return i.createElement("div",{className:e},this.props.children)}}const C=A;l.A.addReducers({modal:s.Ay});const x={Close:m,Layout:function({children:e}){return u.A.is("mobile")||u.A.is("tablet")?i.createElement(r.aF,{isOpen:!0,size:"full"},i.createElement("div",{className:"modal-container"},i.createElement("div",{className:"modal-dialog modal-small"},p||(p=i.createElement("div",{className:"modal-header-partner"},i.createElement("span",{className:"cell"},i.createElement(g.QQ,null,i.createElement(v.T,null))))),e))):i.createElement(r.aF,{isOpen:!0,size:"full"},i.createElement(E.o,{flexDirection:"column",mt:"spacing.3xl"},e))},Body:e=>i.createElement(b.c,(0,n.A)({"data-testid":"modal_body",className:(0,f.A)("modal-body",e.className)},e),e.children),Header:({children:e,...t})=>i.createElement(y.r,(0,n.A)({"data-testid":"modal_header"},t),e),Footer:C}},bLDf:(e,t,a)=>{function l(e){return"--"!==e.substring(0,2)&&(e=`--${e}`),window.getComputedStyle(document.documentElement).getPropertyValue(e)}a.d(t,{A:()=>l})},dTBB:(e,t,a)=>{a.d(t,{H:()=>n});var l=a("pgpk");const n=e=>Boolean(e.DATA&&e.DATA.__TYPE__&&e.DATA.__TYPE__===l.r.ALBUM)},kPsn:(e,t,a)=>{a.d(t,{SE:()=>s,jg:()=>u,kk:()=>p});var l=a("hz5U"),n=a("dTBB"),i=a("tCiE"),o=a("CyAC");const r="d41d8cd98f00b204e9800998ecf8427e";let s=function(e){return e[e.SMALL=100]="SMALL",e[e.MEDIUM=264]="MEDIUM",e[e.LARGE=500]="LARGE",e}({});const c=e=>!!(0,n.H)(e)&&(0,o.cV)(e),d=e=>(0,i.B)(e)&&e.DATA&&e.DATA.DATA&&e.DATA.DATA.COPYRIGHT_PICTURE||"",m=(e,t,a=e,n="000000",i=80)=>{if(!t)return[""];const o=l.A.getImageMd5(t.__TYPE__,t),r=l.A.getCoverType(t.__TYPE__,t);return[l.A.getImageSrc(r,o,e,a,n,i)]},p=(e,t)=>t?{copyright:d(t),isExplicit:c(t),urls:{small:m(s.SMALL,t),medium:m(s.MEDIUM,t),large:m(s.LARGE,t)}}:(e=>({copyright:null,isExplicit:!1,urls:{small:[l.A.getImageSrc(l.A.getCoverType(e),r,s.SMALL,s.SMALL)],medium:[l.A.getImageSrc(l.A.getCoverType(e),r,s.MEDIUM,s.MEDIUM)],large:[l.A.getImageSrc(l.A.getCoverType(e),r,s.LARGE,s.LARGE)]}}))(e),u=(e,t,a)=>t?{copyright:t.copyright||d(a),isExplicit:void 0!==t.explicitStatus&&null!==t.explicitStatus?t.explicitStatus:c(a),urls:{small:t.small,medium:t.medium,large:t.large}}:p(e,a)},pgpk:(e,t,a)=>{a.d(t,{r:()=>l});let l=function(e){return e.ARTIST="artist",e.ALBUM="album",e.TRACK="song",e}({})},tCiE:(e,t,a)=>{a.d(t,{B:()=>n});var l=a("pgpk");const n=e=>Boolean(e&&e.__TYPE__&&e.__TYPE__===l.r.ARTIST)}}]);