"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[7696],{lj5y:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Q}),l("WpbS"),l("W8Tb");var i=l("q1tI"),a=l("TRpf"),n=l("GkjM"),o=l("PG/5"),r=l("Ty5D"),s=l("CdHq"),d=l("pVdW"),c=l("3gOz"),u=l("RTUF"),m=l("A2sV"),p=l("fkXJ"),v=l("Wp0Y"),f=l("34sk"),E=l("yJX9");const y=({id:e,icon:t,iconOnly:l,to:o,onClick:y,title:g,subtitle:b,isDroppable:A,isFavorite:k})=>{const _=(0,a.wA)(),[T,h]=i.useState(!1),x=(0,r.W5)(o||""),{isDragging:w}=(0,u.i)(),[$]=(0,m.$IV)({onCompleted:e=>{if("PlaylistAddTracksOutput"===e.addTracksToPlaylist.__typename){const t=[...e.addTracksToPlaylist.addedTrackIds,...e.addTracksToPlaylist.duplicatedTrackIds],l=t.length;k&&t.forEach((e=>{_((0,f.TD)(E.Z.favorites,{id:e,timestamp:Date.now()},"song"))})),(0,p.A)({body:(0,v.AP)("toastmessage_title_addedtoplaylisttrack_web",{sprintf:[l],count:l})})}}}),D=!(!o||!x)&&x.isExact,z=!A&&w||!e;return i.createElement(s.s,{className:z?"playlist-item-disabled":"playlist-item",padding:"spacing.s",marginX:"spacing.s",gap:"spacing.s",as:n.A,to:o,onClick:y,pointerEvents:"auto",transitionDuration:"200ms",sx:w?{"& *":{pointerEvents:"none"}}:void 0,_hover:{backgroundColor:"background.neutral.tertiary.default"},_active:{backgroundColor:"background.neutral.tertiary.pressed"},backgroundColor:D?"background.neutral.tertiary.default":void 0,boxShadow:T&&!z?"0 0 0 2px var(--tempo-colors-border-accent-primary-default) inset":"none",borderRadius:"s",onDragEnter:()=>{z||h(!0)},onDragLeave:()=>{z||h(!1)},onDrop:t=>{if(z)return;const l=JSON.parse(t.dataTransfer.getData("selectedItemIds"));e&&$({variables:{input:{playlistId:e,trackIds:l}}}),h(!1)}},i.createElement(s.s,{minWidth:"size.xl",width:"size.xl",height:"size.xl",backgroundColor:"background.neutral.tertiary.default",alignItems:"center",justifyContent:"center",opacity:z?.3:1},t),!l&&i.createElement(s.s,{flex:"1",flexDirection:"column",justifyContent:"center",minWidth:"0px"},i.createElement(c.A,null,i.createElement(d.E,{noOfLines:1,color:z?"text.neutral.secondary.disabled":D?"text.accent.primary.default":"text.neutral.primary.default",variant:"body.l.default"},g)),b&&i.createElement(c.A,null,i.createElement(d.E,{color:z?"text.neutral.secondary.disabled":"text.neutral.secondary.default",variant:"body.s.default",noOfLines:1},b))))};var g,b,A=l("arV3"),k=l("OxTW");const _=({iconOnly:e})=>i.createElement(s.s,{paddingY:"spacing.s",paddingX:"spacing.l",gap:"spacing.s"},g||(g=i.createElement(s.s,{borderRadius:"2xs",overflow:"hidden",minWidth:"size.xl",height:"size.xl",alignItems:"center",justifyContent:"center"},i.createElement(A.E,{w:"100%",h:"100%"}))),!e&&(b||(b=i.createElement(s.s,{flex:"1",flexDirection:"column",alignSelf:"center"},i.createElement(k.rr,{noOfLines:2,spacing:"spacing.m"})))));var T=l("9OcB"),h=l("4y/7"),x=l("HmE0"),w=l("zMnD"),$=l("NBYJ"),D=l("TiiB"),z=l("5EMo"),O=l("gtRZ"),P=l("//u0"),C=l("lASK"),I=l("nKUr");const S=(0,l("AGAM").w)({displayName:"DownloadFilledIcon",viewBox:"0 0 24 24",pathSmall:[(0,I.jsx)("path",{fillRule:"evenodd",d:"M4 12c0-5.138 2.862-8 8-8 5.137 0 8 2.862 8 8 0 5.137-2.863 8-8 8-5.138 0-8-2.863-8-8Zm11.543.984.007-.008c.073-.088.158-.187.285-.333l-1.003-.878c-.133.153-.22.257-.298.348l-.006.008c-.115.135-.207.243-.408.462a40.675 40.675 0 0 1-1.45 1.505V8h-1.33v6.088c-.494-.486-.91-.92-1.45-1.505-.206-.224-.297-.332-.415-.471l-.297-.347-1.003.878.284.331c.129.152.228.269.453.513a41.94 41.94 0 0 0 2.055 2.097 1.497 1.497 0 0 0 2.076 0 42.29 42.29 0 0 0 2.056-2.097c.22-.239.319-.356.444-.503Z",clipRule:"evenodd"})],pathMedium:[(0,I.jsx)("path",{fillRule:"evenodd",d:"M1 12C1 4.936 4.936 1 12 1s11 3.936 11 11-3.936 11-11 11S1 19.064 1 12Zm15.645 2.227c.332-.36.481-.537.67-.76l.007-.008c.111-.13.238-.28.429-.498l-1.506-1.317c-.2.23-.332.385-.448.521l-.013.016c-.17.2-.309.363-.61.69a60.991 60.991 0 0 1-2.176 2.257V6h-2v9.128c-.74-.73-1.367-1.38-2.176-2.257-.31-.336-.447-.498-.625-.707a39.99 39.99 0 0 0-.446-.52l-1.506 1.317.427.496c.193.228.343.404.68.77a62.965 62.965 0 0 0 3.087 3.145 2.25 2.25 0 0 0 3.118 0 63.425 63.425 0 0 0 3.088-3.145Z",clipRule:"evenodd"})]});S.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"DownloadFilledIcon"};var F,R,L,M,N,G,W,j,V,Y,B=l("6vqc"),J=l("7Gye"),X=l("5G9X"),Z=l("TqF5"),q=l("xobL"),K=l("aoCz"),U=l("vF4p"),H=l("fEzs");const Q=()=>{var e;const t=(0,a.wA)(),l=(0,a.d4)((e=>null==e?void 0:e.user.id.toString())),r=(0,a.d4)((e=>null==e?void 0:e.user.SETTING_LANG)),d=(0,a.d4)((e=>null==e?void 0:e.user.DIRECTION)),c=(0,a.d4)((e=>null==e?void 0:e.feedbacks.favorites.playlist.order.length)),u=(0,a.d4)((e=>{const t=Object.values((null==e?void 0:e.entities.PLAYLISTS)||[]).filter((e=>e.PARENT_USER_ID===l&&"4"!==e.TYPE));return t.reduce(((e,t)=>e+t.NB_SONG),0)+t.length})),p=(0,a.d4)((e=>(0,q.Jt)(null==e?void 0:e.user))),{data:f,loading:E,refetch:g}=(0,m.XBt)({variables:{first:50}}),b=()=>{t((0,Z.qf)({name:"PLAYLIST_ASSISTANT",props:{type:K.F.CREATION}}))},A=(0,i.useMemo)((()=>{var e,t;return[...(null==f||null===(e=f.me)||void 0===e||null===(e=e.userFavorites.playlists)||void 0===e?void 0:e.edges)||[],...(null==f||null===(t=f.me)||void 0===t?void 0:t.playlists.edges)||[]].filter((({node:e})=>!!e)).filter((({node:e})=>{var t;return!(null!=e&&e.isFromFavoriteTracks&&(null==e||null===(t=e.owner)||void 0===t?void 0:t.id)===l)})).sort(((e,t)=>{var l,i;return("favoritedAt"in e?e.favoritedAt:null===(l=e.node)||void 0===l?void 0:l.lastModificationDate)>("favoritedAt"in t?t.favoritedAt:null===(i=t.node)||void 0===i?void 0:i.lastModificationDate)?-1:1}))}),[f,l]),k=(0,i.useMemo)((()=>{var e;return null==f||null===(e=f.me)||void 0===e?void 0:e.playlists.edges.filter((({node:e})=>!!e)).find((({node:e})=>null==e?void 0:e.isFromFavoriteTracks))}),[f]),I=null==A?void 0:A.length;(0,i.useEffect)((()=>{g()}),[c,u,l,g]);const Q=(0,H.h)(),ee=`/${r}/`;return i.createElement(h.oe,null,i.createElement(h.Gh,{isCollapsed:Q,logoLink:ee,userLangDirection:d},i.createElement(o.A,{icon:F||(F=i.createElement(w.a,{size:"medium"})),iconActive:R||(R=i.createElement($.Y,{size:"medium"})),to:ee,iconOnly:Q},(0,v.AP)("menutab_title_home_web")),i.createElement(o.A,{icon:L||(L=i.createElement(D.w,{size:"medium"})),iconActive:M||(M=i.createElement(z.O,{size:"medium"})),to:`/${r}/channels/explore/explore-tab`,iconOnly:Q},(0,v.AP)("menutab_title_explore_web")),i.createElement(o.A,{icon:N||(N=i.createElement(O.M,{size:"medium"})),iconActive:G||(G=i.createElement(P.C,{size:"medium"})),to:`/${r}/profile/${l}`,iconOnly:Q},(0,v.AP)("menu_title_favorites_web")),p&&i.createElement(o.A,{icon:W||(W=i.createElement(C.m,{size:"medium"})),iconActive:j||(j=i.createElement(S,{size:"medium"})),to:`/${r}/profile/${l}/${U.E6.downloads}`,iconOnly:Q},(0,v.AP)("desktopapp_title_downloads_web"))),i.createElement(h.Yv,null,i.createElement(h.T_,{link:`/${r}/profile/${l}/${U.E6.playlists}`,isCollapsed:Q,onPlusClick:A.length>0?b:void 0}),i.createElement(h.oE,null,i.createElement(y,{isFavorite:!0,id:null==k||null===(e=k.node)||void 0===e?void 0:e.id,isDroppable:!0,to:`/${r}/profile/${l}/loved`,iconOnly:Q,icon:i.createElement(T.A,{variant:"favTracks",alt:(0,v.AP)("favoritessidebar_title_favoritetracks_web")}),title:(0,v.AP)("favoritessidebar_title_favoritetracks_web")}),E?Array.from(Array(5)).map(((e,t)=>i.createElement(_,{iconOnly:Q,key:t}))):I?i.createElement(i.Fragment,null,A.slice(0,50).map((({node:e,__typename:t})=>{var a,n,o;return e&&i.createElement(y,{key:`${t}_${e.id}`,id:e.id,icon:i.createElement(T.A,{type:X.Ay.Playlist,src:null===(a=e.picture)||void 0===a?void 0:a.small[0],alt:e.title}),iconOnly:Q,title:e.title,subtitle:`${(0,v.AP)("par")} ${(null===(n=e.owner)||void 0===n?void 0:n.name)||"Anonymous"}`,to:`/${r}/playlist/${e.id}`,isDroppable:(null===(o=e.owner)||void 0===o?void 0:o.id)===l||e.isCollaborative})})),A.length>50&&i.createElement(s.s,{alignItems:"center",flexDirection:"column",marginBottom:"spacing.l",marginTop:"spacing.s",paddingX:"spacing.l"},Q?i.createElement(x.K0,{"aria-label":(0,v.AP)("Voir tout"),as:n.A,icon:V||(V=i.createElement(B.v,null)),mx:"auto",size:"small",to:`/${r}/profile/${l}/${U.E6.playlists}`,variant:"outline"}):i.createElement(x.$n,{as:n.A,size:"small",to:`/${r}/profile/${l}/${U.E6.playlists}`,variant:"outline",width:"100%"},(0,v.AP)("Voir tout")))):i.createElement(y,{onClick:b,icon:Y||(Y=i.createElement(J.c,{size:"medium"})),iconOnly:Q,title:(0,v.AP)("playlistspage_title_createaplaylist_web")}))))}}}]);