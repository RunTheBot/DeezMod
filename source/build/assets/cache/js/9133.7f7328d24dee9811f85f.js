"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[9133],{V26n:(e,t,i)=>{i.d(t,{e:()=>n});var s=i("LZ+A");const n=e=>new s._$(e)},"f/uw":(e,t,i)=>{i.d(t,{q:()=>s});class s{constructor(e){this.api=void 0,this.api=e}}},ALjf:(e,t,i)=>{i.r(t),i.d(t,{AppleAuth:()=>I});var s=i("+9dH"),n=i("Nlia"),r=i("/0+J"),o=i("MVPB"),a=i("4OMY"),c=i("/YxT"),d=(0,a.A)("sdkLoadingPromise"),p=(0,a.A)("addAppleSDK");class l{get hasInit(){var e;return void 0!==(null==(e=window.AppleID)?void 0:e.auth)}constructor(e){Object.defineProperty(this,d,{writable:!0,value:null}),this.config=void 0,Object.defineProperty(this,p,{writable:!0,value:(e="apple-jssdk")=>(0,o.A)(this,d)[d]?(0,o.A)(this,d)[d]:document.getElementById(e)?Promise.resolve():((0,o.A)(this,d)[d]=new Promise((t=>{const i=document.createElement("script");i.id=e,i.src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",document.head.appendChild(i),i.onload=()=>{t()}})),(0,o.A)(this,d)[d])}),this.signin=e=>AppleID.auth.signIn((0,s.A)({},this.config,e)),this.config={scope:"name email",clientId:"com.deezer.Deezer.client",state:"apple jssdk init state",domain:"",redirectURI:"https://www.deezer.com/applesignin"},e&&this.setConfig(e)}setConfig(e){e.redirectURI||(e.redirectURI=`${location.origin}/applesignin`),this.config=(0,c.z)(this.config,e," ")}init({addScript:e=!0}){var t=this;return(0,r.A)((function*(){e&&(yield(0,o.A)(t,p)[p]()),AppleID.auth.init((0,s.A)({},t.config,{usePopup:!0}))}))()}}var u=i("LZ+A"),h=i("V26n"),A=i("f/uw");let f=function(e){return e.AUTH="apple.auth",e}({});class g extends A.q{constructor(e){var t;super(e),t=this,this.connect=function(){var e=(0,r.A)((function*(e){try{return yield t.api.call({method:f.AUTH,data:e})}catch(e){throw(0,h.e)(e)}}));return function(t){return e.apply(this,arguments)}}()}}const v=["grant_type","code"];var m=(0,a.A)("sdk"),w=(0,a.A)("api"),y=(0,a.A)("tokenCache"),b=(0,a.A)("getToken");class I{constructor(e,t){Object.defineProperty(this,b,{value:P}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),this.setConfig=e=>{(0,o.A)(this,m)[m].setConfig(e)},(0,o.A)(this,w)[w]=new g(e),(0,o.A)(this,m)[m]=new l(t)}assertSDKIsInitialized(e){if(!e.hasInit)throw new u.Pw("apple")}buildBlogname(e,t){if(e&&t)return`${e} ${t}`}init({host:e,addScript:t=!0}){return(0,o.A)(this,m)[m].init({addScript:t,host:e})}signin(e={}){var t=this;return(0,r.A)((function*(){let{grant_type:i="authorization_code",code:r}=e,a=(0,n.A)(e,v);t.assertSDKIsInitialized((0,o.A)(t,m)[m]);const c=yield(0,o.A)(t,b)[b]();return(0,o.A)(t,w)[w].connect((0,s.A)({},c,a,{code:null!=r?r:c.code,grant_type:i,domain:(0,o.A)(t,m)[m].config.domain}))}))()}}function P(){return _.apply(this,arguments)}function _(){return(_=(0,r.A)((function*(){return(0,o.A)(this,y)[y]?(0,o.A)(this,y)[y]:(0,o.A)(this,m)[m].signin().then((e=>{var t,i;return(0,o.A)(this,y)[y]={identity_token:e.authorization.id_token,code:e.authorization.code,blog_name:this.buildBlogname(null==(t=e.user)?void 0:t.name.firstName,null==(i=e.user)?void 0:i.name.lastName)},(0,o.A)(this,y)[y]}))}))).apply(this,arguments)}},"LZ+A":(e,t,i)=>{i.d(t,{Pw:()=>n,_$:()=>r,fH:()=>o,lR:()=>s});class s extends Error{}class n extends s{constructor(e){super(`You must init ${e} sdk before using it`)}}class r extends s{constructor(e){super(e.message),this.payload=void 0,this.response=void 0,this.name=e.name,this.response=e.response,this.payload=e.payload}}class o extends Error{constructor(...e){super(...e),this.message="popup_closed_by_user"}}},"/YxT":(e,t,i)=>{i.d(t,{z:()=>o});var s=i("+9dH"),n=i("Nlia");const r=["scopes"],o=(e,t,i=" ")=>{const{scopes:o}=t,a=(0,n.A)(t,r),c=o?((e,t=" ")=>"string"==typeof e?e:e.join(t))(o,i):e.scope;return(0,s.A)({},e,a,{scope:c})}}}]);