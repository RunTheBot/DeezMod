"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[1232],{"1EyH":(e,r,t)=>{t.d(r,{BB:()=>a,Sx:()=>n,UC:()=>s});const n=e=>/[\u2000-\u2BFF]/.test(e),a=e=>/[\u{10000}-\u{10FFFF}]/u.test(e),s=e=>!!e.match(/^[_0-9a-z-+]+[_.0-9a-z-+]*@([0-9a-z-]+\.)+[a-z]{2,13}$/i)},"5U+Y":(e,r,t)=>{t.d(r,{D3:()=>l,D6:()=>s,K9:()=>a,d0:()=>o,fB:()=>i,wz:()=>n});const n=8,a=50,s=2,o=50,i=16,l=150},EYlq:(e,r,t)=>{t.d(r,{u:()=>a});var n=t("Wp0Y");const a=e=>{switch(e){case"invalid_msisdn":return(0,n.AP)("errormessage_text_invalidphonenumber_web");case"sms_login_limit":return(0,n.AP)("SMScoderesentconfirmationscreen_text_allattemptsused_web");case"internal_error":case"swap_limit":default:return(0,n.AP)("errormessage_text_anerroroccurredpleasetryagain_web");case"invalid_code":case"invalid_code_wrong":return(0,n.AP)("errormessage_text_invalidcode_web");case"code_too_short":return(0,n.AP)("errormessage_text_codeincomplete_web");case"code_too_long":return(0,n.AP)("errormessage_text_codetoomanydigits_web");case"phone_already_used":return(0,n.AP)("Ce numéro est déjà utilisé.")}}},Fzox:(e,r,t)=>{t.d(r,{G:()=>s,j:()=>a});var n=t("TRpf");const a=()=>(0,n.wA)(),s=n.d4},H9G8:(e,r,t)=>{t.d(r,{CZ:()=>_,Ee:()=>m,Hf:()=>i,In:()=>f,RQ:()=>u,SY:()=>l,U9:()=>d,aS:()=>O,jQ:()=>o,qb:()=>c,r_:()=>p,vM:()=>A});var n=t("Wp0Y"),a=t("5U+Y"),s=t("guCc");class o extends Error{constructor(e){super(e),this.name=s.U.FORM_ERROR}}class i extends o{constructor(){super((0,n.AP)("formerrormessage_text_emailaddressformatnotvalid_web")),this.name=s.U.EMAIL_NOT_VALID}}class l extends o{constructor(e){super((0,n.AP)("errormessage_text_domainnnamenotallowed_web",{sprintf:[e]})),this.name=s.U.EMAIL_DOMAIN_NOT_VALID}}class c extends o{constructor(){super((0,n.AP)("errormessage_title_accountalrdyassociatedwithemail_web")),this.name=s.U.EMAIL_ALREADY_USED}}class _ extends o{constructor(){super((0,n.WI)("formerrormessage_text_passwordnotenoughchars_web","formerrormessage_text_passwordnotenoughchars_web",{sprintf:[a.wz],count:a.wz})),this.name=s.U.PASSWORD_TOO_SHORT}}class m extends o{constructor(){super((0,n.WI)("formerrormessage_text_passwordtoomanychars_web","formerrormessage_text_passwordtoomanychars_web",{sprintf:[a.K9],count:a.K9})),this.name=s.U.PASSWORD_TOO_LONG}}class u extends o{constructor(){super((0,n.AP)("errormessage_text_passwordnbeginendwithspace_web")),this.name=s.U.PASSWORD_HAS_TRAILLING_WHITESPACE}}class d extends o{constructor(){super((0,n.WI)("formerrormessage_text_usernamenotenoughchars_web","formerrormessage_text_usernamenotenoughchars_web",{sprintf:[a.D6],count:a.D6})),this.name=s.U.BLOGNAME_TOO_SHORT}}class O extends o{constructor(){super((0,n.WI)("formerrormessage_text_usernametoomanychars_web","formerrormessage_text_usernametoomanychars_web",{sprintf:[a.d0],count:a.d0})),this.name=s.U.BLOGNAME_TOO_LONG}}class f extends o{constructor(){super((0,n.AP)("errormessage_text_usernamecannotcontainsemojis_web")),this.name=s.U.BLOGNAME_HAS_SPECIAL_CHARS}}class p extends o{constructor(e){super((0,n.WI)("agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web","agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web",{sprintf:[e],count:e})),this.name=s.U.MIN_LEGAL_AGE}}class A extends o{constructor(){super((0,n.AP)("errormessage_text_ageisinvalid_web")),this.name=s.U.AGE_INVALID}}},JPzp:(e,r,t)=>{t.d(r,{d:()=>a}),t("/eM8");var n=t("nrKQ");const a=e=>new Promise(((r,t)=>{n.A.call({method:"userAuth.loginByArl",data:{ARL:e},success:r,error:t})}))},X5lq:(e,r,t)=>{t.d(r,{u:()=>a});var n=t("nKUr");const a=(0,t("btyE").w)({displayName:"InformationIcon",viewBox:"0 0 24 24",pathSmall:[(0,n.jsx)("path",{d:"M13 9c0-.335-.073-.575-.218-.735C12.616 8.08 12.354 8 12 8c-.357 0-.617.084-.782.268-.146.163-.218.403-.218.732 0 .36.082.61.248.77.166.16.416.23.752.23.368 0 .634-.106.799-.31.134-.166.201-.397.201-.69Zm-1.66 7h1.33v-4.67h-1.33V16Z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 20c5.137 0 8-2.863 8-8 0-5.137-2.863-8-8-8-5.137 0-8 2.863-8 8 0 5.137 2.863 8 8 8Zm0-14.667c4.424 0 6.667 2.243 6.667 6.667 0 4.424-2.243 6.667-6.667 6.667-4.424 0-6.667-2.243-6.667-6.667 0-4.424 2.243-6.667 6.667-6.667Z",clipRule:"evenodd"})],pathMedium:[(0,n.jsx)("path",{d:"M13.5 7.5c0-.503-.11-.862-.327-1.103C12.923 6.12 12.531 6 12 6c-.536 0-.925.126-1.173.403-.219.243-.327.604-.327 1.097 0 .54.123.914.372 1.154.249.24.624.346 1.128.346.552 0 .952-.159 1.199-.465.2-.249.301-.596.301-1.035ZM11 11v7h2v-7h-2Z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 23c7.064 0 11-3.936 11-11S19.064 1 12 1 1 4.936 1 12s3.936 11 11 11Zm0-20c5.972 0 9 3.028 9 9 0 5.972-3.028 9-9 9-5.972 0-9-3.028-9-9 0-5.972 3.028-9 9-9Z",clipRule:"evenodd"})]});a.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"InformationIcon"}},XkdG:(e,r,t)=>{t.d(r,{p:()=>d});var n=t("nKUr"),a=t("0Iu3"),s=t("JPA8"),o=t("bTBG"),i=t("oT4+"),l=t("XuBo"),c=t("4NIx");function _(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const d=(0,a.R)((function(e,r){const{htmlSize:t}=e,a=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,["htmlSize"]),d=(0,s.o)("Input",a),O=(0,o.M)(a),f=(0,i.t)(O),p=(0,l.cx)("chakra-input",e.className);return(0,n.jsx)(c.B.input,function(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){_(e,r,t[r])}))}return e}({size:t},f),{__css:d.field,ref:r,className:p}))}));d.displayName="Input",d.id="Input"},XuBo:(e,r,t)=>{t.d(r,{cx:()=>n});const n=(...e)=>e.filter(Boolean).join(" ")},"Z+z7":(e,r,t)=>{t.d(r,{E:()=>_});var n=t("nKUr"),a=t("bTBG"),s=t("262v"),o=t("Z/8J"),i=t("0Iu3"),l=t("JPA8"),c=t("4NIx");const _=(0,i.R)((function(e,r){const t=(0,l.V)("Text",e),{className:i,align:_,decoration:m,casing:u,...d}=(0,a.M)(e),O=(0,s.o)({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,n.jsx)(c.B.p,{ref:r,className:(0,o.cx)("chakra-text",e.className),...O,...d,__css:t})}));_.displayName="Text"},ZUSG:(e,r,t)=>{t.d(r,{r:()=>a});var n=t("nKUr");const a=(0,t("btyE").w)({displayName:"PenIcon",viewBox:"0 0 24 24",pathSmall:[(0,n.jsx)("path",{fillRule:"evenodd",d:"m12.833 4 5.55 9.617c.775 1.343.6 6.383.6 6.383s-4.593-2.583-5.24-3.704l-5.55-9.617L12.833 4Zm-.49 1.83-2.321 1.34 1.246 2.159 2.32-1.34-1.245-2.16Zm-.405 4.66 2.964 5.136c.245.354 1.405 1.177 2.745 2.02-.051-1.624-.211-2.99-.424-3.36L14.258 9.15l-2.32 1.34ZM6.5 19.963a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",clipRule:"evenodd"})],pathMedium:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M20.818 13.242 13.678.854l-6.928 4 7.14 12.388c.966 1.675 7.825 5.531 7.825 5.531s.26-7.526-.897-9.53ZM9.481 5.587l3.464-2 1.838 3.188-3.465 2-1.837-3.188Zm6.141 10.657-3.305-5.735 3.464-2 3.305 5.733c.318.551.556 2.59.633 5.015-2-1.257-3.732-2.487-4.097-3.013ZM11 19c-.67 0-1.15.146-1.47.436-.37.333-.53.856-.53 1.564 0 .714.168 1.234.537 1.564.325.292.805.436 1.463.436.719 0 1.219-.164 1.54-.496.32-.332.46-.832.46-1.504 0-.736-.211-1.269-.62-1.598-.332-.268-.795-.402-1.38-.402Zm-8.47.436c.32-.29.8-.436 1.47-.436.585 0 1.048.134 1.38.402.409.33.62.861.62 1.598 0 .672-.14 1.172-.46 1.504-.321.332-.821.496-1.54.496-.658 0-1.138-.144-1.463-.436C2.168 22.234 2 21.714 2 21c0-.708.16-1.231.53-1.564Z",clipRule:"evenodd"})]});a.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"PenIcon"}},"d84/":(e,r,t)=>{t.d(r,{s:()=>o});var n=t("nKUr"),a=t("0Iu3"),s=t("4NIx");const o=(0,a.R)((function(e,r){const{direction:t,align:a,justify:o,wrap:i,basis:l,grow:c,shrink:_,...m}=e,u={display:"flex",flexDirection:t,alignItems:a,justifyContent:o,flexWrap:i,flexBasis:l,flexGrow:c,flexShrink:_};return(0,n.jsx)(s.B.div,{ref:r,__css:u,...m})}));o.displayName="Flex"},guCc:(e,r,t)=>{t.d(r,{U:()=>n,m:()=>a});let n=function(e){return e.AGE_INVALID="FORM_ERROR_AGE_INVALID",e.BLOGNAME_HAS_SPECIAL_CHARS="FORM_ERROR_BLOGNAME_HAS_SPECIAL_CHARS",e.BLOGNAME_TOO_LONG="FORM_ERROR_BLOGNAME_TOO_LONG",e.BLOGNAME_TOO_SHORT="FORM_ERROR_BLOGNAME_TOO_SHORT",e.EMAIL_ALREADY_USED="FORM_ERROR_EMAIL_ALREADY_USED",e.EMAIL_DOMAIN_NOT_VALID="FORM_ERROR_EMAIL_DOMAIN_NOT_VALID",e.EMAIL_NOT_VALID="FORM_ERROR_EMAIL_NOT_VALID",e.FORM_ERROR="FORM_ERROR",e.MIN_LEGAL_AGE="FORM_ERROR_MIN_LEGAL_AGE",e.PASSWORD_HAS_TRAILLING_WHITESPACE="FORM_ERROR_PASSWORD_HAS_TRAILLING_WHITESPACE",e.PASSWORD_TOO_LONG="FORM_ERROR_PASSWORD_TOO_LONG",e.PASSWORD_TOO_SHORT="FORM_ERROR_PASSWORD_TOO_SHORT",e}({}),a=function(e){return e[e.TOO_WEAK=0]="TOO_WEAK",e[e.WEAK=1]="WEAK",e[e.MEDIUM=2]="MEDIUM",e[e.STRONG=3]="STRONG",e}({})},rxfZ:(e,r,t)=>{t.d(r,{a:()=>n});const n=(0,t("4NIx").B)("div");n.displayName="Box"},tjLx:(e,r,t)=>{t.r(r),t.d(r,{default:()=>T}),t("/eM8");var n,a,s=t("q1tI"),o=t("TRpf"),i=t("H9G8"),l=t("TqF5"),c=t("zerP"),_=t("Wp0Y"),m=t("nrKQ"),u=t("H/eQ"),d=t("JPzp"),O=t("L2Iu"),f=t("vUoE"),p=t("+Sva"),A=t("waeH"),E=t("7ZZW"),R=t("4tze"),g=t("go2a"),w=t("XkdG"),h=t("Swh8"),M=t("xgzm"),I=t("YIja"),x=t("HmE0"),b=t("IZLt"),y=t("Fzox"),S=t("xobL"),v=t("ZUSG");const P={email:"",emailConfirm:"",emailConfirmErrorMessage:"",emailErrorMessage:"",error:"",loading:!1},L=(0,_.AP)("errormessage_text_anerroroccurredpleasetryagain_web");function N(e,r){switch(r.type){case"UPDATE_EMAIL":return{...e,email:r.email};case"UPDATE_EMAIL_CONFIRM":return{...e,emailConfirm:r.emailConfirm};case"SUBMIT":return{...e,emailConfirmErrorMessage:"",emailErrorMessage:"",error:"",loading:!0};case"FORM_ERROR_ACTION":{const t={...e,loading:!1};return r.errorEmail&&(t.emailErrorMessage=r.errorEmail),r.errorEmailConfirm&&(t.emailConfirmErrorMessage=r.errorEmailConfirm),r.error&&(t.error=r.error),t}default:return e}}function T({children:e}){const r=(0,y.G)((({user:e})=>(0,S.qo)(e))),[t,T]=(0,s.useReducer)(N,{...P,email:r}),D=(0,o.wA)();return s.createElement("form",null,n||(n=s.createElement(O.s_,null)),s.createElement(f.c,null,s.createElement(p.T,{spacing:"spacing.m",alignItems:"flex-start"},s.createElement(A.D,{variant:"heading.l"},(0,_.AP)("Modification de votre email")),e,s.createElement(E.MJ,{isInvalid:Boolean(t.emailErrorMessage)},s.createElement(R.l,null,(0,_.AP)("formfield_title_modifyemailaddress_web")),s.createElement(g.M,null,s.createElement(w.p,{defaultValue:r,"data-testid":"new_email",value:t.email,type:"email",onChange:e=>T({type:"UPDATE_EMAIL",email:e.target.value})}),a||(a=s.createElement(h.t,null,s.createElement(v.r,{color:"icon.neutral.secondary.default"})))),s.createElement(M.Wt,null,t.emailErrorMessage)),s.createElement(E.MJ,{isInvalid:Boolean(t.emailConfirmErrorMessage)},s.createElement(R.l,null,(0,_.AP)("formfield_title_confirmemailaddress_web")),s.createElement(w.p,{"data-testid":"new_email_confirmation",value:t.emailConfirm,type:"email",onChange:e=>T({type:"UPDATE_EMAIL_CONFIRM",emailConfirm:e.target.value})}),s.createElement(M.Wt,null,t.emailConfirmErrorMessage)),t.error&&s.createElement(I.N,{status:"error"},t.error))),s.createElement(O.jl,null,s.createElement(x.$n,{type:"submit",onClick:async function(e){var r;if(e.preventDefault(),T({type:"SUBMIT"}),t.email===t.emailConfirm)try{await(0,c.A$)(t.email,!1);const e=await m.A.callAsync({method:"deezer.updateEmail",data:{email:t.email}});if(e)return await(0,d.d)(e.arl),u.A.trigger(u.A.user.updateEmail,{email:t.email}),void D((0,l.Oo)());T({type:"FORM_ERROR_ACTION",error:L})}catch(e){var n,a,s;if(e instanceof i.jQ)return T({type:"FORM_ERROR_ACTION",errorEmail:e.message});new b.A({error:null!==(n=null!==(a=null==e?void 0:e.message)&&void 0!==a?a:null==e||null===(s=e.response)||void 0===s?void 0:s.error[null==e?void 0:e.name])&&void 0!==n?n:null==e?void 0:e.name,journey_type:"update-email",gateway_method:"deezer.updateEmail",server_payload:null==e?void 0:e.response}).send(),T({type:"FORM_ERROR_ACTION",error:(r=e,r&&r.response&&r.response.error&&r.name&&"Session not secured"===r.response.error[r.name]?(0,_.AP)("errormessage_text_codetimedoutrequestnewcode_web"):L)})}else T({type:"FORM_ERROR_ACTION",errorEmail:"",errorEmailConfirm:(0,_.AP)("Vos adresses email ne correspondent pas. Veuillez réessayer.")})},isDisabled:t.loading,isLoading:t.loading,"data-testid":"new_email_save_button"},(0,_.AP)("invalidemailpopin_action_modifymyemail_web"))))}},waeH:(e,r,t)=>{t.d(r,{D:()=>c});var n=t("nKUr"),a=t("bTBG"),s=t("Z/8J"),o=t("0Iu3"),i=t("JPA8"),l=t("4NIx");const c=(0,o.R)((function(e,r){const t=(0,i.V)("Heading",e),{className:o,...c}=(0,a.M)(e);return(0,n.jsx)(l.B.h2,{ref:r,className:(0,s.cx)("chakra-heading",e.className),...c,__css:t})}));c.displayName="Heading"},zerP:(e,r,t)=>{t.d(r,{$O:()=>f,A$:()=>_,BE:()=>d,Hx:()=>p,PJ:()=>m,iE:()=>O,sR:()=>u}),t("WpbS"),t("/eM8");var n=t("nrKQ"),a=t("1EyH"),s=t("kSUS"),o=t("guCc"),i=t("H9G8"),l=t("5U+Y"),c=t("EYlq");const _=async(e,r=!1)=>{if(e=e.trim(),!(0,a.UC)(e))throw new i.Hf;const t=await n.A.callAsync({method:"deezer.emailCheck",data:{EMAIL:e}});if(!t.domain_validity)throw new i.SY(t.domain);if(t.availability)return r&&t.suggestion?{success:!0,suggestion:t.suggestion}:{success:!0};throw new i.qb},m=(0,s.A)(((e,r,t,n)=>_(e,r).then(t).catch(n)),400),u=e=>{const r=[/.*[A-Z]+.*/,/.*[a-z]+.*/,/.*[0-9]+.*/,/.*[^A-Za-z0-9]+.*/];if([/.*[0-9]+.*/,/.*[a-zA-Z]+.*/,/^.{8,}$/].reduce(((r,t)=>r&&t.test(e)),!0)){const t=r.reduce(((r,t)=>r+(t.test(e)?1:0)),0);return t>3?o.m.STRONG:t>2?o.m.MEDIUM:t>1?o.m.WEAK:o.m.TOO_WEAK}return o.m.TOO_WEAK},d=e=>{if(e!==e.trim())throw new i.RQ;if(e.length>l.K9)throw new i.Ee;if(e.length<l.wz)throw new i.CZ;return!0},O=e=>{if((e=e.trim()).length<l.D6)throw new i.U9;if(e.length>l.d0)throw new i.aS;if((0,a.Sx)(e)||(0,a.BB)(e))throw new i.In;return!0},f=e=>{if("string"==typeof e){if(!/^\d+$/.test(e.toString()))throw new i.vM;e=parseInt(e,10)}if(e<l.fB)throw new i.r_(l.fB);if(e>l.D3)throw new i.vM;return!0},p=e=>{if(0===e.length)throw new i.jQ((0,c.u)("invalid_code"));if(e.length<6)throw new i.jQ((0,c.u)("code_too_short"));if(e.length>6)throw new i.jQ((0,c.u)("code_too_long"));return!0}}}]);