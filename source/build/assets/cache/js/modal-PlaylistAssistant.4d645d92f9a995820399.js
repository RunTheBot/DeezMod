"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[8271],{"9MQu":(t,e,i)=>{i.d(e,{e:()=>b});var a=i("nKUr"),s=i("xi32"),l=i("XuBo"),r=i("q1tI"),n=i("zaHq"),o=i("M62g");const c={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},d={horizontal:t=>({"& > *:not(style) ~ *:not(style)":{marginStart:t}}),vertical:t=>({"& > *:not(style) ~ *:not(style)":{marginTop:t}})},p=(0,s.R)((function(t,e){const{size:i,colorScheme:s,variant:p,className:u,spacing:h="0.5rem",isAttached:m,isDisabled:y,orientation:b="horizontal",...g}=t,f=(0,l.cx)("chakra-button__group",u),E=(0,r.useMemo)((()=>({size:i,colorScheme:s,variant:p,isDisabled:y})),[i,s,p,y]);let v={display:"inline-flex",...m?c[b]:d[b](h)};const P="vertical"===b;return(0,a.jsx)(n.l,{value:E,children:(0,a.jsx)(o.B.div,{ref:e,role:"group",__css:v,className:f,"data-attached":m?"":void 0,"data-orientation":b,flexDir:P?"column":void 0,...g})})}));p.displayName="ButtonGroup";var u=i("gCxg"),h=i("AGAM");function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),a.forEach((function(e){m(t,e,i[e])}))}return t}const b=(0,s.R)(((t,e)=>{const{isAttached:i}=t;let s={};return i&&(s={display:"flex","> *:first-of-type:not(:last-of-type)":{borderEndRadius:0,_focus:(0,u.q)()},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0,_focus:(0,u.q)()},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0,_focus:(0,u.q)()}}),(0,a.jsx)(h.o.Provider,{value:t.size||"medium",children:(0,a.jsx)(p,y({ref:e,sx:s},t))})}))},FFEP:(t,e,i)=>{i.d(e,{X:()=>s});var a=i("nKUr");const s=(0,i("AGAM").w)({displayName:"LockIcon",viewBox:"0 0 24 24",pathSmall:[(0,a.jsx)("path",{d:"M13.5 14a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M17.683 8H15.5c0-2.569-1.252-4-3.5-4S8.5 5.431 8.5 8H6.315c-.412 0-.762.26-.832.62A29.453 29.453 0 0 0 5 13.68a29.99 29.99 0 0 0 .5 5.7c.07.36.42.62.831.62H17.7c.412 0 .762-.26.832-.62.631-2.94.622-7.87-.017-10.76-.07-.36-.42-.62-.832-.62ZM9.83 8c0-1.087.266-1.73.578-2.087.288-.33.763-.583 1.592-.583.83 0 1.304.253 1.592.583.312.356.578 1 .578 2.087H9.83Zm7.472 1.33H6.71a28.173 28.173 0 0 0-.378 4.362 29.07 29.07 0 0 0 .392 4.978h10.594c.477-2.649.47-6.736-.015-9.34Z",clipRule:"evenodd"})],pathMedium:[(0,a.jsx)("path",{d:"M10.53 13.436c.32-.29.8-.436 1.47-.436.585 0 1.048.134 1.38.402.409.33.62.862.62 1.598 0 .672-.14 1.172-.46 1.504-.321.332-.821.496-1.54.496-.658 0-1.138-.144-1.463-.436-.369-.33-.537-.85-.537-1.564 0-.708.16-1.231.53-1.564Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M3.878 7H7c0-3.853 1.789-6 5-6 3.21 0 5 2.147 5 6h3.119c.587 0 1.088.347 1.188.827.913 3.853.926 10.426.025 14.346-.1.48-.6.827-1.189.827H3.904c-.588 0-1.088-.347-1.188-.827-.426-2.066-.739-4.786-.714-7.6.025-2.573.313-4.84.689-6.746.1-.48.6-.827 1.188-.827ZM9 7c0-1.65.386-2.63.832-3.165C10.232 3.357 10.87 3 12 3c1.13 0 1.769.357 2.168.835C14.614 4.371 15 5.35 15 7H9Zm10.512 2c.642 3.38.653 8.563.02 12H4.527A35.994 35.994 0 0 1 4 14.592c.02-2.09.224-3.964.505-5.592h15.006Z",clipRule:"evenodd"})]});s.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"LockIcon"}},"/uRm":(t,e,i)=>{i.d(e,{F:()=>a});let a=function(t){return t.ONBOARDING="ON_BOARDING",t.ONBOARDING_LEGACY="ON_BOARDING_LEGACY",t.SELECT_PROFILE="SELECT_PROFILE",t.BRIDGED_WEBVIEW="BRIDGED_WEBVIEW",t.PLAYLIST_ASSISTANT="PLAYLIST_ASSISTANT",t}({})},yVTX:(t,e,i)=>{i.r(e),i.d(e,{default:()=>$});var a,s,l=i("q1tI"),r=i("TRpf"),n=i("Wp0Y"),o=i("tZCQ"),c=i("m9nS"),d=(i("aRRr"),i("juqV")),p=i("CdHq"),u=i("pVdW"),h=i("XkdG"),m=i("80JK"),y=i("8WIx"),b=i("oh0j"),g=i("p+cz"),f=i("9MQu"),E=i("HmE0"),v=i("iooo"),P=i("WmA5"),C=i("fkXJ"),S=i("5G9X"),x=i("+dDc"),A=i("eq2Y"),_=i("TqF5"),I=i("xobL"),N=i("0CJU"),T=i("aoCz"),R=i("vZvY"),D=i("FFEP"),k=i("K5vB");class O extends l.Component{constructor(t){super(t),this.onSubmit=this.onSubmit.bind(this),this.onSuccessUpdatePicture=this.onSuccessUpdatePicture.bind(this),this.onErrorUpdatePicture=this.onErrorUpdatePicture.bind(this),this.onDisplayUpdatePicture=this.onDisplayUpdatePicture.bind(this),this.onChangeTitle=this.onChangeTitle.bind(this),this.onTogglePrivate=this.onTogglePrivate.bind(this),this.onToggleCollab=this.onToggleCollab.bind(this),this.onChangeDescription=this.onChangeDescription.bind(this),this.onSubmitPicture=this.onSubmitPicture.bind(this),this.onError=this.onError.bind(this);const{STATUS:e,TYPE:i,TITLE:a,DESCRIPTION:s}=t.data;this.state={isPrivate:1===Number(e)||3===Number(e),isCollab:2===Number(e),isCharts:5===Number(i),title:a||"",description:s||"",playlistPictureData:"",titleError:!1,submited:!1,createdPlaylistId:"0"}}renderThumbnail(){const{playlistPictureData:t}=this.state,{data:e}=this.props;return l.createElement(k.AG,{value:{onSuccess:this.onSuccessUpdatePicture,onError:this.onErrorUpdatePicture,onDisplay:this.onDisplayUpdatePicture}},l.createElement(N.A,{type:S.Ay.Playlist,height:200,width:200,bordered:!0,uploadCover:"force",multiCover:!0,coverLink:!1,data:e,imgSrc:t}))}renderInfo(){const{titleError:t,title:e}=this.state;return l.createElement("div",{className:"playlist-assistant-info"},l.createElement(p.s,{flexDirection:"column",gap:"spacing.xs",marginBottom:"spacing.l"},l.createElement(u.E,{id:"playlist-assistant-name",role:"heading",variant:"body.s.default"},(0,n.AP)("createeditplaylistfield_title_name_web")),l.createElement(h.p,{placeholder:(0,n.AP)("Nom de la playlist"),maxLength:50,autoFocus:!0,onChange:this.onChangeTitle,value:e,"aria-labelledby":"playlist-assistant-name","aria-required":"true",size:"small",isInvalid:t})),this.renderCollabOption(),this.renderPrivateOption())}renderCollabOption(){const{isPrivate:t,isCollab:e}=this.state,i=(0,d.A)("playlist-assistant-option",{disabled:t});return l.createElement(m.MJ,{className:i,key:"collab",onChange:t=>this.onToggleCollab(t,e)},l.createElement(y.l,{htmlFor:"collab",display:"flex",flex:"1"},a||(a=l.createElement("div",{className:"playlist-assistant-option-icon"},l.createElement(R.O,{color:"icon.neutral.secondary.default"}))),l.createElement("div",{className:"playlist-assistant-option-text"},l.createElement("div",{className:"playlist-assistant-option-text-title"},(0,n.AP)("Collaborative")),l.createElement("div",{className:"playlist-assistant-option-text-subtitle"},(0,n.AP)("createeditplaylistsettings_title_inviteotherstoaddtracks_web")))),l.createElement(b.d,{id:"collab",isChecked:e,isDisabled:t}))}renderPrivateOption(){const{isPrivate:t,isCollab:e}=this.state,i=(0,d.A)("playlist-assistant-option",{disabled:e});return l.createElement(m.MJ,{className:i,key:"private",onChange:e=>this.onTogglePrivate(e,t)},l.createElement(y.l,{htmlFor:"private",display:"flex",flex:"1"},s||(s=l.createElement("div",{className:"playlist-assistant-option-icon"},l.createElement(D.X,{color:"icon.neutral.secondary.default"}))),l.createElement("div",{className:"playlist-assistant-option-text"},l.createElement("div",{className:"playlist-assistant-option-text-title"},(0,n.AP)("Privée")),l.createElement("div",{className:"playlist-assistant-option-text-subtitle"},(0,n.AP)("createeditplaylistsettings_title_onlyyoucanseethisplaylist_web")))),l.createElement(b.d,{id:"private",isChecked:t,isDisabled:e}))}renderDescription(){const{description:t}=this.state;return l.createElement(p.s,{flexDirection:"column",gap:"spacing.xs",marginBottom:"spacing.l"},l.createElement(u.E,{id:"playlist-assistant-description",variant:"body.s.default"},(0,n.AP)("createeditplaylistfield_title_description_web")),l.createElement(g.T,{maxLength:200,placeholder:(0,n.AP)("createeditplaylistfield_text_playlistdescription_web"),onChange:this.onChangeDescription,"aria-labelledby":"playlist-assistant-description","aria-required":"false",value:t,fontSize:"sm",height:"92px",resize:"none"}))}renderSubmitButton(){const t=this.props.type===T.F.EDITION?(0,n.AP)("Enregistrer"):(0,n.AP)("Créer");return l.createElement(f.e,{display:"flex",justifyContent:"flex-end"},l.createElement(E.$n,{isDisabled:this.state.submited,onClick:this.onSubmit},t))}onSuccessUpdatePicture(t){const{type:e,playlistId:i}=this.props;this.props.type===T.F.CREATION?P.A.push((0,v.jd)(`/playlist/${this.state.createdPlaylistId}`)):e===T.F.EDITION&&i&&this.props.dispatchUpdateThumbnail({id:i,picture:t,pictureType:S.Ay.Playlist}),this.props.dispatchCloseModal()}onErrorUpdatePicture(){this.props.dispatchCloseModal(),this.props.type===T.F.CREATION&&P.A.push((0,v.jd)(`/playlist/${this.state.createdPlaylistId}`)),(0,C.A)({body:(0,n.AP)("Une erreur est survenue, merci de réessayer plus tard.")})}onDisplayUpdatePicture(t,e){this.setState({playlistPictureData:t,uploadPicture:e})}onTogglePrivate(t,e){t.stopPropagation(),this.setState((t=>({isPrivate:!e,isCollab:!e&&t.isCollab})))}onToggleCollab(t,e){t.stopPropagation(),this.setState((t=>({isCollab:!e,isPrivate:!e&&t.isPrivate})))}onChangeTitle(t){this.setState({titleError:!1,title:t.target.value})}onChangeDescription(t){this.setState({description:t.target.value})}onSubmit(){const{description:t}=this.state,e=this.state.title.trim(),{type:i,playlistId:a,sngId:s=[],onPlaylistCreation:l}=this.props;if(""!==e){if(this.setState({submited:!0}),i===T.F.EDITION&&a)return this.editionMustBeSaved()?void this.props.dispatchUpdatePlaylist({data:{playlist_id:a,status:this.getStatusCode(),title:e,description:t}}).then((({id:t})=>this.onSubmitPicture(t))).catch(this.onError):void this.onSubmitPicture(a);this.props.dispatchCreatePlaylist({data:{title:e,description:t,songs:s,status:this.getStatusCode()}}).then((({id:t})=>{this.onSubmitPicture(t),null==l||l()})).catch(this.onError)}else this.setState({titleError:!0})}onSubmitPicture(t){const{type:e}=this.props,{playlistPictureData:i,uploadPicture:a}=this.state;if(i&&a)return this.setState({createdPlaylistId:t}),void a(t);e===T.F.CREATION?(P.A.push((0,v.jd)(`/playlist/${t}`)),(0,C.A)({body:(0,n.AP)("toastmessage_title_playlistcreated_web")})):e===T.F.EDITION&&(0,C.A)({body:(0,n.AP)("toastmessage_title_playlistupdated_web")}),this.props.dispatchCloseModal()}onError(){this.setState({submited:!1})}editionMustBeSaved(){const{TITLE:t,DESCRIPTION:e,STATUS:i}=this.props.data,{title:a,description:s}=this.state;return a!==t||s!==e||this.getStatusCode()!==Number(i)}getStatusCode(){const{isCollab:t,isPrivate:e}=this.state;let i=0;return t&&(i+=2),e&&(i+=1),i}render(){return l.createElement("div",{className:"playlist-assistant-container"},this.renderThumbnail(),this.renderInfo(),this.renderDescription(),this.renderSubmitButton())}}const w={dispatchCreatePlaylist:A.Nt,dispatchUpdatePlaylist:A.i5,dispatchUpdateThumbnail:A.C_,dispatchCloseModal:_.Oo},L=(0,r.Ng)((({entities:t,user:e},{playlistId:i})=>({data:i?(0,x.lS)(t,{id:i,currentUserId:(0,I.F6)(e)}):{}})),w)(O);var M=i("FVVF"),B=i("wZBD"),j=i("W1Rt"),F=i("nKUr");const U=(0,i("AGAM").w)({displayName:"WandIcon",viewBox:"0 0 24 24",pathSmall:[(0,F.jsx)("path",{fillRule:"evenodd",d:"M18.949 6.553 19.197 8l-1.3-.683-1.3.683.249-1.447-1.052-1.025 1.453-.211.65-1.317.65 1.317 1.453.21-1.051 1.026ZM4 17.172l9.294-9.295 2.829 2.829L6.828 20 4 17.172Zm1.886 0 .942.942 5.122-5.122-.942-.942-5.122 5.122Zm7.408-7.41-1.344 1.345.943.943 1.344-1.345-.943-.942Zm4.586 3.555L17.23 12l-.65 1.317-1.453.21 1.052 1.026L15.93 16l1.3-.683 1.3.683-.248-1.447 1.051-1.025-1.453-.211ZM9.897 7.983l-1.3.684.249-1.448-1.052-1.024 1.453-.212.65-1.316.65 1.316L12 6.195l-1.05 1.024.248 1.448-1.3-.684Z",clipRule:"evenodd"})],pathMedium:[(0,F.jsx)("path",{fillRule:"evenodd",d:"M20.846 4.975 18.896 6l.372-2.17-1.577-1.538 2.18-.317L20.846 0l.974 1.975 2.18.317-1.577 1.537L22.795 6l-1.95-1.025ZM1 18.757 14.942 4.816l4.242 4.242L5.243 23 1 18.757Zm2.828 0 1.415 1.415 7.683-7.683-1.415-1.415-7.683 7.683ZM14.942 7.644 12.925 9.66l1.415 1.415 2.016-2.017-1.414-1.414Zm6.878 5.331L20.846 11l-.975 1.975-2.18.317 1.577 1.537L18.896 17l1.95-1.025L22.796 17l-.373-2.17L24 13.291l-2.18-.317Zm-11.974-8L7.896 6l.372-2.17-1.577-1.538 2.18-.317L9.846 0l.974 1.975 2.18.317-1.577 1.537L11.795 6l-1.95-1.025Z",clipRule:"evenodd"})]});U.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"WandIcon"};var Z,z=i("nxAS"),G=i("/uRm"),H=i("Votb"),q=i("TDRX"),V=i("6vqc");const W=({title:t,description:e,icon:i,onClick:a})=>l.createElement(H.z,{onClick:()=>{a()},w:"full",gap:"spacing.m",py:"spacing.s",role:"group",_hover:{bg:"background.neutral.secondary.hovered"},cursor:"pointer"},l.createElement(q.a,{bg:"background.neutral.tertiary.default",_groupHover:{bg:"background.neutral.tertiary.hovered"},p:"spacing.s",borderRadius:"2xs"},i),l.createElement(q.a,{flex:"1"},l.createElement(u.E,{variant:"body.l.default"},t),l.createElement(u.E,{variant:"body.s.default",color:"text.neutral.secondary.default",as:"span"},e)),Z||(Z=l.createElement(V.v,null)));var J,X,Y,K;const $=({playlistId:t,sngId:e,type:i,onPlaylistCreation:a})=>{const[s,d]=l.useState(!1),p=(0,r.wA)(),u=i===T.F.CREATION,h=u?(0,n.AP)("generic_title_createplaylist_web"):(0,n.AP)("generic_title_editplaylist_web"),m=o.A.isAllowed("employee_feature")&&u&&!s&&!(null!=e&&e.length);return(0,l.useEffect)((()=>{p((0,_.Yo)(m?"small":"large"))}),[m]),l.createElement("div",{className:"modal-playlist-assistant",role:"dialog","aria-labelledby":"modal_title"},J||(J=l.createElement(c.A.Close,null)),l.createElement(c.A.Header,null,h),l.createElement(c.A.Body,{className:"wrapper"},m?l.createElement(M.T,{gap:"spacing.xs"},l.createElement(W,{title:"Playlist",description:"Add your favorite songs",icon:X||(X=l.createElement(j.G,{size:"medium"})),onClick:()=>{d(!0)}}),l.createElement(W,{title:Y||(Y=l.createElement(l.Fragment,null,"AI Playlist ",l.createElement(B.J,{variant:"accent"},"BETA"))),description:"Generate a playlist from an idea",icon:K||(K=l.createElement(U,{size:"medium"})),onClick:()=>{p((0,_.Oo)()),p((0,z.J2)({name:G.F.BRIDGED_WEBVIEW,data:{pathname:"/genplaylist",fixedLogo:!0}}))}})):l.createElement(L,{type:i,playlistId:t,sngId:e,onPlaylistCreation:a})))}},Votb:(t,e,i)=>{i.d(e,{z:()=>l});var a=i("nKUr"),s=i("eOc8");const l=(0,i("xi32").R)(((t,e)=>(0,a.jsx)(s.B,{align:"center",...t,direction:"row",ref:e})));l.displayName="HStack"},FVVF:(t,e,i)=>{i.d(e,{T:()=>l});var a=i("nKUr"),s=i("eOc8");const l=(0,i("xi32").R)(((t,e)=>(0,a.jsx)(s.B,{align:"center",...t,direction:"column",ref:e})));l.displayName="VStack"},oh0j:(t,e,i)=>{i.d(e,{d:()=>p});var a=i("nKUr"),s=i("qpfk"),l=i("XuBo"),r=i("q1tI"),n=i("3S9H"),o=i("xi32"),c=i("JFGw"),d=i("M62g");const p=(0,o.R)((function(t,e){const i=(0,c.o)("Switch",t),{spacing:o="0.5rem",children:p,...u}=(0,s.M)(t),{getIndicatorProps:h,getInputProps:m,getCheckboxProps:y,getRootProps:b,getLabelProps:g}=(0,n.v)(u),f=(0,r.useMemo)((()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...i.container})),[i.container]),E=(0,r.useMemo)((()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...i.track})),[i.track]),v=(0,r.useMemo)((()=>({userSelect:"none",marginStart:o,...i.label})),[o,i.label]);return(0,a.jsxs)(d.B.label,{...b(),className:(0,l.cx)("chakra-switch",t.className),__css:f,children:[(0,a.jsx)("input",{className:"chakra-switch__input",...m({},e)}),(0,a.jsx)(d.B.span,{...y(),className:"chakra-switch__track",__css:E,children:(0,a.jsx)(d.B.span,{__css:i.thumb,className:"chakra-switch__thumb",...h()})}),p&&(0,a.jsx)(d.B.span,{className:"chakra-switch__label",...g(),__css:v,children:p})]})}));p.displayName="Switch"}}]);