(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[4569],{"45CL":function(e){e.exports=function(){"use strict";function e(){return void 0!==navigator.brave&&void 0!==navigator.brave.isBrave}function t(){return"string"==typeof navigator.userAgent&&navigator.userAgent.match(/Opera|OPR\//)}function s(){return new Promise((function(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&e(s)},s.open("GET","https://raw.githubusercontent.com/wmcmurray/just-detect-adblock/master/baits/pagead2.googlesyndication.com",!0),s.send()}))}function n(e){return 200===e.status&&!e.responseText.match(/^thistextshouldbethere(\n|)$/)}function a(e){return 0===e.status&&!e.responseText.match(/^thistextshouldbethere(\n|)$/)}function r(){if(null!==window.document.body.getAttribute("abp"))return!0;var e=function(){var e=document.createElement("div");return e.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adContent adBanner"),e.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"),e}();window.document.body.appendChild(e);var t=function(e){if(null===e.offsetParent||0==e.offsetHeight||0==e.offsetLeft||0==e.offsetTop||0==e.offsetWidth||0==e.clientHeight||0==e.clientWidth)return!0;if(void 0!==window.getComputedStyle){var t=window.getComputedStyle(e,null);if(t&&("none"==t.getPropertyValue("display")||"hidden"==t.getPropertyValue("visibility")))return!0}return!1}(e);return window.document.body.removeChild(e),t}var i;return{detectAnyAdblocker:function(){return new Promise((function(i,o){if(r())return i(!0);e()||t()?s().then((function(s){return e()?i(n(s)):t()?i(a(s)):void i(!1)})):i(!1)}))},detectDomAdblocker:(i=r,function(){var e=arguments;return new Promise((function(t,s){t(i.apply(this,e))}))}),detectBraveShields:function(){return new Promise((function(t,a){e()?s().then((function(e){t(n(e))})):t(!1)}))},detectOperaAdblocker:function(){return new Promise((function(e,n){t()?s().then((function(t){e(a(t))})):e(!1)}))},isDetected:function(e,t){return function(){return console.warn("just-detect-adblock : The `isDetected()` method is now deprecated, please use `detectAnyAdblocker()` instead, which returns a Promise and can detect more stuff (like Brave Shields)."),e.apply(this,arguments)}}(r)}}()},RFor:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n={wrapper:"S5aHZ",containerRevamp:"n7Pze",container:"M0TJf",gradientRevamp:"oS89a",gradient:"oYrBR",button:"XuiT3"}},fPrZ:(e,t,s)=>{"use strict";s.d(t,{CY:()=>o,TE:()=>i,wH:()=>l});const n="ads/ADD_ARGS_ADS",r=document.styleSheets.length;function i(e){return{type:n,args:e}}const o=e=>(t,s)=>{let n;e&&(n=`sas_${e}`),window.sas&&window.sas.clean&&(window.sas.clean(n),e?t(d(e)):s().ads.shownFormatIds.forEach((e=>{t(d(e))})));const a=/sas_[0-9]{0,}/,i=document.styleSheets.length;if(i!==r&&i>0){const e=i-1,t=document.styleSheets[e];!1!==a.test(t.innerHTML)&&t.ownerNode.parentNode.removeChild(t.ownerNode)}return t({type:"ads/CLEAN_ADS"})},l=e=>"none"===document.getElementById(`sas_${e}`).style.display,d=e=>({type:"ads/HIDE_FORMAT",formatId:e})},tpKx:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>de});var n=s("q1tI"),a=s("TRpf"),r=s("X6oL"),i=s("r5wj"),o=s("axbb"),l=s("juqV"),d=s("FuY1"),u=s("Vd8Q"),c=s("ntT5"),p=s("tZCQ"),h=s("nxAS"),m=s("xobL"),A=s("aHAS"),g=s("fPrZ"),y=s("MeIc"),_=s("mUtM"),v=s("TqF5"),f=s("UA58"),E=s("MAes"),b=s("Ty5D"),w=s("ea/m"),P=s("+9dH"),T=s("Aw62"),C=s("JsMx"),S=s("4PKR");const D=e=>t=>n.createElement(S.Ay.Consumer,null,(s=>n.createElement(T.Ay.Consumer,null,(a=>n.createElement(C.Ay.Consumer,null,(r=>n.createElement(e,(0,P.A)({},t,{adsContext:s,audioBreakContext:a,adsConfigContext:r}))))))));var k=s("45CL");const B=()=>{const{isArchBanner:e}=(0,S.gA)(),{pathname:t}=(0,b.zy)();return t.includes("account")?null:n.createElement("div",{className:"page-wrapper","data-testid":"adslot1"},n.createElement("div",{className:"page-content"},n.createElement("div",{id:"adslot1",className:"ads ads-top"+(e?" has-ads-full":"")})))};var L,R=s("RFor");const N=()=>{const e=p.A.isAllowed("revamp2023"),{pathname:t}=(0,b.zy)();return t.includes("playlist")?n.createElement("div",{className:R.A.wrapper},n.createElement("div",{className:e?R.A.gradientRevamp:R.A.gradient}),n.createElement("div",{"data-testid":"sponsored_playlist",id:"sponsored_playlist",className:e?R.A.containerRevamp:R.A.container}),L||(L=n.createElement("div",{className:"ads ads-bottom ads-bottom-alone"},n.createElement("div",{"data-testid":"adslot2",id:"adslot2"})))):null};var I,M;const U=({type:e})=>"sponsored_playlist"===e?I||(I=n.createElement(N,null)):M||(M=n.createElement(B,null));var O,F,H=s("u7vQ"),j=s("AfN5"),$=s("oRM/");const q=e=>{switch(e){case"home":return"homepage";case"loved":return"favorite_tracks";case"channels_explore":return"channel_home";default:return e}},z=({children:e})=>{var t,s,r,i,o,l,d,u,c;const{isScriptLoaded:p,setIsSponsored:h,displayAdSlot:A,displaySponsored:g,destroySlot1:y}=(0,S.gA)(),{adsConfigState:_,getProfileReg:v,adsConfigReady:f}=(0,C.Y9)(),E=null==_||null===(t=_.profile)||void 0===t?void 0:t.user_hashed_uniq_id,b=null==_||null===(s=_.profile)||void 0===s?void 0:s.platforms,w=null===(r=null==b||null===(i=b.banner)||void 0===i?void 0:i.includes("gam"))||void 0===r||r,P=null===(o=null==b||null===(l=b.playlist)||void 0===l?void 0:l.includes("gam"))||void 0===o||o,T=null==_||null===(d=_.config)||void 0===d?void 0:d.banner,D=null===(u=_.config)||void 0===u?void 0:u.playlist,k=null===(c=_.targeting)||void 0===c?void 0:c.gam,{logBannerAdDisplay:x,logNoAds:B}=(0,$.D)(_),[L,R]=(0,n.useState)(),[N,I]=(0,n.useState)(!1),M=(0,a.d4)((({user:e})=>e)),z=(0,m.Z0)(M),Q=location.pathname.replace(/[^0-9]/g,""),Z=e=>e===G?Q:null,G=(0,a.d4)((({app:e})=>e.currentPage)),J=(0,a.d4)((({app:e})=>"channels"===e.currentPage?e.currentPath.split("/").slice(-1):"")),W=e=>`/104134276/deezer_app_windows/${q(G)}/${e}/${z}${J?"/"+J:""}`,Y=(0,n.useCallback)((()=>{const e=window.googletag;if(e){const t=e.pubads().setTargeting("pagetype",q(G)).setTargeting("user_gender",(e=>{switch(e){case"F":return"female";case"M":return"male";case"NonBinary":return"non_binary";default:return"other"}})((0,m.o_)(M))).setTargeting("user_age",Math.min((0,m.QO)(M),99).toString()).setTargeting("user_age_range",(e=>{switch(!0){case e<18:return"-18";case e<25:return"18-24";case e<35:return"25-34";case e<50:return"35-49";default:return"over65"}})((0,m.QO)(M))).setTargeting("user_id",((0,m.F6)(M)||0).toString()).setTargeting("user_reg_days",v()||""),s=Z("album"),n=Z("artist"),a=Z("playlist"),r=Z("show");s&&t.setTargeting("album_id",s),n&&t.setTargeting("artist_id",n),a&&t.setTargeting("playlist_id",a),r&&t.setTargeting("podcast_id",r),J&&t.setTargeting("channel",J),k&&Object.entries(k).forEach((([e,s])=>{s&&t.setTargeting(e,s.toString())}))}}),[p,G,M]),V=(0,n.useCallback)((()=>{if(!N){const e=window.googletag;null==e||e.pubads().collapseEmptyDivs(),null==e||e.pubads().disableInitialLoad(),null==e||e.pubads().enableSingleRequest(),E&&(null==e||e.pubads().setPublisherProvidedId(E)),null==e||e.enableServices(),I(!0)}}),[p,f,N]),K=(0,n.useCallback)((()=>{var e;if(H.Ay.getPlayerType()===j.Cc.ADS||H.Ay.getPlayerType()===j.Cc.TRITON_AD||!T||!w)return;const t=window.googletag;null==t||null===(e=t.destroySlots)||void 0===e||e.call(t),t&&A(W("web_adslot1"))}),[p,G,T,w]);return(0,n.useEffect)((()=>{if(p&&f){const e=window.googletag;if(e.cmd.push((()=>{V(),Y(),null==e||e.destroySlots(),R(void 0)})),"playlist"===G){if(void 0!==L&&!L||!D||!P)return void h(!1);e.cmd.push((()=>{g(W,(e=>t=>{if(t.slot.getAdUnitPath()===(null==e?void 0:e.getAdUnitPath())){if(R(!t.isEmpty),h(!t.isEmpty),t.isEmpty)return B("playlist"),void K();x("playlist")}}))}))}else h(!1),K()}}),[p,f,G,location,T]),"account"===G||"page"===G?(p&&y(),n.createElement(n.Fragment,null,e)):n.createElement("div",null,n.createElement("a",{id:"companion_banner",target:"_blank",style:{height:250,display:"none"}},n.createElement("img",{style:{height:"100%",margin:"auto"}})),"playlist"===G&&n.createElement("div",{style:{display:L?"block":"none"}},O||(O=n.createElement(U,{type:"sponsored_playlist"}))),!L&&(F||(F=n.createElement(U,{type:"adslot1"}))),e)};class Q extends n.Component{constructor(...e){super(...e),this._fetchAds=()=>{this.props.fetchAds("navigation")}}componentDidMount(){this.props.fetchAds("initial")}componentDidUpdate({currentPage:e}){e!==this.props.currentPage&&this._fetchAds()}render(){return null}}const Z=(0,a.Ng)((({app:{currentPage:e}})=>({currentPage:e})))(Q);var G=s("H/eQ");class J extends n.Component{constructor(){super(),this._onPlayerPlaying=()=>{this._startTimer()},this._onPlayerPaused=()=>{this._startTimer()},this._onTimeout=e=>{this._clearTimer(),(this.props.hasFocus||e)&&(this.props.fetchAds("inactivity"),this._startTimer())},this._startTimer=()=>{this.state.isActive||(this._setIsActive(!0),this._timer=setTimeout(this._onTimeout,6e4))},this._clearTimer=()=>{this._setIsActive(!1),clearTimeout(this._timer)},this._resetTimer=()=>{this._clearTimer(),this._startTimer()},this._setIsActive=e=>{this.setState({isActive:e})},this.state={isActive:!1}}componentDidMount(){H.Ay.playing||this._resetTimer(),G.A.subscribe(G.A.ads.refreshDisplay,this._resetTimer),G.A.subscribe(G.A.navigation.page_displayed,this._resetTimer),G.A.subscribe(G.A.player.playing,this._onPlayerPlaying),G.A.subscribe(G.A.player.paused,this._onPlayerPaused),G.A.subscribe(G.A.player.finishTrackList,this._resetTimer)}componentDidUpdate(e,t){e.hasFocus||!this.props.hasFocus||t.isActive||this._onTimeout(!0)}componentWillUnmount(){this._clearTimer(),G.A.unsubscribe(G.A.ads.refreshDisplay,this._resetTimer),G.A.unsubscribe(G.A.navigation.page_displayed,this._resetTimer),G.A.unsubscribe(G.A.player.playing,this._onPlayerPlaying),G.A.unsubscribe(G.A.player.paused,this._onPlayerPaused),G.A.unsubscribe(G.A.player.finishTrackList,this._resetTimer)}render(){return null}}var W=s("vGT4");class V extends n.Component{constructor(...e){super(...e),this.audioEl=void 0,this._onAudioError=()=>{G.A.trigger(G.A.ads.adError)},this._onAudioEnd=()=>{G.A.trigger(G.A.triton.audioEnd),G.A.trigger(G.A.ads.adEnd)},this._onAudioPlay=()=>{this.props.hasAdBlock||G.A.trigger(G.A.ads.adBegin)}}componentDidMount(){const e=this.audioEl;e&&(e.load(),e.addEventListener("ended",this._onAudioEnd),e.addEventListener("error",this._onAudioError),e.addEventListener("play",this._onAudioPlay))}componentWillUnmount(){const e=this.audioEl;e&&(e.removeEventListener("ended",this._onAudioEnd),e.removeEventListener("error",this._onAudioError),e.removeEventListener("play",this._onAudioPlay))}play(){this.audioEl&&this.audioEl.play()}render(){return n.createElement("audio",{"data-testid":"jinglePlayer",autoPlay:!1,className:"jinglePlayer",controls:!1,loop:!1,ref:e=>this.audioEl=e,src:this.props.audioSrc})}}V.defaultProps={audioSrc:"",hasAdBlock:!1};class K extends n.Component{constructor(...e){super(...e),this.state={timer:null},this._onAdsEnd=()=>{this._adsPlayed=!0},this._onPlay=()=>{this._adsPlayed||(H.Ay.control.pause(),H.Ay.previousPlayerType=H.Ay.getPlayerType())}}componentDidMount(){G.A.subscribe(G.A.player.play,this._onPlay),G.A.subscribe(G.A.triton.audioEnd,this._onAdsEnd),G.A.subscribe(G.A.ads.adEnd,this._onAdsEnd),this._playAds()}componentWillUnmount(){clearInterval(this.state.timer),G.A.unsubscribe(G.A.player.play,this._onPlay),G.A.unsubscribe(G.A.triton.audioEnd,this._onAdsEnd),G.A.unsubscribe(G.A.ads.adEnd,this._onAdsEnd)}render(){return n.createElement(V,{ref:e=>this.audioPlayer=e,hasAdBlock:this.props.hasAdBlock})}_playAds(){var e;const{fetchAudioBreak:t}=this.props.audioBreakContext,s=H.Ay.getMediaType()===j.zu.LIVE_STREAM,n=this.props.consentContext?null===(e=this.props.consentContext.state.settings)||void 0===e?void 0:e.consentString:void 0;!s&&this.audioPlayer&&this.audioPlayer.play?t(n).then((()=>{var e;null===(e=this.audioPlayer)||void 0===e||e.play(),H.Ay.previousPlayerType=H.Ay.getPlayerType(),H.Ay.control.pause(),H.Ay.setPlayerType(j.Cc.TRITON_AD)})):(setTimeout((()=>G.A.trigger(G.A.triton.audioEnd)),100),setTimeout((()=>G.A.trigger(G.A.ads.adEnd)),100))}}const X=(0,a.Ng)((({app:e,user:t})=>({userCountry:t.COUNTRY,userSessionId:t.SESSION_ID,hasAdBlock:e.hasAdBlock})),{})((e=>n.forwardRef(((t,s)=>n.createElement(W.A.Consumer,null,(a=>n.createElement(e,(0,P.A)({consentContext:a},t,{ref:s})))))))(D(K)));var ee;const te=()=>{const{isAdsReady:e}=(0,T.ZQ)();return e&&(ee||(ee=n.createElement(X,null)))};var se;const ne=({fetchAds:e=(()=>{}),hasAdBlock:t=!1,isReady:s=!0})=>{const{state:a}=(0,W.b)(),{audioBreakState:r}=(0,T.ZQ)(),[i,o]=(0,n.useState)(!0),l=()=>o(!0),d=()=>o(!1);return(0,n.useEffect)((()=>(window.addEventListener(G.A.ads.blur,d),window.addEventListener(G.A.ads.focus,l),()=>{window.removeEventListener(G.A.ads.blur,d),window.removeEventListener(G.A.ads.focus,l)})),[]),s||t?n.createElement("div",null,n.createElement(Z,{fetchAds:e}),n.createElement(J,{fetchAds:e,hasFocus:i}),!0===t&&Object.values(r).length>0||!1===t?se||(se=n.createElement(te,null)):null):null};var ae,re;class ie extends i.App{constructor(e){super(e),this.state={...this.state,mainPageClasses:(0,l.A)({"page-main":!0})}}componentDidMount(){super.componentDidMount&&super.componentDidMount(),this._updateAdsArgs(),this.props.adsConfigContext.loadAdConfig();const e={url:`https://${u.default.get("host_common_assets_ssl")}/js/yzfdmoan.js`,id:"837slaBksSjd9jh"};(function(e){return new Promise((t=>{const s=[(0,k.detectAnyAdblocker)()],{url:n,id:a,scriptKey:r}=e||{};var i;n&&a&&s.push((i={url:n,id:a},new Promise((e=>{const t=document.createElement("script");t.onload=()=>{e(!document.getElementById(i.id))},t.onerror=()=>{e(!0)},t.src=i.url,t.async=!0,document.body.appendChild(t)})))),r&&s.push(function(e){return new Promise((t=>{t(void 0===window[e])}))}(r)),Promise.all(s).then((e=>{t(e.some((e=>!0===e)))})).catch((()=>{t(!1)}))}))})(p.A.isAllowed("adblock_bait_file")?e:null).then((e=>{e&&this.props.updateHasAdBlock(e)}))}componentDidUpdate(...e){this._updateAdsArgs(),super.componentDidUpdate&&super.componentDidUpdate(...e)}shouldComponentUpdate(e,t){return super.shouldComponentUpdate(e,t)||this.props.shownFormatIds!==e.shownFormatIds||this.props.isAdsAllowed!==e.isAdsAllowed}_updateAdsArgs(){const e=this.props.location.pathname,t=(0,E.A)(e);let s={element_type:t,element_id:this.props.match.params.id?this.props.match.params.id:"",element_data:""};if("search"===t&&(s={element_type:"result",element_id:"ALL",element_data:this.props.match.params.query||this.props.match.params.tags||""}),""===s.element_id){const t=/[0-9]*/g;e.split("/").forEach((e=>{e.match(t)&&(s.element_id=e)}))}this.props.setAdsArgs(s)}_hasDisplayAdsAuthorization(){return this.props.isAdsAllowed&&this.props.adsConfigContext.hasDisplayAds()}_renderMain(){if(this.state.error)return n.createElement("div",{className:this.state.mainPageClasses,id:"page_content",role:"main"},ae||(ae=n.createElement(d.A,null)));const e=this.props.location.pathname.replace(/^\/|\/$/g,"")===this.props.userLanguage,t=n.createElement(n.Fragment,null,n.createElement(w.A,{displayContentCard:e}),re||(re=n.createElement(o.s,null)),this.props.children);return n.createElement("main",{className:this.state.mainPageClasses,id:"page_content",key:"main",role:"main"},p.A.isAllowed("ad_display_hubvisor")?n.createElement(z,null,n.createElement(ne,{hasAdBlock:this.props.hasAdBlock}),t):t)}}const oe=(0,a.Ng)((({app:{currentPage:e,hasAdBlock:t},user:s,alerts:n,entities:a},{location:r})=>({useFamilyScreen:!0===s.__DZR_GATEKEEPS__.family_screen,userID:s.USER.USER_ID,isConnected:(0,m.UJ)(s),hasOnBoarding:s.USER.ONBOARDING_MODAL,userAge:(0,m.QO)(s),userGender:(0,m.o_)(s),userLanguage:(0,m.Z0)(s),userOfferId:(0,m.id)(s),hasNoChildAccountSelected:!1,alerts:n,isSubProfile:(0,m.W$)(s),isHardbounce:s.USER.HARDBOUNCED_EMAIL,hasParent:(0,m.p7)(s),hasMultiAccountEnabled:(0,m.mE)(s),isSubAccount:(0,m.m0)(s),isAdsAllowed:(0,f.Mq)(a,{id:r.pathname.replace(/[^0-9]/g,""),currentPage:e}),hasAdBlock:t})),{selectChildAccount:A.me,setAdsArgs:g.TE,cleanAds:g.CY,updateCurrentPage:y.yf,updateHasAdBlock:y.eT,openScreen:h.J2,dispatchShowAlert:_.S7,dispatchHideAlert:_.Hd,openModal:v.qf,fetchChildAccount:A.C9}),le=(0,r.Ay)((e=>({virtualpageurl:e.location.pathname,language:e.userLanguage,uilogged:e.isConnected})),{process:e=>e.pagename?e:null,dispatch:e=>{void 0!==window.dataLayer&&window.dataLayer.push(e),(0,c.TD)(e)}}),de=(0,b.y)(oe(le(D(ie))))}}]);