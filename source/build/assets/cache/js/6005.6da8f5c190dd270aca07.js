"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[6005],{"iA+Z":(e,t,r)=>{function n(e,t={}){const{min:r=0,max:n=1/0,default:o=r}=t;return e="symbol"==typeof(e="bigint"==typeof e?NaN:e)?NaN:e,e=Number(e),e=Number.isNaN(e)?o:e,e=Math.max(e,r),Math.min(e,n)}r.d(t,{A:()=>n})},gXpF:(e,t,r)=>{r.d(t,{oW:()=>n,JD:()=>EmptySourceError,cL:()=>ExpiredTrackTokenError,DY:()=>ExpiredURLError,FJ:()=>MediaError,mK:()=>u,Sq:()=>o,VS:()=>NoFormatError,jl:()=>NoMediaResponseError,m6:()=>NoTrackTokenError,U3:()=>s,X8:()=>p,Ay:()=>g});let n=function(e){return e.BLOWFISH="BF_CBC_STRIPE",e.NONE="NONE",e}({}),o=function(e){return e.FULL="FULL",e.PREVIEW="PREVIEW",e}({}),i=function(e){return e[e.INVALID_LICENSE_TOKEN=1e3]="INVALID_LICENSE_TOKEN",e[e.EXPIRED_LICENSE_TOKEN=1001]="EXPIRED_LICENSE_TOKEN",e[e.UNAUTHORIZED_LICENSE_TOKEN=1002]="UNAUTHORIZED_LICENSE_TOKEN",e[e.API_DEPRECATED=1999]="API_DEPRECATED",e}({}),a=function(e){return e[e.INVALID_TRACK_TOKEN=2e3]="INVALID_TRACK_TOKEN",e[e.EXPIRED_TRACK_TOKEN=2001]="EXPIRED_TRACK_TOKEN",e[e.UNAUTHORIZED_TRACK_TOKEN=2002]="UNAUTHORIZED_TRACK_TOKEN",e}({});class u{constructor(e){this.formats=void 0,this.type=void 0,this.formats=e,this.type=o.FULL}}class s extends u{constructor(){super([{cipher:n.NONE,format:"MP3_128"}]),this.type=o.PREVIEW}}var l=r("MVPB"),c=r("4OMY"),d=(0,c.A)("expire"),f=(0,c.A)("value");class p{constructor(e,t={}){Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),(0,l.A)(this,d)[d]=t.expire,(0,l.A)(this,f)[f]=e}get expire(){return(0,l.A)(this,d)[d]}isExpired(e=Date.now()/1e3){return!!(0,l.A)(this,d)[d]&&e>(0,l.A)(this,d)[d]}toString(){return(0,l.A)(this,f)[f]}}var h=r("+9dH"),b=r("/0+J"),_=r("8VJL");class URLProviderError extends _.A{constructor(...[e,t]){super(e),this.details=void 0,this.details=t||null}}class DataError extends URLProviderError{}class NoURLForMediaServiceError extends DataError{constructor(...e){super(...e),this.code="MS0000"}}class NoLicenseTokenError extends DataError{constructor(...e){super(...e),this.code="MS0001"}}class NoTrackTokenError extends DataError{constructor(...e){super(...e),this.code="MS0002"}}class NoFormatRequestedError extends DataError{constructor(...e){super(...e),this.code="MS0003"}}class NetworkError extends URLProviderError{}class NoNetworkError extends NetworkError{constructor(...e){super(...e),this.code="MS0600"}}class TimeoutError extends NetworkError{constructor(...e){super(...e),this.code="MS0610"}}class ServerError extends URLProviderError{constructor(...e){super(...e),this.code=void 0}}class ParsingError extends URLProviderError{constructor(...e){super(...e),this.code="MS0674"}}class ResponseError extends URLProviderError{get code(){return void 0!==this.details.code?`MS${this.details.code}`:void 0}}class APIDeprecatedError extends ResponseError{}class ExpiredLicenseTokenError extends ResponseError{}class InvalidLicenseTokenError extends ResponseError{}class UnauthorizedLicenseTokenError extends ResponseError{}class UnknownCodeError extends ResponseError{}class InvalidResponseError extends URLProviderError{constructor(...e){super(...e),this.code="MS0674"}}class MediaError extends URLProviderError{constructor(...e){super(...e),this._code=void 0}get code(){var e;return null!=(e=this._code)?e:"code"in this.details&&void 0!==this.details.code?`MS${this.details.code}`:void 0}}class ExpiredTrackTokenError extends MediaError{}class InvalidTrackTokenError extends MediaError{}class UnauthorizedTrackTokenError extends MediaError{}class UnknownMediaError extends MediaError{}class NoFormatError extends MediaError{constructor(...e){super(...e),this._code="MS3000"}}class ExpiredURLError extends MediaError{constructor(...e){super(...e),this._code="MS3001"}}class EmptySourceError extends MediaError{constructor(...e){super(...e),this._code="MS3002"}}class NoMediaResponseError extends MediaError{}var v=(0,c.A)("endpoint"),y=(0,c.A)("fetch"),m=(0,c.A)("timeService");class g{constructor(...[e,t,{fetch:r=globalThis.fetch,timeService:n}={}]){if(this.licenseToken=void 0,Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),!e)throw new NoURLForMediaServiceError;(0,l.A)(this,v)[v]=`${e}/v1/get_url`,(0,l.A)(this,y)[y]=r,(0,l.A)(this,m)[m]=n,this.licenseToken=t}getURLs(e,t){var r=this;return(0,b.A)((function*(){var n,o;if(e=[...e],t=Array.isArray(t)?t:[t],null==(n=r.licenseToken)||!n.toString())throw new NoLicenseTokenError(void 0,{token:r.licenseToken});if(!e.length)throw new NoTrackTokenError(void 0,{tracks:e});if(e.some((({token:e})=>!(null!=e&&e.toString()))))throw new NoTrackTokenError(void 0,{tracks:e.filter((e=>{var t;return!(null!=(t=e.token)&&t.toString())}))});const u=null==(o=(0,l.A)(r,m)[m])?void 0:o.now();if(e.some((({token:e})=>e.isExpired(u))))throw new ExpiredTrackTokenError(void 0,{tracks:e.filter((e=>!e.token.isExpired(u)))});if(!t.length)throw new NoFormatRequestedError(void 0,{requests:t,tracks:e});const s={license_token:r.licenseToken.toString(),media:t,track_tokens:e.map((({token:e})=>e.toString()))},c={body:JSON.stringify(s),headers:{"content-type":"application/json"},method:"POST"},d={license_token:s.license_token,media:s.media},f=yield(0,l.A)(r,y)[y].call(null,(0,l.A)(r,v)[v],c).catch((t=>{if(t instanceof TypeError)throw"undefined"!=typeof navigator&&navigator.onLine?new TimeoutError(t.message,{request:d,tracks:e}):new NoNetworkError(t.message,{request:d,tracks:e});throw t}));if(!f)throw new ServerError("Cannot retrieve the response",{request:d,tracks:e});const p=f.headers.get("Date");var b;if(p&&(null==(b=(0,l.A)(r,m)[m])||b.update(p)),!f.ok&&f.status>=500)throw Object.assign(new ServerError(`Got an HTTP code ${f.status}`,{request:d,response:yield f.text().catch((e=>e&&e instanceof Error?`${e.name}: ${e.message}`:"Failed to read")),tracks:e}),{code:`MS0${f.status}`});const _=yield f.clone().text().catch((e=>e&&e instanceof Error?`${e.name}: ${e.message}`:"Failed to read")),g=yield f.clone().json().catch((()=>{throw new ParsingError("Failed to parse the response",{request:d,response:_,tracks:e})})),w={request:d,response:_,tracks:e};if(function(e){return void 0!==e.errors}(g)){const{code:e=0,message:t=""}=g.errors[0]||{};switch(e){case i.API_DEPRECATED:throw new APIDeprecatedError(t,(0,h.A)({},w,{code:e}));case i.EXPIRED_LICENSE_TOKEN:throw new ExpiredLicenseTokenError(t,(0,h.A)({},w,{code:e}));case i.INVALID_LICENSE_TOKEN:throw new InvalidLicenseTokenError(t,(0,h.A)({},w,{code:e}));case i.UNAUTHORIZED_LICENSE_TOKEN:throw new UnauthorizedLicenseTokenError(t,(0,h.A)({},w,{code:e}));default:throw new UnknownCodeError(void 0,(0,h.A)({},w,{code:e}))}}if(e.length!==g.data.length)throw new InvalidResponseError(`Got ${g.data.length} tracks but expected ${e.length}`,w);return new Map(e.map(((e,t)=>{const r=g.data[t];if(function(e){return void 0!==e.errors}(r)){const{errors:t}=r,{code:n}=t[0]||{};switch(n){case a.EXPIRED_TRACK_TOKEN:return[e,new ExpiredTrackTokenError(void 0,(0,h.A)({},w,{code:n,track:e}))];case a.INVALID_TRACK_TOKEN:return[e,new InvalidTrackTokenError(void 0,(0,h.A)({},w,{code:n,track:e}))];case a.UNAUTHORIZED_TRACK_TOKEN:return[e,new UnauthorizedTrackTokenError(void 0,(0,h.A)({},w,{code:n,track:e}))];default:return[e,new UnknownMediaError(void 0,(0,h.A)({},w,{code:n,track:e}))]}}const{media:n=[]}=r;return[e,n]})))}))()}}},G2AH:(e,t,r)=>{function n(e,t){this.v=e,this.k=t}r.d(t,{A:()=>n})},Gq8r:(e,t,r)=>{r.d(t,{A:()=>o});var n=r("G2AH");function o(e){var t={},r=!1;function o(t,o){return r=!0,o=new Promise((function(r){r(e[t](o))})),{done:!1,value:new n.A(o,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):o("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return o("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):o("return",e)}),t}},"Z/od":(e,t,r)=>{r.d(t,{A:()=>o});var n=r("G2AH");function o(e){return new n.A(e,0)}},LYzy:(e,t,r)=>{r.d(t,{A:()=>o});var n=r("G2AH");function o(e){return function(){return new i(e.apply(this,arguments))}}function i(e){var t,r;function o(t,r){try{var a=e[t](r),u=a.value,s=u instanceof n.A;Promise.resolve(s?u.v:u).then((function(r){if(s){var n="return"===t?"return":"next";if(!u.k||r.done)return o(n,r);r=e[n](r).value}i(a.done?"return":"normal",r)}),(function(e){o("throw",e)}))}catch(e){i("throw",e)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?o(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(i,a){var u={key:e,arg:n,resolve:i,reject:a,next:null};r?r=r.next=u:(t=r=u,o(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}i.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)}},yZHM:(e,t,r)=>{r.d(t,{Rv:()=>Dr,ZY:()=>gr,ho:()=>st});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(e){return"Symbol("+e+")"};function o(){}var i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function a(e){return"object"==typeof e&&null!==e||"function"==typeof e}var u=o,s=Promise,l=Promise.prototype.then,c=Promise.resolve.bind(s),d=Promise.reject.bind(s);function f(e){return new s(e)}function p(e){return c(e)}function h(e){return d(e)}function b(e,t,r){return l.call(e,t,r)}function _(e,t,r){b(b(e,t,r),void 0,u)}function v(e,t){_(e,t)}function y(e,t){_(e,void 0,t)}function m(e,t,r){return b(e,t,r)}function g(e){b(e,void 0,u)}var w=function(){var e=i&&i.queueMicrotask;if("function"==typeof e)return e;var t=p(void 0);return function(e){return b(t,e)}}();function S(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function R(e,t,r){try{return p(S(e,t,r))}catch(e){return h(e)}}var T=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(e){var t=this._back,r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size},e.prototype.shift=function(){var e=this._front,t=e,r=this._cursor,n=r+1,o=e._elements,i=o[r];return 16384===n&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,i},e.prototype.forEach=function(e){for(var t=this._cursor,r=this._front,n=r._elements;!(t===n.length&&void 0===r._next||t===n.length&&(t=0,0===(n=(r=r._next)._elements).length));)e(n[t]),++t},e.prototype.peek=function(){var e=this._front,t=this._cursor;return e._elements[t]},e}();function E(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?O(e):"closed"===t._state?function(e){O(e),j(e)}(e):q(e,t._storedError)}function P(e,t){return Pr(e._ownerReadableStream,t)}function C(e){"readable"===e._ownerReadableStream._state?k(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){q(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function A(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function O(e){e._closedPromise=f((function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r}))}function q(e,t){O(e),k(e,t)}function k(e,t){void 0!==e._closedPromise_reject&&(g(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function j(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var I=n("[[AbortSteps]]"),W=n("[[ErrorSteps]]"),z=n("[[CancelSteps]]"),L=n("[[PullSteps]]"),N=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},F=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function B(e,t){if(void 0!==e&&"object"!=typeof(r=e)&&"function"!=typeof r)throw new TypeError(t+" is not an object.");var r}function x(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function.")}function M(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(t+" is not an object.")}function D(e,t,r){if(void 0===e)throw new TypeError("Parameter "+t+" is required in '"+r+"'.")}function K(e,t,r){if(void 0===e)throw new TypeError(t+" is required in '"+r+"'.")}function H(e){return Number(e)}function U(e){return 0===e?0:e}function V(e,t){var r=Number.MAX_SAFE_INTEGER,n=Number(e);if(n=U(n),!N(n))throw new TypeError(t+" is not a finite number");if((n=function(e){return U(F(e))}(n))<0||n>r)throw new TypeError(t+" is outside the accepted range of 0 to "+r+", inclusive");return N(n)&&0!==n?n:0}function Y(e,t){if(!Tr(e))throw new TypeError(t+" is not a ReadableStream.")}function Q(e){return new te(e)}function $(e,t){e._reader._readRequests.push(t)}function Z(e,t,r){var n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function X(e){return e._reader._readRequests.length}function G(e){var t=e._reader;return void 0!==t&&!!re(t)}var J,ee,te=function(){function e(e){if(D(e,1,"ReadableStreamDefaultReader"),Y(e,"First parameter"),Er(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");E(this,e),this._readRequests=new T}return Object.defineProperty(e.prototype,"closed",{get:function(){return re(this)?this._closedPromise:h(oe("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),re(this)?void 0===this._ownerReadableStream?h(A("cancel")):P(this,e):h(oe("cancel"))},e.prototype.read=function(){if(!re(this))return h(oe("read"));if(void 0===this._ownerReadableStream)return h(A("read from"));var e,t,r=f((function(r,n){e=r,t=n}));return ne(this,{_chunkSteps:function(t){return e({value:t,done:!1})},_closeSteps:function(){return e({value:void 0,done:!0})},_errorSteps:function(e){return t(e)}}),r},e.prototype.releaseLock=function(){if(!re(this))throw oe("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");C(this)}},e}();function re(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof te}function ne(e,t){var r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[L](t)}function oe(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(te.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(te.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),"symbol"==typeof n.asyncIterator&&((J={})[n.asyncIterator]=function(){return this},ee=J,Object.defineProperty(ee,n.asyncIterator,{enumerable:!1}));var ie=function(){function e(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}return e.prototype.next=function(){var e=this,t=function(){return e._nextSteps()};return this._ongoingPromise=this._ongoingPromise?m(this._ongoingPromise,t,t):t(),this._ongoingPromise},e.prototype.return=function(e){var t=this,r=function(){return t._returnSteps(e)};return this._ongoingPromise?m(this._ongoingPromise,r,r):r()},e.prototype._nextSteps=function(){var e=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var t,r,n=this._reader;if(void 0===n._ownerReadableStream)return h(A("iterate"));var o=f((function(e,n){t=e,r=n}));return ne(n,{_chunkSteps:function(r){e._ongoingPromise=void 0,w((function(){return t({value:r,done:!1})}))},_closeSteps:function(){e._ongoingPromise=void 0,e._isFinished=!0,C(n),t({value:void 0,done:!0})},_errorSteps:function(t){e._ongoingPromise=void 0,e._isFinished=!0,C(n),r(t)}}),o},e.prototype._returnSteps=function(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;var t=this._reader;if(void 0===t._ownerReadableStream)return h(A("finish iterating"));if(!this._preventCancel){var r=P(t,e);return C(t),m(r,(function(){return{value:e,done:!0}}))}return C(t),p({value:e,done:!0})},e}(),ae={next:function(){return ue(this)?this._asyncIteratorImpl.next():h(se("next"))},return:function(e){return ue(this)?this._asyncIteratorImpl.return(e):h(se("return"))}};function ue(e){if(!a(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ie}catch(e){return!1}}function se(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}void 0!==ee&&Object.setPrototypeOf(ae,ee);var le=Number.isNaN||function(e){return e!=e};function ce(e){return e.slice()}function de(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function fe(e,t,r){if(e.slice)return e.slice(t,r);var n=r-t,o=new ArrayBuffer(n);return de(o,0,e,t,n),o}function pe(e){var t=fe(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function he(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function be(e,t,r){if("number"!=typeof(n=r)||le(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function _e(e){e._queue=new T,e._queueTotalSize=0}var ve=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!ge(this))throw De("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(e){if(!ge(this))throw De("respond");if(D(e,1,"respond"),e=V(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,Be(this._associatedReadableByteStreamController,e)},e.prototype.respondWithNewView=function(e){if(!ge(this))throw De("respondWithNewView");if(D(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,xe(this._associatedReadableByteStreamController,e)},e}();Object.defineProperties(ve.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(ve.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var ye=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!me(this))throw Ke("byobRequest");return Ne(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!me(this))throw Ke("desiredSize");return Fe(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!me(this))throw Ke("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");We(this)},e.prototype.enqueue=function(e){if(!me(this))throw Ke("enqueue");if(D(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");ze(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!me(this))throw Ke("error");Le(this,e)},e.prototype[z]=function(e){Se(this),_e(this);var t=this._cancelAlgorithm(e);return Ie(this),t},e.prototype[L]=function(e){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var r=this._queue.shift();this._queueTotalSize-=r.byteLength,Ae(this);var n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);e._chunkSteps(n)}else{var o=this._autoAllocateChunkSize;if(void 0!==o){var i=void 0;try{i=new ArrayBuffer(o)}catch(t){return void e._errorSteps(t)}var a={buffer:i,bufferByteLength:o,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}$(t,e),we(this)}},e}();function me(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof ye}function ge(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof ve}function we(e){var t=function(e){var t=e._controlledReadableByteStream;return"readable"===t._state&&(!e._closeRequested&&(!!e._started&&(!!(G(t)&&X(t)>0)||(!!(Ye(t)&&Ve(t)>0)||Fe(e)>0))))}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,_(e._pullAlgorithm(),(function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,we(e))}),(function(t){Le(e,t)}))))}function Se(e){Oe(e),e._pendingPullIntos=new T}function Re(e,t){var r=!1;"closed"===e._state&&(r=!0);var n=Te(t);"default"===t.readerType?Z(e,n,r):function(e,t,r){var o=e._reader._readIntoRequests.shift();r?o._closeSteps(t):o._chunkSteps(t)}(e,n,r)}function Te(e){var t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Ee(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function Pe(e,t){var r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+o,a=i-i%r,u=o,s=!1;a>n&&(u=a-t.bytesFilled,s=!0);for(var l=e._queue;u>0;){var c=l.peek(),d=Math.min(u,c.byteLength),f=t.byteOffset+t.bytesFilled;de(t.buffer,f,c.buffer,c.byteOffset,d),c.byteLength===d?l.shift():(c.byteOffset+=d,c.byteLength-=d),e._queueTotalSize-=d,Ce(e,d,t),u-=d}return s}function Ce(e,t,r){r.bytesFilled+=t}function Ae(e){0===e._queueTotalSize&&e._closeRequested?(Ie(e),Cr(e._controlledReadableByteStream)):we(e)}function Oe(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function qe(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos.peek();Pe(e,t)&&(je(e),Re(e._controlledReadableByteStream,t))}}function ke(e,t){var r=e._pendingPullIntos.peek();Oe(e),"closed"===e._controlledReadableByteStream._state?function(e){var t=e._controlledReadableByteStream;if(Ye(t))for(;Ve(t)>0;)Re(t,je(e))}(e):function(e,t,r){if(Ce(0,t,r),!(r.bytesFilled<r.elementSize)){je(e);var n=r.bytesFilled%r.elementSize;if(n>0){var o=r.byteOffset+r.bytesFilled,i=fe(r.buffer,o-n,o);Ee(e,i,0,i.byteLength)}r.bytesFilled-=n,Re(e._controlledReadableByteStream,r),qe(e)}}(e,t,r),we(e)}function je(e){return e._pendingPullIntos.shift()}function Ie(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function We(e){var t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Le(e,r),r}Ie(e),Cr(t)}}function ze(e,t){var r=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===r._state){var n=t.buffer,o=t.byteOffset,i=t.byteLength,a=n;if(e._pendingPullIntos.length>0){var u=e._pendingPullIntos.peek();u.buffer,u.buffer=u.buffer}Oe(e),G(r)?0===X(r)?Ee(e,a,o,i):(e._pendingPullIntos.length>0&&je(e),Z(r,new Uint8Array(a,o,i),!1)):Ye(r)?(Ee(e,a,o,i),qe(e)):Ee(e,a,o,i),we(e)}}function Le(e,t){var r=e._controlledReadableByteStream;"readable"===r._state&&(Se(e),_e(e),Ie(e),Ar(r,t))}function Ne(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){var t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(ve.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(n,e,r),e._byobRequest=n}return e._byobRequest}function Fe(e){var t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Be(e,t){var r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=r.buffer,ke(e,t)}function xe(e,t){var r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var n=t.byteLength;r.buffer=t.buffer,ke(e,n)}function Me(e,t,r,n,o,i,a){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,_e(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,t._autoAllocateChunkSize=a,t._pendingPullIntos=new T,e._readableStreamController=t,_(p(r()),(function(){t._started=!0,we(t)}),(function(e){Le(t,e)}))}function De(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function Ke(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function He(e){return new Qe(e)}function Ue(e,t){e._reader._readIntoRequests.push(t)}function Ve(e){return e._reader._readIntoRequests.length}function Ye(e){var t=e._reader;return void 0!==t&&!!$e(t)}Object.defineProperties(ye.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(ye.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var Qe=function(){function e(e){if(D(e,1,"ReadableStreamBYOBReader"),Y(e,"First parameter"),Er(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!me(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");E(this,e),this._readIntoRequests=new T}return Object.defineProperty(e.prototype,"closed",{get:function(){return $e(this)?this._closedPromise:h(Xe("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),$e(this)?void 0===this._ownerReadableStream?h(A("cancel")):P(this,e):h(Xe("cancel"))},e.prototype.read=function(e){if(!$e(this))return h(Xe("read"));if(!ArrayBuffer.isView(e))return h(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return h(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return h(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return h(A("read from"));var t,r,n=f((function(e,n){t=e,r=n}));return Ze(this,e,{_chunkSteps:function(e){return t({value:e,done:!1})},_closeSteps:function(e){return t({value:e,done:!0})},_errorSteps:function(e){return r(e)}}),n},e.prototype.releaseLock=function(){if(!$e(this))throw Xe("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");C(this)}},e}();function $e(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Qe}function Ze(e,t,r){var n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):function(e,t,r){var n=e._controlledReadableByteStream,o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);var i=t.constructor,a=t.buffer,u={buffer:a,bufferByteLength:a.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(u),void Ue(n,r);if("closed"!==n._state){if(e._queueTotalSize>0){if(Pe(e,u)){var s=Te(u);return Ae(e),void r._chunkSteps(s)}if(e._closeRequested){var l=new TypeError("Insufficient bytes to fill elements in the given buffer");return Le(e,l),void r._errorSteps(l)}}e._pendingPullIntos.push(u),Ue(n,r),we(e)}else{var c=new i(u.buffer,u.byteOffset,0);r._closeSteps(c)}}(n._readableStreamController,t,r)}function Xe(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function Ge(e,t){var r=e.highWaterMark;if(void 0===r)return t;if(le(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function Je(e){return e.size||function(){return 1}}function et(e,t){B(e,t);var r=null==e?void 0:e.highWaterMark,n=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:H(r),size:void 0===n?void 0:tt(n,t+" has member 'size' that")}}function tt(e,t){return x(e,t),function(t){return H(e(t))}}function rt(e,t,r){return x(e,r),function(r){return R(e,t,[r])}}function nt(e,t,r){return x(e,r),function(){return R(e,t,[])}}function ot(e,t,r){return x(e,r),function(r){return S(e,t,[r])}}function it(e,t,r){return x(e,r),function(r,n){return R(e,t,[r,n])}}function at(e,t){if(!dt(e))throw new TypeError(t+" is not a WritableStream.")}Object.defineProperties(Qe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(Qe.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var ut="function"==typeof AbortController,st=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),void 0===e?e=null:M(e,"First parameter");var r=et(t,"Second parameter"),n=function(e,t){B(e,t);var r=null==e?void 0:e.abort,n=null==e?void 0:e.close,o=null==e?void 0:e.start,i=null==e?void 0:e.type,a=null==e?void 0:e.write;return{abort:void 0===r?void 0:rt(r,e,t+" has member 'abort' that"),close:void 0===n?void 0:nt(n,e,t+" has member 'close' that"),start:void 0===o?void 0:ot(o,e,t+" has member 'start' that"),write:void 0===a?void 0:it(a,e,t+" has member 'write' that"),type:i}}(e,"First parameter");if(ct(this),void 0!==n.type)throw new RangeError("Invalid type is specified");var o=Je(r);!function(e,t,r,n){var o=Object.create(Ot.prototype),i=function(){},a=function(){return p(void 0)},u=function(){return p(void 0)},s=function(){return p(void 0)};void 0!==t.start&&(i=function(){return t.start(o)}),void 0!==t.write&&(a=function(e){return t.write(e,o)}),void 0!==t.close&&(u=function(){return t.close()}),void 0!==t.abort&&(s=function(e){return t.abort(e)}),kt(e,o,i,a,u,s,r,n)}(this,n,Ge(r,1),o)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!dt(this))throw Ft("locked");return ft(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return void 0===e&&(e=void 0),dt(this)?ft(this)?h(new TypeError("Cannot abort a stream that already has a writer")):pt(this,e):h(Ft("abort"))},e.prototype.close=function(){return dt(this)?ft(this)?h(new TypeError("Cannot close a stream that already has a writer")):yt(this)?h(new TypeError("Cannot close an already-closing stream")):ht(this):h(Ft("close"))},e.prototype.getWriter=function(){if(!dt(this))throw Ft("getWriter");return lt(this)},e}();function lt(e){return new wt(e)}function ct(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new T,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function dt(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof st}function ft(e){return void 0!==e._writer}function pt(e,t){var r;if("closed"===e._state||"errored"===e._state)return p(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort();var n=e._state;if("closed"===n||"errored"===n)return p(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;var o=!1;"erroring"===n&&(o=!0,t=void 0);var i=f((function(r,n){e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:o}}));return e._pendingAbortRequest._promise=i,o||_t(e,t),i}function ht(e){var t=e._state;if("closed"===t||"errored"===t)return h(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"));var r,n=f((function(t,r){var n={_resolve:t,_reject:r};e._closeRequest=n})),o=e._writer;return void 0!==o&&e._backpressure&&"writable"===t&&Zt(o),be(r=e._writableStreamController,At,0),Wt(r),n}function bt(e,t){"writable"!==e._state?vt(e):_t(e,t)}function _t(e,t){var r=e._writableStreamController;e._state="erroring",e._storedError=t;var n=e._writer;void 0!==n&&Et(n,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&r._started&&vt(e)}function vt(e){e._state="errored",e._writableStreamController[W]();var t=e._storedError;if(e._writeRequests.forEach((function(e){e._reject(t)})),e._writeRequests=new T,void 0!==e._pendingAbortRequest){var r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void mt(e);_(e._writableStreamController[I](r._reason),(function(){r._resolve(),mt(e)}),(function(t){r._reject(t),mt(e)}))}else mt(e)}function yt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function mt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&Ht(t,e._storedError)}function gt(e,t){var r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){Vt(e)}(r):Zt(r)),e._backpressure=t}Object.defineProperties(st.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(st.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});var wt=function(){function e(e){if(D(e,1,"WritableStreamDefaultWriter"),at(e,"First parameter"),ft(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var r=e._state;if("writable"===r)!yt(e)&&e._backpressure?Vt(this):Qt(this),Dt(this);else if("erroring"===r)Yt(this,e._storedError),Dt(this);else if("closed"===r)Qt(this),Dt(this),Ut(this);else{var n=e._storedError;Yt(this,n),Kt(this,n)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return St(this)?this._closedPromise:h(xt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!St(this))throw xt("desiredSize");if(void 0===this._ownerWritableStream)throw Mt("desiredSize");return function(e){var t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:It(t._writableStreamController)}(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return St(this)?this._readyPromise:h(xt("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return void 0===e&&(e=void 0),St(this)?void 0===this._ownerWritableStream?h(Mt("abort")):function(e,t){return pt(e._ownerWritableStream,t)}(this,e):h(xt("abort"))},e.prototype.close=function(){if(!St(this))return h(xt("close"));var e=this._ownerWritableStream;return void 0===e?h(Mt("close")):yt(e)?h(new TypeError("Cannot close an already-closing stream")):Rt(this)},e.prototype.releaseLock=function(){if(!St(this))throw xt("releaseLock");void 0!==this._ownerWritableStream&&Pt(this)},e.prototype.write=function(e){return void 0===e&&(e=void 0),St(this)?void 0===this._ownerWritableStream?h(Mt("write to")):Ct(this,e):h(xt("write"))},e}();function St(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof wt}function Rt(e){return ht(e._ownerWritableStream)}function Et(e,t){"pending"===e._readyPromiseState?$t(e,t):function(e,t){Yt(e,t)}(e,t)}function Pt(e){var t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Et(e,r),function(e,t){"pending"===e._closedPromiseState?Ht(e,t):function(e,t){Kt(e,t)}(e,t)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function Ct(e,t){var r=e._ownerWritableStream,n=r._writableStreamController,o=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return zt(e,t),1}}(n,t);if(r!==e._ownerWritableStream)return h(Mt("write to"));var i=r._state;if("errored"===i)return h(r._storedError);if(yt(r)||"closed"===i)return h(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return h(r._storedError);var a=function(e){return f((function(t,r){var n={_resolve:t,_reject:r};e._writeRequests.push(n)}))}(r);return function(e,t,r){try{be(e,t,r)}catch(t){return void zt(e,t)}var n=e._controlledWritableStream;yt(n)||"writable"!==n._state||gt(n,Lt(e)),Wt(e)}(n,t,o),a}Object.defineProperties(wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(wt.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var At={},Ot=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!qt(this))throw Bt("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!qt(this))throw Bt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(e){if(void 0===e&&(e=void 0),!qt(this))throw Bt("error");"writable"===this._controlledWritableStream._state&&Nt(this,e)},e.prototype[I]=function(e){var t=this._abortAlgorithm(e);return jt(this),t},e.prototype[W]=function(){_e(this)},e}();function qt(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Ot}function kt(e,t,r,n,o,i,a,u){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,_e(t),t._abortReason=void 0,t._abortController=function(){if(ut)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=u,t._strategyHWM=a,t._writeAlgorithm=n,t._closeAlgorithm=o,t._abortAlgorithm=i;var s=Lt(t);gt(e,s),_(p(r()),(function(){t._started=!0,Wt(t)}),(function(r){t._started=!0,bt(e,r)}))}function jt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function It(e){return e._strategyHWM-e._queueTotalSize}function Wt(e){var t=e._controlledWritableStream;if(e._started&&void 0===t._inFlightWriteRequest)if("erroring"!==t._state){if(0!==e._queue.length){var r=e._queue.peek().value;r===At?function(e){var t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),he(e);var r=e._closeAlgorithm();jt(e),_(r,(function(){!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var t=e._writer;void 0!==t&&Ut(t)}(t)}),(function(e){!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),bt(e,t)}(t,e)}))}(e):function(e,t){var r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r),_(e._writeAlgorithm(t),(function(){!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);var t=r._state;if(he(e),!yt(r)&&"writable"===t){var n=Lt(e);gt(r,n)}Wt(e)}),(function(t){"writable"===r._state&&jt(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,bt(e,t)}(r,t)}))}(e,r)}}else vt(t)}function zt(e,t){"writable"===e._controlledWritableStream._state&&Nt(e,t)}function Lt(e){return It(e)<=0}function Nt(e,t){var r=e._controlledWritableStream;jt(e),_t(r,t)}function Ft(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function Bt(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function xt(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function Mt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Dt(e){e._closedPromise=f((function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"}))}function Kt(e,t){Dt(e),Ht(e,t)}function Ht(e,t){void 0!==e._closedPromise_reject&&(g(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ut(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Vt(e){e._readyPromise=f((function(t,r){e._readyPromise_resolve=t,e._readyPromise_reject=r})),e._readyPromiseState="pending"}function Yt(e,t){Vt(e),$t(e,t)}function Qt(e){Vt(e),Zt(e)}function $t(e,t){void 0!==e._readyPromise_reject&&(g(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Zt(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Ot.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(Ot.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var Gt,Xt="undefined"!=typeof DOMException?DOMException:void 0,Jt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Xt)?Xt:((Gt=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}).prototype=Object.create(Error.prototype),Object.defineProperty(Gt.prototype,"constructor",{value:Gt,writable:!0,configurable:!0}),Gt);function er(e,t,r,n,i,a){var u=Q(e),s=lt(t);e._disturbed=!0;var l=!1,c=p(void 0);return f((function(d,m){var w,S,R,T;if(void 0!==a){if(w=function(){var r=new Jt("Aborted","AbortError"),o=[];n||o.push((function(){return"writable"===t._state?pt(t,r):p(void 0)})),i||o.push((function(){return"readable"===e._state?Pr(e,r):p(void 0)})),O((function(){return Promise.all(o.map((function(e){return e()})))}),!0,r)},a.aborted)return void w();a.addEventListener("abort",w)}if(A(e,u._closedPromise,(function(e){n?q(!0,e):O((function(){return pt(t,e)}),!0,e)})),A(t,s._closedPromise,(function(t){i?q(!0,t):O((function(){return Pr(e,t)}),!0,t)})),S=e,R=u._closedPromise,T=function(){r?q():O((function(){return function(e){var t=e._ownerWritableStream,r=t._state;return yt(t)||"closed"===r?p(void 0):"errored"===r?h(t._storedError):Rt(e)}(s)}))},"closed"===S._state?T():v(R,T),yt(t)||"closed"===t._state){var E=new TypeError("the destination writable stream closed before all data could be piped to it");i?q(!0,E):O((function(){return Pr(e,E)}),!0,E)}function P(){var e=c;return b(c,(function(){return e!==c?P():void 0}))}function A(e,t,r){"errored"===e._state?r(e._storedError):y(t,r)}function O(e,r,n){function o(){_(e(),(function(){return k(r,n)}),(function(e){return k(!0,e)}))}l||(l=!0,"writable"!==t._state||yt(t)?o():v(P(),o))}function q(e,r){l||(l=!0,"writable"!==t._state||yt(t)?k(e,r):v(P(),(function(){return k(e,r)})))}function k(e,t){Pt(s),C(u),void 0!==a&&a.removeEventListener("abort",w),e?m(t):d(void 0)}g(f((function(e,t){!function r(n){n?e():b(l?p(!0):b(s._readyPromise,(function(){return f((function(e,t){ne(u,{_chunkSteps:function(t){c=b(Ct(s,t),void 0,o),e(!1)},_closeSteps:function(){return e(!0)},_errorSteps:t})}))})),r,t)}(!1)})))}))}var tr=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!rr(this))throw fr("desiredSize");return lr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!rr(this))throw fr("close");if(!cr(this))throw new TypeError("The stream is not in a state that permits close");ar(this)},e.prototype.enqueue=function(e){if(void 0===e&&(e=void 0),!rr(this))throw fr("enqueue");if(!cr(this))throw new TypeError("The stream is not in a state that permits enqueue");return ur(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!rr(this))throw fr("error");sr(this,e)},e.prototype[z]=function(e){_e(this);var t=this._cancelAlgorithm(e);return ir(this),t},e.prototype[L]=function(e){var t=this._controlledReadableStream;if(this._queue.length>0){var r=he(this);this._closeRequested&&0===this._queue.length?(ir(this),Cr(t)):nr(this),e._chunkSteps(r)}else $(t,e),nr(this)},e}();function rr(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof tr}function nr(e){or(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,_(e._pullAlgorithm(),(function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,nr(e))}),(function(t){sr(e,t)}))))}function or(e){var t=e._controlledReadableStream;return!!cr(e)&&!!e._started&&(!!(Er(t)&&X(t)>0)||lr(e)>0)}function ir(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ar(e){if(cr(e)){var t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(ir(e),Cr(t))}}function ur(e,t){if(cr(e)){var r=e._controlledReadableStream;if(Er(r)&&X(r)>0)Z(r,t,!1);else{var n=void 0;try{n=e._strategySizeAlgorithm(t)}catch(t){throw sr(e,t),t}try{be(e,t,n)}catch(t){throw sr(e,t),t}}nr(e)}}function sr(e,t){var r=e._controlledReadableStream;"readable"===r._state&&(_e(e),ir(e),Ar(r,t))}function lr(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function cr(e){var t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function dr(e,t,r,n,o,i,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,_e(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,e._readableStreamController=t,_(p(r()),(function(){t._started=!0,nr(t)}),(function(e){sr(t,e)}))}function fr(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function hr(e,t,r){return x(e,r),function(r){return R(e,t,[r])}}function br(e,t,r){return x(e,r),function(r){return R(e,t,[r])}}function _r(e,t,r){return x(e,r),function(r){return S(e,t,[r])}}function vr(e,t){if("bytes"!=(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function yr(e,t){if("byob"!=(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function mr(e,t){B(e,t);var r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,o=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(t+" is not an AbortSignal.")}(i,t+" has member 'signal' that"),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:i}}Object.defineProperties(tr.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(tr.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var gr=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),void 0===e?e=null:M(e,"First parameter");var r=et(t,"Second parameter"),n=function(e,t){B(e,t);var r=e,n=null==r?void 0:r.autoAllocateChunkSize,o=null==r?void 0:r.cancel,i=null==r?void 0:r.pull,a=null==r?void 0:r.start,u=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===n?void 0:V(n,t+" has member 'autoAllocateChunkSize' that"),cancel:void 0===o?void 0:hr(o,r,t+" has member 'cancel' that"),pull:void 0===i?void 0:br(i,r,t+" has member 'pull' that"),start:void 0===a?void 0:_r(a,r,t+" has member 'start' that"),type:void 0===u?void 0:vr(u,t+" has member 'type' that")}}(e,"First parameter");if(Rr(this),"bytes"===n.type){if(void 0!==r.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,r){var n=Object.create(ye.prototype),o=function(){},i=function(){return p(void 0)},a=function(){return p(void 0)};void 0!==t.start&&(o=function(){return t.start(n)}),void 0!==t.pull&&(i=function(){return t.pull(n)}),void 0!==t.cancel&&(a=function(e){return t.cancel(e)});var u=t.autoAllocateChunkSize;if(0===u)throw new TypeError("autoAllocateChunkSize must be greater than 0");Me(e,n,o,i,a,r,u)}(this,n,Ge(r,0))}else{var o=Je(r);!function(e,t,r,n){var o=Object.create(tr.prototype),i=function(){},a=function(){return p(void 0)},u=function(){return p(void 0)};void 0!==t.start&&(i=function(){return t.start(o)}),void 0!==t.pull&&(a=function(){return t.pull(o)}),void 0!==t.cancel&&(u=function(e){return t.cancel(e)}),dr(e,o,i,a,u,r,n)}(this,n,Ge(r,1),o)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!Tr(this))throw Or("locked");return Er(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),Tr(this)?Er(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):Pr(this,e):h(Or("cancel"))},e.prototype.getReader=function(e){if(void 0===e&&(e=void 0),!Tr(this))throw Or("getReader");return void 0===function(e,t){B(e,t);var r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:yr(r,t+" has member 'mode' that")}}(e,"First parameter").mode?Q(this):He(this)},e.prototype.pipeThrough=function(e,t){if(void 0===t&&(t={}),!Tr(this))throw Or("pipeThrough");D(e,1,"pipeThrough");var r=function(e,t){B(e,t);var r=null==e?void 0:e.readable;K(r,"readable","ReadableWritablePair"),Y(r,t+" has member 'readable' that");var n=null==e?void 0:e.writable;return K(n,"writable","ReadableWritablePair"),at(n,t+" has member 'writable' that"),{readable:r,writable:n}}(e,"First parameter"),n=mr(t,"Second parameter");if(Er(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ft(r.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return g(er(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable},e.prototype.pipeTo=function(e,t){if(void 0===t&&(t={}),!Tr(this))return h(Or("pipeTo"));if(void 0===e)return h("Parameter 1 is required in 'pipeTo'.");if(!dt(e))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var r;try{r=mr(t,"Second parameter")}catch(e){return h(e)}return Er(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ft(e)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):er(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)},e.prototype.tee=function(){if(!Tr(this))throw Or("tee");return ce(function(e,t){return me(e._readableStreamController)?function(e){var t,r,n,o,i,a=Q(e),u=!1,s=!1,l=!1,c=!1,d=!1,h=f((function(e){i=e}));function b(e){y(e._closedPromise,(function(t){e===a&&(Le(n._readableStreamController,t),Le(o._readableStreamController,t),c&&d||i(void 0))}))}function _(){$e(a)&&(C(a),b(a=Q(e))),ne(a,{_chunkSteps:function(t){w((function(){s=!1,l=!1;var r=t,a=t;if(!c&&!d)try{a=pe(t)}catch(t){return Le(n._readableStreamController,t),Le(o._readableStreamController,t),void i(Pr(e,t))}c||ze(n._readableStreamController,r),d||ze(o._readableStreamController,a),u=!1,s?m():l&&g()}))},_closeSteps:function(){u=!1,c||We(n._readableStreamController),d||We(o._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&Be(n._readableStreamController,0),o._readableStreamController._pendingPullIntos.length>0&&Be(o._readableStreamController,0),c&&d||i(void 0)},_errorSteps:function(){u=!1}})}function v(t,r){re(a)&&(C(a),b(a=He(e)));var f=r?o:n,p=r?n:o;Ze(a,t,{_chunkSteps:function(t){w((function(){s=!1,l=!1;var n=r?d:c;if(r?c:d)n||xe(f._readableStreamController,t);else{var o=void 0;try{o=pe(t)}catch(t){return Le(f._readableStreamController,t),Le(p._readableStreamController,t),void i(Pr(e,t))}n||xe(f._readableStreamController,t),ze(p._readableStreamController,o)}u=!1,s?m():l&&g()}))},_closeSteps:function(e){u=!1;var t=r?d:c,n=r?c:d;t||We(f._readableStreamController),n||We(p._readableStreamController),void 0!==e&&(t||xe(f._readableStreamController,e),!n&&p._readableStreamController._pendingPullIntos.length>0&&Be(p._readableStreamController,0)),t&&n||i(void 0)},_errorSteps:function(){u=!1}})}function m(){if(u)return s=!0,p(void 0);u=!0;var e=Ne(n._readableStreamController);return null===e?_():v(e._view,!1),p(void 0)}function g(){if(u)return l=!0,p(void 0);u=!0;var e=Ne(o._readableStreamController);return null===e?_():v(e._view,!0),p(void 0)}function T(){}return n=Sr(T,m,(function(n){if(c=!0,t=n,d){var o=ce([t,r]),a=Pr(e,o);i(a)}return h})),o=Sr(T,g,(function(n){if(d=!0,r=n,c){var o=ce([t,r]),a=Pr(e,o);i(a)}return h})),b(a),[n,o]}(e):function(e){var t,r,n,o,i,a=Q(e),u=!1,s=!1,l=!1,c=!1,d=f((function(e){i=e}));function h(){return u?(s=!0,p(void 0)):(u=!0,ne(a,{_chunkSteps:function(e){w((function(){s=!1;var t=e,r=e;l||ur(n._readableStreamController,t),c||ur(o._readableStreamController,r),u=!1,s&&h()}))},_closeSteps:function(){u=!1,l||ar(n._readableStreamController),c||ar(o._readableStreamController),l&&c||i(void 0)},_errorSteps:function(){u=!1}}),p(void 0))}function v(){}return n=wr(v,h,(function(n){if(l=!0,t=n,c){var o=ce([t,r]),a=Pr(e,o);i(a)}return d})),o=wr(v,h,(function(n){if(c=!0,r=n,l){var o=ce([t,r]),a=Pr(e,o);i(a)}return d})),y(a._closedPromise,(function(e){sr(n._readableStreamController,e),sr(o._readableStreamController,e),l&&c||i(void 0)})),[n,o]}(e)}(this))},e.prototype.values=function(e){if(void 0===e&&(e=void 0),!Tr(this))throw Or("values");var r,n,o,i,a=function(e,t){B(e,"First parameter");var r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e);return this,r=a.preventCancel,n=Q(this),o=new ie(n,r),(i=Object.create(ae))._asyncIteratorImpl=o,i},e}();function wr(e,t,r,n,o){void 0===n&&(n=1),void 0===o&&(o=function(){return 1});var i=Object.create(gr.prototype);return Rr(i),dr(i,Object.create(tr.prototype),e,t,r,n,o),i}function Sr(e,t,r){var n=Object.create(gr.prototype);return Rr(n),Me(n,Object.create(ye.prototype),e,t,r,0,void 0),n}function Rr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Tr(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof gr}function Er(e){return void 0!==e._reader}function Pr(e,t){if(e._disturbed=!0,"closed"===e._state)return p(void 0);if("errored"===e._state)return h(e._storedError);Cr(e);var r=e._reader;return void 0!==r&&$e(r)&&(r._readIntoRequests.forEach((function(e){e._closeSteps(void 0)})),r._readIntoRequests=new T),m(e._readableStreamController[z](t),o)}function Cr(e){e._state="closed";var t=e._reader;void 0!==t&&(j(t),re(t)&&(t._readRequests.forEach((function(e){e._closeSteps()})),t._readRequests=new T))}function Ar(e,t){e._state="errored",e._storedError=t;var r=e._reader;void 0!==r&&(k(r,t),re(r)?(r._readRequests.forEach((function(e){e._errorSteps(t)})),r._readRequests=new T):(r._readIntoRequests.forEach((function(e){e._errorSteps(t)})),r._readIntoRequests=new T))}function Or(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function qr(e,t){B(e,t);var r=null==e?void 0:e.highWaterMark;return K(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:H(r)}}Object.defineProperties(gr.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(gr.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof n.asyncIterator&&Object.defineProperty(gr.prototype,n.asyncIterator,{value:gr.prototype.values,writable:!0,configurable:!0});var kr=function(e){return e.byteLength};try{Object.defineProperty(kr,"name",{value:"size",configurable:!0})}catch(J){}var jr=function(){function e(e){D(e,1,"ByteLengthQueuingStrategy"),e=qr(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Wr(this))throw Ir("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Wr(this))throw Ir("size");return kr},enumerable:!1,configurable:!0}),e}();function Ir(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function Wr(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof jr}Object.defineProperties(jr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(jr.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var zr=function(){return 1};try{Object.defineProperty(zr,"name",{value:"size",configurable:!0})}catch(J){}var Lr=function(){function e(e){D(e,1,"CountQueuingStrategy"),e=qr(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Fr(this))throw Nr("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Fr(this))throw Nr("size");return zr},enumerable:!1,configurable:!0}),e}();function Nr(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function Fr(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Lr}function Br(e,t,r){return x(e,r),function(r){return R(e,t,[r])}}function xr(e,t,r){return x(e,r),function(r){return S(e,t,[r])}}function Mr(e,t,r){return x(e,r),function(r,n){return R(e,t,[r,n])}}Object.defineProperties(Lr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(Lr.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var Dr=function(){function e(e,t,r){void 0===e&&(e={}),void 0===t&&(t={}),void 0===r&&(r={}),void 0===e&&(e=null);var n=et(t,"Second parameter"),o=et(r,"Third parameter"),i=function(e,t){B(e,t);var r=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,o=null==e?void 0:e.start,i=null==e?void 0:e.transform,a=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:Br(r,e,t+" has member 'flush' that"),readableType:n,start:void 0===o?void 0:xr(o,e,t+" has member 'start' that"),transform:void 0===i?void 0:Mr(i,e,t+" has member 'transform' that"),writableType:a}}(e,"First parameter");if(void 0!==i.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==i.writableType)throw new RangeError("Invalid writableType specified");var a,u=Ge(o,0),s=Je(o),l=Ge(n,1),c=Je(n);!function(e,t,r,n,o,i){function a(){return t}e._writable=function(e,t,r,n,o,i){void 0===o&&(o=1),void 0===i&&(i=function(){return 1});var a=Object.create(st.prototype);return ct(a),kt(a,Object.create(Ot.prototype),e,t,r,n,o,i),a}(a,(function(t){return function(e,t){var r=e._transformStreamController;return e._backpressure?m(e._backpressureChangePromise,(function(){var n=e._writable;if("erroring"===n._state)throw n._storedError;return Xr(r,t)})):Xr(r,t)}(e,t)}),(function(){return function(e){var t=e._readable,r=e._transformStreamController,n=r._flushAlgorithm();return $r(r),m(n,(function(){if("errored"===t._state)throw t._storedError;ar(t._readableStreamController)}),(function(r){throw Hr(e,r),t._storedError}))}(e)}),(function(t){return function(e,t){return Hr(e,t),p(void 0)}(e,t)}),r,n),e._readable=wr(a,(function(){return function(e){return Vr(e,!1),e._backpressureChangePromise}(e)}),(function(t){return Ur(e,t),p(void 0)}),o,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Vr(e,!0),e._transformStreamController=void 0}(this,f((function(e){a=e})),l,c,u,s),function(e,t){var r=Object.create(Yr.prototype),n=function(e){try{return Zr(r,e),p(void 0)}catch(e){return h(e)}},o=function(){return p(void 0)};void 0!==t.transform&&(n=function(e){return t.transform(e,r)}),void 0!==t.flush&&(o=function(){return t.flush(r)}),function(e,t,r,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=n}(e,r,n,o)}(this,i),void 0!==i.start?a(i.start(this._transformStreamController)):a(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!Kr(this))throw Jr("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!Kr(this))throw Jr("writable");return this._writable},enumerable:!1,configurable:!0}),e}();function Kr(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Dr}function Hr(e,t){sr(e._readable._readableStreamController,t),Ur(e,t)}function Ur(e,t){$r(e._transformStreamController),zt(e._writable._writableStreamController,t),e._backpressure&&Vr(e,!1)}function Vr(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=f((function(t){e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Dr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(Dr.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});var Yr=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Qr(this))throw Gr("desiredSize");return lr(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(e){if(void 0===e&&(e=void 0),!Qr(this))throw Gr("enqueue");Zr(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!Qr(this))throw Gr("error");var t;t=e,Hr(this._controlledTransformStream,t)},e.prototype.terminate=function(){if(!Qr(this))throw Gr("terminate");!function(e){var t=e._controlledTransformStream;ar(t._readable._readableStreamController),Ur(t,new TypeError("TransformStream terminated"))}(this)},e}();function Qr(e){return!!a(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Yr}function $r(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Zr(e,t){var r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!cr(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{ur(n,t)}catch(e){throw Ur(r,e),r._readable._storedError}var o=function(e){return!or(e)}(n);o!==r._backpressure&&Vr(r,!0)}function Xr(e,t){return m(e._transformAlgorithm(t),void 0,(function(t){throw Hr(e._controlledTransformStream,t),t}))}function Gr(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function Jr(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}Object.defineProperties(Yr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof n.toStringTag&&Object.defineProperty(Yr.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0})}}]);