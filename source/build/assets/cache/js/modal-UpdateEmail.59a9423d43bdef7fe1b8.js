"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[1232],{"1EyH":(e,r,t)=>{t.d(r,{BB:()=>s,Sx:()=>a,UC:()=>n});const a=e=>/[\u2000-\u2BFF]/.test(e),s=e=>/[\u{10000}-\u{10FFFF}]/u.test(e),n=e=>!!e.match(/^[_0-9a-z-+]+[_.0-9a-z-+]*@([0-9a-z-]+\.)+[a-z]{2,13}$/i)},"5U+Y":(e,r,t)=>{t.d(r,{D3:()=>l,D6:()=>n,K9:()=>s,d0:()=>o,fB:()=>i,wz:()=>a});const a=8,s=50,n=2,o=50,i=16,l=150},CdHq:(e,r,t)=>{t.d(r,{s:()=>o});var a=t("nKUr"),s=t("xi32"),n=t("D9nb");const o=(0,s.R)((function(e,r){const{direction:t,align:s,justify:o,wrap:i,basis:l,grow:_,shrink:c,...m}=e,d={display:"flex",flexDirection:t,alignItems:s,justifyContent:o,flexWrap:i,flexBasis:l,flexGrow:_,flexShrink:c};return(0,a.jsx)(n.B.div,{ref:r,__css:d,...m})}));o.displayName="Flex"},EYlq:(e,r,t)=>{t.d(r,{u:()=>s});var a=t("Wp0Y");const s=e=>{switch(e){case"invalid_msisdn":return(0,a.AP)("errormessage_text_invalidphonenumber_web");case"sms_login_limit":return(0,a.AP)("SMScoderesentconfirmationscreen_text_allattemptsused_web");case"internal_error":case"swap_limit":default:return(0,a.AP)("errormessage_text_anerroroccurredpleasetryagain_web");case"invalid_code":case"invalid_code_wrong":return(0,a.AP)("errormessage_text_invalidcode_web");case"code_too_short":return(0,a.AP)("errormessage_text_codeincomplete_web");case"code_too_long":return(0,a.AP)("errormessage_text_codetoomanydigits_web");case"phone_already_used":return(0,a.AP)("Ce numéro est déjà utilisé.")}}},Fzox:(e,r,t)=>{t.d(r,{G:()=>n,j:()=>s});var a=t("TRpf");const s=()=>(0,a.wA)(),n=a.d4},H9G8:(e,r,t)=>{t.d(r,{CZ:()=>c,Ee:()=>m,Hf:()=>i,In:()=>E,RQ:()=>d,SY:()=>l,U9:()=>u,aS:()=>A,jQ:()=>o,qb:()=>_,r_:()=>R,vM:()=>O});var a=t("Wp0Y"),s=t("5U+Y"),n=t("guCc");class o extends Error{constructor(e){super(e),this.name=n.U.FORM_ERROR}}class i extends o{constructor(){super((0,a.AP)("formerrormessage_text_emailaddressformatnotvalid_web")),this.name=n.U.EMAIL_NOT_VALID}}class l extends o{constructor(e){super((0,a.AP)("errormessage_text_domainnnamenotallowed_web",{sprintf:[e]})),this.name=n.U.EMAIL_DOMAIN_NOT_VALID}}class _ extends o{constructor(){super((0,a.AP)("errormessage_title_accountalrdyassociatedwithemail_web")),this.name=n.U.EMAIL_ALREADY_USED}}class c extends o{constructor(){super((0,a.WI)("formerrormessage_text_passwordnotenoughchars_web","formerrormessage_text_passwordnotenoughchars_web",{sprintf:[s.wz],count:s.wz})),this.name=n.U.PASSWORD_TOO_SHORT}}class m extends o{constructor(){super((0,a.WI)("formerrormessage_text_passwordtoomanychars_web","formerrormessage_text_passwordtoomanychars_web",{sprintf:[s.K9],count:s.K9})),this.name=n.U.PASSWORD_TOO_LONG}}class d extends o{constructor(){super((0,a.AP)("errormessage_text_passwordnbeginendwithspace_web")),this.name=n.U.PASSWORD_HAS_TRAILLING_WHITESPACE}}class u extends o{constructor(){super((0,a.WI)("formerrormessage_text_usernamenotenoughchars_web","formerrormessage_text_usernamenotenoughchars_web",{sprintf:[s.D6],count:s.D6})),this.name=n.U.BLOGNAME_TOO_SHORT}}class A extends o{constructor(){super((0,a.WI)("formerrormessage_text_usernametoomanychars_web","formerrormessage_text_usernametoomanychars_web",{sprintf:[s.d0],count:s.d0})),this.name=n.U.BLOGNAME_TOO_LONG}}class E extends o{constructor(){super((0,a.AP)("errormessage_text_usernamecannotcontainsemojis_web")),this.name=n.U.BLOGNAME_HAS_SPECIAL_CHARS}}class R extends o{constructor(e){super((0,a.WI)("agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web","agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web",{sprintf:[e],count:e})),this.name=n.U.MIN_LEGAL_AGE}}class O extends o{constructor(){super((0,a.AP)("errormessage_text_ageisinvalid_web")),this.name=n.U.AGE_INVALID}}},JPzp:(e,r,t)=>{t.d(r,{d:()=>s}),t("/eM8");var a=t("nrKQ");const s=e=>new Promise(((r,t)=>{a.A.call({method:"userAuth.loginByArl",data:{ARL:e},success:r,error:t})}))},TDRX:(e,r,t)=>{t.d(r,{a:()=>a});const a=(0,t("D9nb").B)("div");a.displayName="Box"},X5lq:(e,r,t)=>{t.d(r,{u:()=>s});var a=t("nKUr");const s=(0,t("B5i/").w)({displayName:"InformationIcon",viewBox:"0 0 24 24",pathSmall:[(0,a.jsx)("path",{d:"M13 9c0-.335-.073-.575-.218-.735C12.616 8.08 12.354 8 12 8c-.357 0-.617.084-.782.268-.146.163-.218.403-.218.732 0 .36.082.61.248.77.166.16.416.23.752.23.368 0 .634-.106.799-.31.134-.166.201-.397.201-.69Zm-1.66 7h1.33v-4.67h-1.33V16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 20c5.137 0 8-2.863 8-8 0-5.137-2.863-8-8-8-5.137 0-8 2.863-8 8 0 5.137 2.863 8 8 8Zm0-14.667c4.424 0 6.667 2.243 6.667 6.667 0 4.424-2.243 6.667-6.667 6.667-4.424 0-6.667-2.243-6.667-6.667 0-4.424 2.243-6.667 6.667-6.667Z",clipRule:"evenodd"})],pathMedium:[(0,a.jsx)("path",{d:"M13.5 7.5c0-.503-.11-.862-.327-1.103C12.923 6.12 12.531 6 12 6c-.536 0-.925.126-1.173.403-.219.243-.327.604-.327 1.097 0 .54.123.914.372 1.154.249.24.624.346 1.128.346.552 0 .952-.159 1.199-.465.2-.249.301-.596.301-1.035ZM11 11v7h2v-7h-2Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 23c7.064 0 11-3.936 11-11S19.064 1 12 1 1 4.936 1 12s3.936 11 11 11Zm0-20c5.972 0 9 3.028 9 9 0 5.972-3.028 9-9 9-5.972 0-9-3.028-9-9 0-5.972 3.028-9 9-9Z",clipRule:"evenodd"})]});s.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"InformationIcon"}},XuBo:(e,r,t)=>{t.d(r,{cx:()=>a});const a=(...e)=>e.filter(Boolean).join(" ")},ZUSG:(e,r,t)=>{t.d(r,{r:()=>s});var a=t("nKUr");const s=(0,t("B5i/").w)({displayName:"PenIcon",viewBox:"0 0 24 24",pathSmall:[(0,a.jsx)("path",{fillRule:"evenodd",d:"m12.833 4 5.55 9.617c.775 1.343.6 6.383.6 6.383s-4.593-2.583-5.24-3.704l-5.55-9.617L12.833 4Zm-.49 1.83-2.321 1.34 1.246 2.159 2.32-1.34-1.245-2.16Zm-.405 4.66 2.964 5.136c.245.354 1.405 1.177 2.745 2.02-.051-1.624-.211-2.99-.424-3.36L14.258 9.15l-2.32 1.34ZM6.5 19.963a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",clipRule:"evenodd"})],pathMedium:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M20.818 13.242 13.678.854l-6.928 4 7.14 12.388c.966 1.675 7.825 5.531 7.825 5.531s.26-7.526-.897-9.53ZM9.481 5.587l3.464-2 1.838 3.188-3.465 2-1.837-3.188Zm6.141 10.657-3.305-5.735 3.464-2 3.305 5.733c.318.551.556 2.59.633 5.015-2-1.257-3.732-2.487-4.097-3.013ZM11 19c-.67 0-1.15.146-1.47.436-.37.333-.53.856-.53 1.564 0 .714.168 1.234.537 1.564.325.292.805.436 1.463.436.719 0 1.219-.164 1.54-.496.32-.332.46-.832.46-1.504 0-.736-.211-1.269-.62-1.598-.332-.268-.795-.402-1.38-.402Zm-8.47.436c.32-.29.8-.436 1.47-.436.585 0 1.048.134 1.38.402.409.33.62.861.62 1.598 0 .672-.14 1.172-.46 1.504-.321.332-.821.496-1.54.496-.658 0-1.138-.144-1.463-.436C2.168 22.234 2 21.714 2 21c0-.708.16-1.231.53-1.564Z",clipRule:"evenodd"})]});s.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"PenIcon"}},guCc:(e,r,t)=>{t.d(r,{U:()=>a,m:()=>s});let a=function(e){return e.AGE_INVALID="FORM_ERROR_AGE_INVALID",e.BLOGNAME_HAS_SPECIAL_CHARS="FORM_ERROR_BLOGNAME_HAS_SPECIAL_CHARS",e.BLOGNAME_TOO_LONG="FORM_ERROR_BLOGNAME_TOO_LONG",e.BLOGNAME_TOO_SHORT="FORM_ERROR_BLOGNAME_TOO_SHORT",e.EMAIL_ALREADY_USED="FORM_ERROR_EMAIL_ALREADY_USED",e.EMAIL_DOMAIN_NOT_VALID="FORM_ERROR_EMAIL_DOMAIN_NOT_VALID",e.EMAIL_NOT_VALID="FORM_ERROR_EMAIL_NOT_VALID",e.FORM_ERROR="FORM_ERROR",e.MIN_LEGAL_AGE="FORM_ERROR_MIN_LEGAL_AGE",e.PASSWORD_HAS_TRAILLING_WHITESPACE="FORM_ERROR_PASSWORD_HAS_TRAILLING_WHITESPACE",e.PASSWORD_TOO_LONG="FORM_ERROR_PASSWORD_TOO_LONG",e.PASSWORD_TOO_SHORT="FORM_ERROR_PASSWORD_TOO_SHORT",e}({}),s=function(e){return e[e.TOO_WEAK=0]="TOO_WEAK",e[e.WEAK=1]="WEAK",e[e.MEDIUM=2]="MEDIUM",e[e.STRONG=3]="STRONG",e}({})},pVdW:(e,r,t)=>{t.d(r,{E:()=>c});var a=t("nKUr"),s=t("p1Zg"),n=t("x81U"),o=t("8EFB"),i=t("xi32"),l=t("JFGw"),_=t("D9nb");const c=(0,i.R)((function(e,r){const t=(0,l.V)("Text",e),{className:i,align:c,decoration:m,casing:d,...u}=(0,s.M)(e),A=(0,n.o)({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,a.jsx)(_.B.p,{ref:r,className:(0,o.cx)("chakra-text",e.className),...A,...u,__css:t})}));c.displayName="Text"},tjLx:(e,r,t)=>{t.r(r),t.d(r,{default:()=>b}),t("/eM8");var a,s,n=t("q1tI"),o=t("TRpf"),i=t("H9G8"),l=t("TqF5"),_=t("zerP"),c=t("Wp0Y"),m=t("nrKQ"),d=t("H/eQ"),u=t("JPzp"),A=t("XkdG"),E=t("HmE0"),R=t("Zlrv"),O=t("go2a"),f=t("Swh8"),p=t("YIja"),g=t("jysG"),w=t("80JK"),M=t("8WIx"),h=t("CV49"),x=t("FVVF"),I=t("y7xR"),S=t("IZLt"),v=t("Fzox"),L=t("xobL"),y=t("ZUSG");const N={email:"",emailConfirm:"",emailConfirmErrorMessage:"",emailErrorMessage:"",error:"",loading:!1},T=(0,c.AP)("errormessage_text_anerroroccurredpleasetryagain_web");function D(e,r){switch(r.type){case"UPDATE_EMAIL":return{...e,email:r.email};case"UPDATE_EMAIL_CONFIRM":return{...e,emailConfirm:r.emailConfirm};case"SUBMIT":return{...e,emailConfirmErrorMessage:"",emailErrorMessage:"",error:"",loading:!0};case"FORM_ERROR_ACTION":{const t={...e,loading:!1};return r.errorEmail&&(t.emailErrorMessage=r.errorEmail),r.errorEmailConfirm&&(t.emailConfirmErrorMessage=r.errorEmailConfirm),r.error&&(t.error=r.error),t}default:return e}}function b({children:e}){const r=(0,v.G)((({user:e})=>(0,L.qo)(e))),[t,b]=(0,n.useReducer)(D,{...N,email:r}),C=(0,o.wA)();return n.createElement("form",null,a||(a=n.createElement(R.s_,null)),n.createElement(h.c,null,n.createElement(x.T,{spacing:"spacing.m",alignItems:"flex-start"},n.createElement(I.D,{variant:"heading.l"},(0,c.AP)("Modification de votre email")),e,n.createElement(w.MJ,{isInvalid:Boolean(t.emailErrorMessage)},n.createElement(M.l,null,(0,c.AP)("formfield_title_modifyemailaddress_web")),n.createElement(O.M,null,n.createElement(A.p,{defaultValue:r,"data-testid":"new_email",value:t.email,type:"email",onChange:e=>b({type:"UPDATE_EMAIL",email:e.target.value})}),s||(s=n.createElement(f.t,null,n.createElement(y.r,{color:"icon.neutral.secondary.default"})))),n.createElement(g.Wt,null,t.emailErrorMessage)),n.createElement(w.MJ,{isInvalid:Boolean(t.emailConfirmErrorMessage)},n.createElement(M.l,null,(0,c.AP)("formfield_title_confirmemailaddress_web")),n.createElement(A.p,{"data-testid":"new_email_confirmation",value:t.emailConfirm,type:"email",onChange:e=>b({type:"UPDATE_EMAIL_CONFIRM",emailConfirm:e.target.value})}),n.createElement(g.Wt,null,t.emailConfirmErrorMessage)),t.error&&n.createElement(p.N,{status:"error"},t.error))),n.createElement(R.jl,null,n.createElement(E.$n,{type:"submit",onClick:async function(e){var r;if(e.preventDefault(),b({type:"SUBMIT"}),t.email===t.emailConfirm)try{await(0,_.A$)(t.email,!1);const e=await m.A.callAsync({method:"deezer.updateEmail",data:{email:t.email}});if(e)return await(0,u.d)(e.arl),d.A.trigger(d.A.user.updateEmail,{email:t.email}),void C((0,l.Oo)());b({type:"FORM_ERROR_ACTION",error:T})}catch(e){var a,s,n;if(e instanceof i.jQ)return b({type:"FORM_ERROR_ACTION",errorEmail:e.message});new S.A({error:null!==(a=null!==(s=null==e?void 0:e.message)&&void 0!==s?s:null==e||null===(n=e.response)||void 0===n?void 0:n.error[null==e?void 0:e.name])&&void 0!==a?a:null==e?void 0:e.name,journey_type:"update-email",gateway_method:"deezer.updateEmail",server_payload:null==e?void 0:e.response}).send(),b({type:"FORM_ERROR_ACTION",error:(r=e,r&&r.response&&r.response.error&&r.name&&"Session not secured"===r.response.error[r.name]?(0,c.AP)("errormessage_text_codetimedoutrequestnewcode_web"):T)})}else b({type:"FORM_ERROR_ACTION",errorEmail:"",errorEmailConfirm:(0,c.AP)("Vos adresses email ne correspondent pas. Veuillez réessayer.")})},isDisabled:t.loading,isLoading:t.loading,"data-testid":"new_email_save_button"},(0,c.AP)("invalidemailpopin_action_modifymyemail_web"))))}},y7xR:(e,r,t)=>{t.d(r,{D:()=>_});var a=t("nKUr"),s=t("p1Zg"),n=t("8EFB"),o=t("xi32"),i=t("JFGw"),l=t("D9nb");const _=(0,o.R)((function(e,r){const t=(0,i.V)("Heading",e),{className:o,..._}=(0,s.M)(e);return(0,a.jsx)(l.B.h2,{ref:r,className:(0,n.cx)("chakra-heading",e.className),..._,__css:t})}));_.displayName="Heading"},zerP:(e,r,t)=>{t.d(r,{$O:()=>E,A$:()=>c,BE:()=>u,Hx:()=>R,PJ:()=>m,iE:()=>A,sR:()=>d}),t("WpbS"),t("/eM8");var a=t("nrKQ"),s=t("1EyH"),n=t("kSUS"),o=t("guCc"),i=t("H9G8"),l=t("5U+Y"),_=t("EYlq");const c=async(e,r=!1)=>{if(e=e.trim(),!(0,s.UC)(e))throw new i.Hf;const t=await a.A.callAsync({method:"deezer.emailCheck",data:{EMAIL:e}});if(!t.domain_validity)throw new i.SY(t.domain);if(t.availability)return r&&t.suggestion?{success:!0,suggestion:t.suggestion}:{success:!0};throw new i.qb},m=(0,n.A)(((e,r,t,a)=>c(e,r).then(t).catch(a)),400),d=e=>{const r=[/.*[A-Z]+.*/,/.*[a-z]+.*/,/.*[0-9]+.*/,/.*[^A-Za-z0-9]+.*/];if([/.*[0-9]+.*/,/.*[a-zA-Z]+.*/,/^.{8,}$/].reduce(((r,t)=>r&&t.test(e)),!0)){const t=r.reduce(((r,t)=>r+(t.test(e)?1:0)),0);return t>3?o.m.STRONG:t>2?o.m.MEDIUM:t>1?o.m.WEAK:o.m.TOO_WEAK}return o.m.TOO_WEAK},u=e=>{if(e!==e.trim())throw new i.RQ;if(e.length>l.K9)throw new i.Ee;if(e.length<l.wz)throw new i.CZ;return!0},A=e=>{if((e=e.trim()).length<l.D6)throw new i.U9;if(e.length>l.d0)throw new i.aS;if((0,s.Sx)(e)||(0,s.BB)(e))throw new i.In;return!0},E=e=>{if("string"==typeof e){if(!/^\d+$/.test(e.toString()))throw new i.vM;e=parseInt(e,10)}if(e<l.fB)throw new i.r_(l.fB);if(e>l.D3)throw new i.vM;return!0},R=e=>{if(0===e.length)throw new i.jQ((0,_.u)("invalid_code"));if(e.length<6)throw new i.jQ((0,_.u)("code_too_short"));if(e.length>6)throw new i.jQ((0,_.u)("code_too_long"));return!0}}}]);