"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[7827],{"iyH+":(e,t,i)=>{i.d(t,{$:()=>W,A:()=>j}),i("/eM8"),i("Dk60");var a=i("q1tI"),o=i("TRpf"),s=i("X6oL"),r=i("juqV"),n=i("HmE0"),l=i("TDRX"),_=i("Tyyv"),c=i("u7vQ"),d=i("fJgm"),u=i("nrKQ");const p=e=>e?{id:e.ID,t:e.TYPE}:{},h_follow=(e,t)=>new Promise(((i,a)=>{u.A.call({method:"friend.follow",data:{friend_id:e,ctxt:p(t)},success:()=>i(),error:a})})),h_unfollow=(e,t)=>new Promise(((i,a)=>{u.A.call({method:"friend.unfollow",data:{friend_id:e,ctxt:p(t)},success:()=>i(),error:a})}));var y,A,f=i("o+h5"),P=i("4Rw2"),m=i("TYt9"),v=i("GkgI"),g=i("Vynx"),b=i("tZCQ"),E=i("OPhi"),w=i("shsj"),L=i("AfN5"),k=i("dShs"),C=i("tew7"),S=i("WN1e"),F=i("gtRZ"),O=i("//u0"),T=i("7bxg"),H=i("P4bz"),I=i("eTJY"),x=i("lASK"),N=i("cFUB"),R=i("5G9X"),D=i("h8EF");const M={[N.Hj.PLAY]:{default:k.S,active:k.S,hover:C.I,resume:k.S},[N.Hj.PLAY_SMALL]:{default:k.S,active:k.S,hover:C.I,resume:k.S},[N.Hj.SHUFFLE]:{default:S.R,active:S.R,hover:C.I,resume:S.R},[N.Hj.FAVORITE]:{default:F.M,active:O.C,hover:T.w,default_user:H.H,active_user:I.S,hover_user:T.w},[N.Hj.FOLLOW]:{default:H.H,active:I.S,hover:T.w},[N.Hj.DOWNLOAD]:{default:x.m,active:I.S,hover:T.w}};let W=(0,s.Ay)()(((A=class extends a.Component{constructor(e){super(e),this.state={hover:!1,loading:!1},this._onClick=this._onClick.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onPlayClick=this._onPlayClick.bind(this),this._onShuffleClick=this._onShuffleClick.bind(this),this._onFavoriteClick=this._onFavoriteClick.bind(this),this._onDownloadClick=this._onDownloadClick.bind(this)}render(){const{type:e,action:t,color:i,size:o,disabled:s,className:_}=this.props;if(!b.A.isAllowed("talk")&&e===R.Ay.Show&&t===N.Hj.FAVORITE)return null;const c=this._getStatus(),d=this._renderIcon(c);return o===N.eH.LINK?a.createElement("button",{className:(0,r.A)("btn","btn-link",_),onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,type:"button"},this._renderContent(c)):[N.Hj.DOWNLOAD,N.Hj.FAVORITE,N.Hj.PLAY_SMALL].includes(t)&&d?a.createElement(n.K0,{colorScheme:i,icon:d,isDisabled:s,onClick:this._onClick,variant:this._isPlayButton()?"contain":"ghost",onMouseEnter:t===N.Hj.FAVORITE?void 0:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"aria-label":this._getWording(c),"data-testid":`${e}-${t}-button`}):a.createElement(n.$n,{colorScheme:i,leftIcon:d||void 0,isDisabled:s,width:o===N.eH.BLOCK?"full":"auto",onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"aria-label":this._getWording(c),"data-testid":`${e}-${t}-button`},a.createElement(l.a,{fontFamily:"body"},this._renderContent(c)))}_renderContent(e){const{action:t,size:i}=this.props,o=[N.bZ.DEFAULT,N.bZ.ACTIVE,N.bZ.HOVER];return(t===N.Hj.SHUFFLE||this._isPlayButton())&&o.push(N.bZ.RESUME),o.map((t=>{const o=(0,r.A)("states-button-action",{"is-active":t===e}),s=(0,r.A)("states-button-label",{label:i===N.eH.LINK});return a.createElement("div",{className:o,key:t},a.createElement("span",{className:s},this._getWording(t)))}))}_renderIcon(e){const{action:t,color:i}=this.props;if((t===N.Hj.SHUFFLE||this._isPlayButton())&&(e===N.bZ.ACTIVE||e===N.bZ.HOVER))return a.createElement(_.r,{size:"medium",isPaused:e===N.bZ.HOVER,color:"primary"===i?"white":void 0});const{type:o,isPersisted:s}=this.props,n=`${e}${o===R.Ay.User&&t===N.Hj.FAVORITE?"_user":""}`;if(M[t]&&M[t][n]){const o=M[t]&&M[t][n];return a.createElement(o,{className:(0,r.A)({"color-primary":e===N.bZ.ACTIVE&&i!==N.cW.PRIMARY,"color-download":t===N.Hj.DOWNLOAD&&s&&e!==N.bZ.HOVER})})}return null}_onClick(){const{disabled:e,action:t,onClick:i}=this.props,{loading:a}=this.state;if(!e&&!a){if(i)return i(),void this._trackClick();this.setState({loading:!0}),this._handleAction(t).then((()=>{this._trackClick(),this.props.onToggleState&&this.props.onToggleState()})).finally((()=>{this.setState({loading:!1})}))}}_onFollowClick(){return this.props.isFollowed?h_unfollow(String(this.props.id),this.props.context):h_follow(String(this.props.id),this.props.context)}_onMouseEnter(){this.setState({hover:!0})}_onMouseLeave(){this.setState({hover:!1})}_onPlayClick(){return new Promise((e=>{const{context:t,dzPlayerOptions:i,id:a,items:o,type:s}=this.props;if(!c.Ay.hasAudioAds||c.Ay.getPlayerType()!==L.Cc.ADS&&c.Ay.getPlayerType()!==L.Cc.TRITON_AD){if(this._hasSameContext())return g.A.intent((0,m.G)(c.Ay)),c.Ay.control.togglePause(),void e();g.A.intent("play"),c.Ay.play({...i,context:t,data:o,id:a,radio:(null==i?void 0:i.radio)||"artist_smartradio"===t.TYPE||"profile_user_radio"===t.TYPE,type:s}),e()}}))}_onShuffleClick(){return new Promise((e=>{const{context:t,dzPlayerOptions:i,id:a,items:o}=this.props;if(this._hasSameContext())return g.A.intent((0,m.G)(c.Ay)),c.Ay.control.togglePause(),void e();g.A.intent("play"),c.Ay.play({...i,context:t,data:o,id:a,radio:!1,type:t.TYPE}),e()}))}_onFavoriteClick(){return new Promise((e=>{const{id:t,type:i,context:a}=this.props;d.A.toggle({id:t,type:i,context:a}),e()}))}_onDownloadClick(){const{id:e,type:t,isPersisted:i,currentAudioQuality:a,addToCache:o,removeFromCache:s}=this.props,r={id:e.toString(),type:t===L.Kk.PERSONAL_LOVED?f.qy:t,context:{}};return i?s({entity:r}):o({entity:r,quality:a})}_handleAction(e){switch(e){case N.Hj.PLAY:case N.Hj.PLAY_SMALL:return this._onPlayClick();case N.Hj.SHUFFLE:return this._onShuffleClick();case N.Hj.FAVORITE:return this._onFavoriteClick();case N.Hj.FOLLOW:return this._onFollowClick();case N.Hj.DOWNLOAD:return this._onDownloadClick();default:return Promise.resolve()}}_getStatus(){const{action:e,isFavorite:t,isPersisted:i,isPlayerPlaying:a,isPlayerPaused:o}=this.props;let s=N.bZ.DEFAULT;return e===N.Hj.FAVORITE&&t||e===N.Hj.FOLLOW&&this.props.isFollowed||e===N.Hj.DOWNLOAD&&i?s=N.bZ.ACTIVE:(this._isPlayButton()||e===N.Hj.SHUFFLE)&&this._hasSameContext()&&(o?s=N.bZ.RESUME:a&&(s=N.bZ.ACTIVE)),s===N.bZ.ACTIVE&&this.state.hover&&(s=N.bZ.HOVER),s}_hasSameContext(){const{context:e,currentPlayerContext:t}=this.props;return(0,P.T)(t)&&(0,P.c)(e,t)}_getWording(e){const{wordingType:t,action:i,type:a}=this.props;return t===N.Hn.NONE?"":(0,v.b)({action:i,type:a,wording:t},e)}_trackClick(){const{type:e,action:t,isPlayerPlaying:i,isPlayerPaused:a,isFavorite:o}=this.props;let s=t;t===N.Hj.FAVORITE&&(s=o?"dislike":"like");const r=window.location.pathname.split("/");if(r.includes("profile")&&(!i||a)){const e=this._isPlayButton()?"direct_play":t===N.Hj.SHUFFLE?"shuffle":null;if(!e)return;const i=Object.keys(D.bv),a=r[r.length-1],o=i.includes(a)?a:"home";(0,D.h4)({action:D.dJ.PLAY_CLICKED,payload:{path:o,play_type:e}})}if(!this.props.tracking||this._isPlayButton()&&(i||a))return;const n=this.props.tracking.getTrackingData(),l=n.pagecategory||n.pagename;l&&this.props.tracking.trackEvent({eventaction:`click-${s}-${e}`,event:"click",eventcategory:l,eventlabel:`${s}-${e}`})}_isPlayButton(){return this.props.action===N.Hj.PLAY||this.props.action===N.Hj.PLAY_SMALL}}).defaultProps={color:N.cW.DEFAULT,items:[],wordingType:N.Hn.STANDARD,size:N.eH.EMPTY,disabled:!1,isFollowed:!1,iconSize:"medium"},y=A))||y;const j=(0,o.Ng)((({cache:e,user:t,feedbacks:i,player:a},o)=>{const s={id:o.id,type:o.type===L.Kk.PERSONAL_LOVED?f.qy:o.type};return{isFavorite:(0,E.BA)(i,String(o.id),o.type),isPersisted:(0,w._B)(e,s),currentAudioQuality:t.currentAudioQuality,currentPlayerContext:(0,P.T)(a.music.context)?a.music.context:null,isPlayerPlaying:a.control.playing,isPlayerPaused:a.control.paused}}))(W)},"0oT0":(e,t,i)=>{i.d(t,{A:()=>r});var a=i("q1tI"),o=i("iyH+"),s=i("M31W");const r=e=>{const t={...e,...(0,s.$)()};return a.createElement(o.A,t)}},cFUB:(e,t,i)=>{i.d(t,{Hj:()=>a,Hn:()=>r,bZ:()=>n,cW:()=>s,eH:()=>o});let a=function(e){return e.DOWNLOAD="download",e.FAVORITE="favorite",e.PLAY="play",e.PLAY_SMALL="play_small",e.SHUFFLE="shuffle",e.FOLLOW="follow",e}({}),o=function(e){return e.BLOCK="block",e.EMPTY="",e.LINK="link",e}({}),s=function(e){return e.DEFAULT="neutral",e.PRIMARY="primary",e.LIGHT="white",e}({}),r=function(e){return e.FULL="full",e.NONE="none",e.STANDARD="standard",e}({}),n=function(e){return e.ACTIVE="active",e.DEFAULT="default",e.HOVER="hover",e.RESUME="resume",e}({})},GkgI:(e,t,i)=>{i.d(t,{b:()=>n});var a=i("Wp0Y");let o={},s=!1;const r=()=>{o={full:{active:(0,a.AP)("successmessage_text_addedtoyourfavorites_web"),active_favorite_friend:(0,a.AP)("Suivi"),active_favorite_song:(0,a.AP)("successmessage_text_addedtoyourfavorites_web"),active_play:(0,a.AP)("À l'écoute"),active_play_artist:(0,a.AP)("Mix"),active_play_user:(0,a.AP)("FLOW"),active_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),add:(0,a.AP)("contextualmenu_text_addtomyfavorites_web"),add_favorite_friend:(0,a.AP)("Suivre"),add_favorite_song:(0,a.AP)("Ajouter aux Coups de cœur"),add_dislike_song:(0,a.AP)("bantrack_action_dontrecommendthistrack_web"),add_dislike_artist:(0,a.AP)("banartist_action_dontrecommendthisartist_web"),add_play:(0,a.AP)("Écouter"),add_play_artist:(0,a.AP)("Mix"),add_play_user:(0,a.AP)("FLOW"),add_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),default:(0,a.AP)("contextualmenu_text_addtomyfavorites_web"),default_favorite_friend:(0,a.AP)("Suivre"),default_favorite_song:(0,a.AP)("Ajouter aux Coups de cœur"),default_dislike_song:(0,a.AP)("bantrack_action_dontrecommendthistrack_web"),default_dislike_artist:(0,a.AP)("banartist_action_dontrecommendthisartist_web"),default_play:(0,a.AP)("Écouter"),default_play_artist:(0,a.AP)("Mix"),default_play_user:(0,a.AP)("FLOW"),default_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),hover:(0,a.AP)("contextualmenu_text_deletefrommyfavorites_web"),hover_favorite_app:(0,a.AP)("Retirer de ma bibliothèque"),hover_favorite_friend:(0,a.AP)("Ne plus suivre"),hover_favorite_song:(0,a.AP)("Retirer des Coups de cœur"),hover_dislike_song:(0,a.AP)("banartist_action_allowinmyrecommendations_web"),hover_dislike_artist:(0,a.AP)("banartist_action_allowinmyrecommendations_web"),hover_play:(0,a.AP)("Pause"),hover_play_artist:(0,a.AP)("Mix"),hover_play_user:(0,a.AP)("FLOW"),hover_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),paused_play:(0,a.AP)("Pause"),paused_play_artist:(0,a.AP)("Mix"),paused_play_user:(0,a.AP)("FLOW"),paused_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web"),resume_play:(0,a.AP)("Reprendre"),resume_play_artist:(0,a.AP)("Mix"),resume_play_user:(0,a.AP)("FLOW"),resume_shuffle_user:(0,a.AP)("favoritestab_action_shufflemymusic_web")},standard:{active:(0,a.AP)("Ajouté"),add:(0,a.AP)("generic_action_add_web"),default:(0,a.AP)("generic_action_add_web"),default_play_small:(0,a.AP)("Écouter"),hover_play_small:(0,a.AP)("Pause"),paused_play_small:(0,a.AP)("Pause"),resume_play_small:(0,a.AP)("Reprendre"),active_play_small:(0,a.AP)("À l'écoute"),hover:(0,a.AP)("Retirer"),active_follow_user:(0,a.AP)("Suivi"),add_follow_user:(0,a.AP)("Suivre"),default_follow_user:(0,a.AP)("Suivre"),hover_follow_user:(0,a.AP)("Ne plus suivre"),default_download:(0,a.AP)("Télécharger"),active_download:(0,a.AP)("Téléchargé"),hover_download:(0,a.AP)("Retirer")}}};function n(e,t,i){!1===s&&(r(),s=!0);var a=i||e.wording;return"none"===a?"":o[a][t+"_"+e.action+"_"+e.type]?o[a][t+"_"+e.action+"_"+e.type]:o[a][t+"_"+e.action]?o[a][t+"_"+e.action]:o[a][t]}},"4Rw2":(e,t,i)=>{i.d(t,{T:()=>o,c:()=>s});const a=i("Vd8Q").default.get("log_contexts"),o=e=>null!=e&&("number"==typeof e.ID||"string"==typeof e.ID)&&"string"==typeof e.TYPE,s=(e,t)=>String(e.ID)===String(t.ID)&&a[e.TYPE]===a[t.TYPE]},"p/gB":(e,t,i)=>{i.d(t,{Sx:()=>k,vs:()=>g,yh:()=>E,Pe:()=>m,Us:()=>v,C3:()=>b,Bc:()=>L,kv:()=>w});var a=i("5G9X"),o=i("AY3M");const s={[o.E4]:"artist_highlight_album",[o.pN]:"dynamic_page_album",[o.x6]:"album_page",[o.qI]:"recently_played_album",[o.LF]:"landing_facebook",[o.z6]:"profile_albums",[o.WP]:"search_album",[o._v]:"search_top_album"},r={[o.pN]:"dynamic_page_artist_radio",[o.LF]:"landing_facebook",[o.x6]:"artist_page",[o.z6]:"profile_artists",[o.qI]:"recently_played_artist",[o.WP]:"search_artist",[o._v]:"search_artist_mix",[o.Gv]:"smartradio_page",[o.sI]:"artist_top",[o.Di]:"artist_similar"};var n=i("hjG6"),l=i("7E8A");const _={[o.pN]:"dynamic_page_user_radio",[o.qI]:"recently_played_user_radio",[o.WP]:"search_user_radio",[l.CONTEXT_PAGE_SEARCH_TAB_FLOW_CONFIG]:"search_user_radio"},c={[o.pN]:"dynamic_page_flow_config",[o.WP]:"search_flow_config",[l.CONTEXT_PAGE_SEARCH_TAB_FLOW_CONFIG]:"search_flow_config"},d={[o.pN]:"dynamic_page_livestream",[o.x6]:"livestream_page",[o.Ou]:"livestreams_page",[o.qI]:"recently_played_livestream",[o.WP]:"search_livestream",[o._v]:"search_top_livestream"},u={[o.E4]:"artist_highlight_playlist",[o.pN]:"dynamic_page_playlist",[o.x6]:"playlist_page",[o.qI]:"recently_played_playlist",[o.LF]:"landing_facebook",[o.z6]:"profile_playlists",[o.WP]:"search_playlist",[o._v]:"search_top_playlist",[o.lh]:"player_default_playlist"},p={[o.pN]:"dynamic_page_radio",[o.x6]:"radio_page",[o.qI]:"recently_played_radio",[o.LF]:"landing_facebook",[o.z6]:"profile_radios",[o.WP]:"search_radio",[o._v]:"search_top_radio"},h={[o.E4]:"artist_highlight_show",[o.pN]:"dynamic_page_show",[o.x6]:"show_page",[o.qI]:"recently_played_show",[o.z6]:"profile_shows",[o.WP]:"search_show",[o._v]:"search_top_show"},y={[o.pN]:"dynamic_page_smarttracklist",[o.x6]:"smarttracklist_page"};var A=i("0bYo");const f={[o.pN]:"dynamic_page_user_radio",[o.N_]:"profile_user_radio",[o.qI]:"recently_played_user_radio"},P={[a.Ay.Album]:s,[a.Ay.Artist]:r,[a.Ay.Episode]:n.A,[a.Ay.Flow]:_,[a.Ay.MultiFlow]:c,[a.Ay.Livestream]:d,[a.Ay.Playlist]:u,[a.Ay.Radio]:p,[a.Ay.Show]:h,[a.Ay.Smarttracklist]:y,[a.Ay.Track]:A.A,[a.Ay.User]:f},m=(e,t)=>P[e]&&P[e][t]||`unknown_${e}_${t}`,v=e=>m(e,o.x6),g=e=>m(e,o.pN),b=e=>m(e,o.qI),E=e=>m(e,o.d),w=e=>m(e,o.WP),L=e=>m(e,o.WP),k=e=>m(e,o.E4)}}]);