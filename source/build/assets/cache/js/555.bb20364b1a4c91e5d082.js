"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[555],{T0hu:(e,t,r)=>{r.d(t,{A:()=>O});var n=r("q1tI"),s=r("TRpf"),l=r("tZCQ"),i=r("Wp0Y"),a=r("xobL"),o=r("CyAC"),c=r("5G9X"),d=r("AfN5"),u=r("E4MG"),p=r("Jfek"),h=r("xOQS"),m=r("94eu"),A=r("rOm2"),E=r("deeu"),y=r("Mpuh"),P=r("XFWV"),_=r("CC4d"),S=r("7Rm4"),T=r("VkUI"),g=r("YG8s"),v=r("eb01"),C=r("kotc");const k=({children:e,force:t=!1,href:r,label:s})=>n.createElement(g.A,{handleClick:()=>{T.default.open(r,t)}},n.createElement(v.A,null,e),n.createElement(C.A,{value:s}));var x,b,f=r("8I5t"),I=r("b5Ea"),R=r("mXa6");const D=(0,h.A)((0,s.Ng)((({player:e,user:t},r)=>({mediaType:e.music.mediaType,playerIsRadio:e.config.isRadio,shouldHideCover:r.disableZoomCover||(0,o.vp)(t,r.data),userHasDownload:(0,a.Jt)(t)})))((({mediaType:e,playerIsRadio:t,id:r,userHasDownload:s,context:a,data:o,shouldHideCover:h})=>{const T=!t&&e===d.zu.SONG;return n.createElement(u.A,null,n.createElement("ul",{onClick:e=>e.stopPropagation()},T&&n.createElement(n.Fragment,null,n.createElement("li",null,n.createElement(f.A,{action:E.h.PLAY_NEXT,context:a,ids:[r],type:c.Ay.Album})),n.createElement("li",null,n.createElement(y.A,{context:a,ids:[r],type:c.Ay.Album}))),n.createElement("li",null,n.createElement(R.A,{context:a,id:r,type:c.Ay.Album})),s&&n.createElement("li",null,n.createElement(P.A,{context:a,id:r,type:c.Ay.Album})),n.createElement("li",null,n.createElement(I.A,{context:a,data:o,id:r,type:p.Gb.album})),!h&&n.createElement("li",null,n.createElement(k,{href:`/lightbox/picture_zoom?context=ticker&type=cover&md5=${o.ALB_PICTURE}`,label:(0,i.AP)("Zoomer sur la pochette")},x||(x=n.createElement(m.X,{size:"medium"})))),n.createElement("li",null,n.createElement(S.A,{id:Number(r),type:c.Ay.Album})),l.A.isAllowed("employee_feature")&&n.createElement(n.Fragment,null,n.createElement("li",null,n.createElement(k,{href:`/lightbox/curators/update_genre/${r}`,label:(0,i.AP)("Changer les genres")},b||(b=n.createElement(A.o,null)))),n.createElement("li",null,n.createElement(_.A,{id:r,type:c.Ay.Album})))))})));var L=r("SrwL"),w=r("zDvJ"),N=r("LpaV");class M extends n.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,L.uC)()}render(){const{anchor:e,context:t,data:r,id:s,placement:l,disableZoomCover:i}=this.props;return n.createElement(N.K.Consumer,null,(a=>{const o={data:{context:t,data:r,id:String(s),disableZoomCover:i},hasArrow:!1,placement:l,popperId:a||this.contextMenuId,trigger:[w.uW,w.h4],usePortal:!0};return n.createElement(D,o,e)}))}}M.defaultProps={placement:"left",disableZoomCover:!1};const O=M},AZMZ:(e,t,r)=>{r.d(t,{A:()=>g});var n=r("q1tI"),s=r("tZCQ"),l=r("5G9X"),i=r("E4MG"),a=r("Jfek"),o=r("xOQS"),c=r("deeu"),d=r("CC4d"),u=r("7Rm4"),p=r("8I5t"),h=r("b5Ea"),m=r("B8yT"),A=r("mXa6");class E extends n.Component{renderEditTags(){const{id:e}=this.props;return s.A.isAllowed("employee_feature")?n.createElement("li",null,n.createElement(d.A,{id:e,type:l.Ay.Artist})):null}renderGiveFeedback(){const{id:e}=this.props;return n.createElement("li",null,n.createElement(u.A,{id:Number(e),type:l.Ay.Artist}))}renderPlay(){const{context:e,data:t,id:r}=this.props;return t.SMARTRADIO?n.createElement("li",null,n.createElement(p.A,{action:c.h.PLAY_RADIO,context:e,ids:[r],type:l.Ay.Artist})):null}renderShare(){const{context:e,data:t,id:r}=this.props;return n.createElement("li",null,n.createElement(h.A,{context:e,data:t,id:r,type:a.Gb.artist}))}renderToggleDislike(){const{context:e,id:t}=this.props;return n.createElement("li",null,n.createElement(m.A,{context:e,id:t,type:l.Ay.Artist}))}renderToggleFavorite(){const{context:e,id:t}=this.props;return n.createElement("li",null,n.createElement(A.A,{context:e,id:t,type:l.Ay.Artist}))}render(){return n.createElement(i.A,null,n.createElement("ul",null,this.renderPlay(),this.renderToggleFavorite(),this.renderToggleDislike(),this.renderShare(),this.renderGiveFeedback(),this.renderEditTags()))}}const y=(0,o.A)(E);var P=r("SrwL"),_=r("zDvJ"),S=r("LpaV");class T extends n.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,P.uC)()}render(){const{anchor:e,context:t,data:r,id:s,placement:l}=this.props;return n.createElement(S.K.Consumer,null,(i=>{const a={data:{context:t,data:r,id:String(s)},hasArrow:!1,placement:l,popperId:i||this.contextMenuId,trigger:[_.uW,_.h4],usePortal:!0};return n.createElement(y,a,e)}))}}T.defaultProps={placement:"left"};const g=T},"4gOi":(e,t,r)=>{r.d(t,{A:()=>c});var n=r("q1tI"),s=r("SrwL"),l=r("wuUY"),i=r("zDvJ"),a=r("LpaV");class o extends n.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,s.uC)()}render(){const{anchor:e,context:t,data:r,id:s,placement:o}=this.props;return n.createElement(a.K.Consumer,null,(a=>{const c={data:{context:t,data:r,id:String(s)},hasArrow:!1,placement:o,popperId:a||this.contextMenuId,trigger:[i.uW,i.h4],usePortal:!0};return n.createElement(l.Ay,c,e)}))}}o.defaultProps={placement:"left"};const c=o},dSZ9:(e,t,r)=>{r.d(t,{A:()=>et});var n,s=r("q1tI"),l=r("TRpf"),i=r("SrwL"),a=r("u7vQ"),o=r("tZCQ"),c=r("xobL"),d=r("CyAC"),u=r("AfN5"),p=r("0bYo"),h=r("CxZw"),m=r("5G9X"),A=r("E4MG"),E=r("xOQS"),y=r("Jfek"),P=r("deeu"),_=r("odR8"),S=r("Mpuh"),T=r("Wp0Y"),g=r("Kgcv"),v=r("YG8s"),C=r("eb01"),k=r("kotc"),x=r("Qx5r");class b extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{dispatchRemoveSong:e,dispatchRemoveSongs:t,ids:r}=this.props;r.length>1?t({ids:r.map((e=>Number(e)))}):e({id:Number(r[0])})}render(){return s.createElement(v.A,{handleClick:this.handleClick},n||(n=s.createElement(C.A,null,s.createElement(x.u,{size:"medium"}))),s.createElement(k.A,{value:(0,T.AP)("Retirer de mes MP3")}))}}const f={dispatchRemoveSong:g.c7,dispatchRemoveSongs:g.LZ},I=(0,l.Ng)(null,f)(b);var R,D=r("eq2Y");class L extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{context:e,dispatchDeleteSongFromPlaylist:t,ids:r,playlistId:n}=this.props;confirm((0,T.WI)("Êtes-vous sûr de vouloir supprimer le titre sélectionné ?","Êtes-vous sûr de vouloir supprimer les titres sélectionnés ?",{count:r.length}))&&t({playlist_id:n,songs:this.getSongIdList(),context:e})}getSongIdList(){const{ids:e}=this.props;return e.map((e=>[Number(e),Number(e)>0?0:1]))}render(){return s.createElement(v.A,{handleClick:this.handleClick},R||(R=s.createElement(C.A,null,s.createElement(x.u,{size:"medium"}))),s.createElement(k.A,{value:(0,T.AP)("Retirer de la playlist")}))}}const w={dispatchDeleteSongFromPlaylist:D.Vc},N=(0,l.Ng)(null,w)(L);var M=r("1j1w");class O extends s.Component{render(){return s.createElement("div",{className:M.A.root},this.props.children)}}const Y=O;var z,F=r("rOm2");const G=({id:e})=>s.createElement(Y,null,z||(z=s.createElement(C.A,null,s.createElement(F.o,null))),s.createElement(k.A,{value:`Track id : ${e}`}));var B,V=r("70bL"),W=r("TqF5"),U=r("ZUSG"),q=r("WrS5");const Q=({item:e})=>{const t=(0,l.d4)(V.sc),r=(0,l.wA)();return t?s.createElement(v.A,{handleClick:()=>{r((0,W.qf)({name:q.b.EDIT_MP3,props:{song:e},size:"small"}))}},B||(B=s.createElement(C.A,null,s.createElement(U.r,{size:"medium"}))),s.createElement(k.A,{value:(0,T.AP)("Modifier")})):null};var H,X=r("CC4d"),j=r("7Rm4"),K=r("8I5t"),J=r("m02Z"),$=r("GjdC");const Z=({context:e,id:t})=>{const r=(0,$.A)();return s.createElement(v.A,{handleClick:()=>{r("contextual_menu_mix"),a.Ay.play({context:e,id:t,forceAsFirstTrack:!0,type:u.Kk.TRACK_MIX})}},H||(H=s.createElement(C.A,null,s.createElement(J.l,{size:"medium"}))),s.createElement(k.A,{value:(0,T.AP)("contextualmenu_text_launchtrackmix_web")}))};var ee,te,re,ne=r("pvbU"),se=r("6vqc"),le=r("RSbz"),ie=r("vZvY");class ae extends s.Component{renderChevron(){return"ltr"===this.props.langDirection?ee||(ee=s.createElement(se.v,null)):te||(te=s.createElement(le.Y,null))}render(){const{handleClick:e}=this.props;return s.createElement(v.A,{handleClick:()=>{e(ne.Q.CONTRIBUTORS)},closeOnClick:!1},re||(re=s.createElement(C.A,null,s.createElement(ie.O,{size:"medium"}))),s.createElement(k.A,{isShort:!0,value:(0,T.AP)("contextualmenu_text_seesongcredits_web")}),s.createElement(C.A,{isOnRight:!0,isSmall:!0},this.renderChevron()))}}const oe=(0,l.Ng)((({user:e})=>({langDirection:e.DIRECTION})))(ae);var ce,de=r("b5Ea"),ue=r("UAd1"),pe=r("H/eQ"),he=r("WmA5"),me=r("iooo"),Ae=r("hsEi");class Ee extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{id:e,context:t,isPremiumUser:r,trackIndex:n,playerType:s,playerTrackId:l,playerIsRadio:i}=this.props;if(s!==u.Cc.ADS){if(l!==e)return i&&!r?void he.A.push((0,me.jd)(`/track/${e}`)):"queuelist"!==t.TYPE&&"queuelistPodcast"!==t.TYPE||!n?(pe.A.subscribeOnce(pe.A.player.tracklist_changed,(()=>{pe.A.subscribeOnce(pe.A.player.displayCurrentSong,(()=>{this.openLyrics()})),a.Ay.control.nextSong()})),void a.Ay.play({addNext:!0,context:t,id:e,type:m.Ay.Track,notify:!1})):(pe.A.subscribeOnce(pe.A.player.displayCurrentSong,(()=>{this.openLyrics()})),void a.Ay.playTrackAtIndex(n));a.Ay.isPaused()||a.Ay.isPlaying()||a.Ay.control.play(),this.openLyrics()}}openLyrics(){this.props.dispatchSetPlayerLyrics(!0)}render(){return s.createElement(v.A,{handleClick:this.handleClick},ce||(ce=s.createElement(C.A,null,s.createElement(Ae.c,{size:"medium"}))),s.createElement(k.A,{value:(0,T.AP)("Écouter avec les paroles")}))}}const ye={dispatchSetPlayerLyrics:ue.IG},Pe=(0,l.Ng)((({user:e,player:t})=>({isPremiumUser:(0,c.ki)(e),playerIsRadio:t.config.isRadio,playerTrackId:t.music.id,playerType:t.config.playerType})),ye)(Ee);var _e=r("B8yT"),Se=r("mXa6"),Te=r("lXQd"),ge=r("o/gK"),ve=r("rXlm");const fe={AUTHOR:"author",COMPOSER:"composer",MISC:"misc"},Ie={author:(0,T.AP)("Auteur :"),composer:(0,T.AP)("Compositeur :"),misc:(0,T.AP)("Autres contributeurs :")};class Re extends s.Component{renderContributors(e){const{contributors:t}=this.props,r=(0,Te.A)(t,e);if(!r||0===r.length)return null;const n=(0,Te.A)(Ie,e);return s.createElement("li",{key:e},s.createElement("div",{className:"Ko223"},n),s.createElement("div",{className:"Kv_Yf"},r.join(" - ")))}render(){return s.createElement(s.Fragment,null,s.createElement(ge.A,{handleClick:this.props.handleBackClick}),s.createElement(ve.A,{className:"ATlPc"},s.createElement("ul",{className:"cp8f_"},Object.values(fe).map((e=>this.renderContributors(e))))))}}Re.panelName=ne.Q.CONTRIBUTORS;const De=Re;var Le=r("QoFi"),we=r("uK53"),Ne=r("Sq8Y"),Me=r("AY3M"),Oe=r("sAMA");class Ye extends s.Component{constructor(e){super(e),this.state={currentPanel:this.props.forceShowPlaylists?ne.Q.PLAYLISTS:null},this.updateCurrentPanel=this.updateCurrentPanel.bind(this),this.resetCurrentPanel=this.resetCurrentPanel.bind(this)}hasContributors(){const{data:e}=this.props;return void 0!==e.SNG_CONTRIBUTORS&&"object"==typeof e.SNG_CONTRIBUTORS&&(e.SNG_CONTRIBUTORS.author instanceof Array||e.SNG_CONTRIBUTORS.composer instanceof Array||e.SNG_CONTRIBUTORS.misc instanceof Array)}hasLyrics(){const{isOnline:e,data:t,mediaType:r}=this.props;return e&&r===u.zu.SONG&&void 0!==t.LYRICS_ID&&t.LYRICS_ID>0}isPlayable(){const{isDisabled:e,isRestrictedByExplicit:t,mediaType:r,playerIsRadio:n}=this.props;return!(e||t||n||a.Ay.chromecast.isCasting()||r!==u.zu.SONG)}isPersonalTrack(){return Number(this.props.id)<0}renderActionsPersonalTrack(){const{context:e,data:t,id:r}=this.props;return e&&e.TYPE===Me.EB&&this.isPersonalTrack()?s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement(Q,{item:t})),s.createElement("li",null,s.createElement(I,{ids:[r]}))):null}renderAddToPlaylist(){return this.props.isDisabled?null:s.createElement("li",null,s.createElement(_.A,{handleClick:this.updateCurrentPanel}))}renderAddToQueue(){const{context:e,id:t}=this.props;return this.isPlayable()?s.createElement("li",null,s.createElement(S.A,{context:e,ids:[t],type:m.Ay.Track})):null}renderContributorsPanel(){const{data:e}=this.props,{currentPanel:t}=this.state;return this.hasContributors()?s.createElement(Le.A,{isVisible:t===De.panelName},s.createElement(De,{contributors:e.SNG_CONTRIBUTORS||{},handleBackClick:this.resetCurrentPanel})):null}renderDeleteFromPlaylist(){const{context:e,data:t,id:r}=this.props;return e&&"playlist_page"===e.TYPE&&t.PLAYLIST_ID&&t.IS_DELETABLE?s.createElement("li",null,s.createElement(N,{context:e,ids:[r],playlistId:t.PLAYLIST_ID})):null}renderDisplayTrackId(){const{id:e}=this.props;return o.A.isAllowed("employee_feature")?s.createElement("li",null,s.createElement(G,{id:e})):null}renderEditTags(){const{id:e}=this.props;return o.A.isAllowed("employee_feature")?s.createElement("li",null,s.createElement(X.A,{id:e,type:m.Ay.Song})):null}renderGiveFeedback(){const{id:e}=this.props;return s.createElement("li",null,s.createElement(j.A,{id:Number(e),type:m.Ay.Track}))}renderLyrics(){const{context:e,data:t,id:r}=this.props;return this.hasLyrics()&&this.isPlayable()?s.createElement("li",null,s.createElement(Pe,{context:e,id:r,trackIndex:t.INDEX||void 0})):null}renderPlay(){const{context:e,data:t,id:r}=this.props;return this.isPlayable()?s.createElement("li",null,s.createElement(K.A,{action:P.h.PLAY_NEXT,context:e,ids:[r],trackIndex:t.INDEX||void 0,type:m.Ay.Track})):null}renderPlaylistsPanel(){const{context:e,id:t}=this.props,{currentPanel:r}=this.state,n=r===ne.Q.PLAYLISTS;return s.createElement(Le.A,{isVisible:n},s.createElement(Ne.A,{isVisible:n,context:e,handleBackClick:this.resetCurrentPanel,ids:[t]}))}renderPlayTrackMix(){const{id:e}=this.props;return this.isPersonalTrack()?null:s.createElement("li",null,s.createElement(Z,{id:e,context:{ID:e,TYPE:p.A[Me.jF]}}))}renderMainPanel(){return s.createElement(we.A,{isVisible:null===this.state.currentPanel},s.createElement("ul",null,this.renderPlay(),this.renderAddToQueue(),this.renderPlayTrackMix(),this.renderToggleFavorite(),this.renderToggleDislike(),this.renderAddToPlaylist(),this.renderDeleteFromPlaylist(),this.renderActionsPersonalTrack(),this.renderLyrics(),this.renderShare(),this.renderOpenContributors(),this.renderGiveFeedback(),this.renderEditTags(),this.renderDisplayTrackId()))}renderOpenContributors(){return this.hasContributors()?s.createElement("li",null,s.createElement(oe,{handleClick:this.updateCurrentPanel})):null}renderShare(){const{context:e,data:t,id:r}=this.props;return this.isPersonalTrack()?null:s.createElement("li",null,s.createElement(de.A,{context:e,data:(null==t?void 0:t.SONG)||t,id:r,type:y.Gb.song}))}renderToggleDislike(){const{context:e,id:t}=this.props;return this.isPersonalTrack()?null:s.createElement("li",null,s.createElement(_e.A,{context:e,id:t,type:m.Ay.Song}))}renderToggleFavorite(){const{context:e,id:t,isDisabled:r}=this.props;return s.createElement("li",null,s.createElement(Se.A,{context:e,id:t,isDisabled:r,type:m.Ay.Song}))}resetCurrentPanel(){this.setState({currentPanel:null})}updateCurrentPanel(e){e===De.panelName||e===ne.Q.PLAYLISTS?this.setState({currentPanel:e}):this.setState({currentPanel:null})}render(){return s.createElement(A.A,{hasMultiPanels:!0,isExtended:null!==this.state.currentPanel},this.renderMainPanel(),this.renderPlaylistsPanel(),this.renderContributorsPanel())}}Ye.defaultProps={forceShowPlaylists:!1};const ze=(0,E.A)((0,l.Ng)((({app:e,player:t,user:r},{data:n})=>{const s=(0,c.Uw)(r)===Oe.g&&(0,d.AP)(n);return{isOnline:e.online,mediaType:t.music.mediaType,playerIsRadio:t.config.isRadio,isDisabled:!s&&h.A.checkSongAvailable(n.FALLBACK||n)!==h.A.READABLE,isRestrictedByExplicit:s}}))(Ye));var Fe,Ge=r("+dDc"),Be=r("34sk");const Ve=({ids:e,isDisabled:t=!1})=>{const r=(0,l.d4)(V.sc),n=(0,l.wA)();return t||!r?null:s.createElement(v.A,{handleClick:()=>{confirm((0,T.WI)("Êtes-vous sûr de vouloir supprimer le titre sélectionné ?","Êtes-vous sûr de vouloir supprimer les titres sélectionnés ?",{count:e.length}))&&n((0,Be.HS)(e,m.Ay.Song))}},Fe||(Fe=s.createElement(C.A,null,s.createElement(x.u,{size:"medium"}))),s.createElement(k.A,{value:(0,T.AP)("banfeatures_action_removetracksfromlist_web")}))};var We,Ue=r("fJgm");class qe extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{context:e,ids:t}=this.props;confirm((0,T.WI)("Êtes-vous sûr de vouloir supprimer le titre sélectionné ?","Êtes-vous sûr de vouloir supprimer les titres sélectionnés ?",{count:t.length}))&&Ue.A.remove({type:m.Ay.Song,id:t,context:e})}render(){const{isDisabled:e}=this.props;return e?null:s.createElement(v.A,{handleClick:this.handleClick},We||(We=s.createElement(C.A,null,s.createElement(x.u,{size:"medium"}))),s.createElement(k.A,{value:(0,T.AP)("Retirer des Coups de cœur")}))}}qe.defaultProps={isDisabled:!1};const Qe=qe;class Xe extends s.Component{constructor(e){super(e),this.state={currentPanel:this.props.forceShowPlaylists?ne.Q.PLAYLISTS:null},this.updateCurrentPanel=this.updateCurrentPanel.bind(this),this.resetCurrentPanel=this.resetCurrentPanel.bind(this)}isPlayable(){const{playerIsRadio:e,mediaType:t}=this.props;return!e&&!a.Ay.chromecast.isCasting()&&t===u.zu.SONG}renderAddToPlaylist(){return s.createElement("li",null,s.createElement(_.A,{handleClick:this.updateCurrentPanel}))}renderAddToQueue(){const{context:e,ids:t}=this.props;return this.isPlayable()?s.createElement("li",null,s.createElement(S.A,{context:e,ids:t,type:m.Ay.Track})):null}renderDeleteFromDislike(){const{context:e,ids:t}=this.props;return e.TYPE!==Me.vj?null:s.createElement("li",null,s.createElement(Ve,{context:e,ids:t}))}renderDeleteFromFavorite(){const{context:e,ids:t,isUsersLovedTrackPlaylist:r}=this.props;return r?s.createElement("li",null,s.createElement(Qe,{context:e,ids:t})):null}renderDeleteFromPersonalTrack(){const{context:e,ids:t}=this.props;return e&&e.TYPE===Me.EB?s.createElement("li",null,s.createElement(I,{ids:t})):null}renderDeleteFromPlaylist(){const{context:e,data:t,ids:r,isUsersLovedTrackPlaylist:n}=this.props;return e&&"playlist_page"===e.TYPE?!t.IS_DELETABLE||n?null:s.createElement("li",null,s.createElement(N,{context:e,ids:r,playlistId:t.PLAYLIST_ID})):null}renderHeader(){const{hasHeader:e,ids:t}=this.props;if(!e)return null;const r=t.length,n=(0,T.WI)("%s titre","%s titres",{sprintf:[r],count:r});return s.createElement("li",{className:"jE33l"},s.createElement("h3",null,n))}renderPlay(){const{context:e,ids:t}=this.props;return this.isPlayable()?s.createElement("li",null,s.createElement(K.A,{action:P.h.PLAY_NEXT,context:e,ids:t,type:m.Ay.Track})):null}renderPlaylistsPanel(){const{context:e,ids:t}=this.props,{currentPanel:r}=this.state,n=r===ne.Q.PLAYLISTS;return s.createElement(Le.A,{isVisible:n},s.createElement(Ne.A,{isVisible:n,context:e,handleBackClick:this.resetCurrentPanel,ids:t}))}renderMainPanel(){return s.createElement(we.A,{isVisible:null===this.state.currentPanel},s.createElement("ul",null,this.renderHeader(),this.renderPlay(),this.renderAddToQueue(),this.renderAddToPlaylist(),this.renderDeleteFromFavorite(),this.renderDeleteFromPlaylist(),this.renderDeleteFromDislike(),this.renderDeleteFromPersonalTrack()))}resetCurrentPanel(){this.setState({currentPanel:null})}updateCurrentPanel(e){e===ne.Q.PLAYLISTS?this.setState({currentPanel:e}):this.setState({currentPanel:null})}render(){return s.createElement(A.A,{hasMultiPanels:!0,isExtended:null!==this.state.currentPanel},this.renderMainPanel(),this.renderPlaylistsPanel())}}Xe.defaultProps={forceShowPlaylists:!1,hasHeader:!1};const je=(0,E.A)((0,l.Ng)((({entities:e,player:t,user:r},{context:n})=>({isUsersLovedTrackPlaylist:"playlist_page"===n.TYPE&&(0,Ge.dR)(e,{id:String(n.ID),currentUserId:(0,c.F6)(r)}),mediaType:t.music.mediaType,playerIsRadio:t.config.isRadio})))(Xe));var Ke=r("zDvJ"),Je=r("LpaV"),$e=r("WfRu");class Ze extends s.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,i.uC)()}render(){const{anchor:e,context:t,data:r,forceShowPlaylists:n,hasHeader:l,id:a,placement:o,storePopperId:c}=this.props,d=Array.isArray(a)?a.map(String):[String(a)],u=n?i.tB:"";return s.createElement(Je.K.Consumer,null,(i=>{const a={data:{context:t,data:r,forceShowPlaylists:n,hasHeader:l,id:d[0],ids:d},hasArrow:!1,placement:o,popperId:`${i||this.contextMenuId}${u}`,trigger:[Ke.uW,Ke.h4],usePortal:!0},p=(0,$e.Pu)(a,c),h="function"==typeof e?e(p):e;return d.length<=1?s.createElement(ze,a,h):s.createElement(je,a,h)}))}}Ze.defaultProps={forceShowPlaylists:!1,hasHeader:!1,placement:"left"};const et=(0,l.Ng)((e=>({storePopperId:e.popper.popperId})))(Ze)},odR8:(e,t,r)=>{r.d(t,{A:()=>y});var n,s,l,i=r("q1tI"),a=r("TRpf"),o=r("Wp0Y"),c=r("YG8s"),d=r("eb01"),u=r("kotc"),p=r("6vqc"),h=r("RSbz"),m=r("W1Rt"),A=r("pvbU");class E extends i.Component{renderChevron(){return"ltr"===this.props.langDirection?n||(n=i.createElement(p.v,null)):s||(s=i.createElement(h.Y,null))}render(){const{handleClick:e}=this.props;return i.createElement(c.A,{handleClick:()=>{e(A.Q.PLAYLISTS)},closeOnClick:!1},l||(l=i.createElement(d.A,null,i.createElement(m.G,{size:"medium"}))),i.createElement(u.A,{isShort:!0,value:(0,o.AP)("Ajouter à une playlist")+"..."}),i.createElement(d.A,{isOnRight:!0,isSmall:!0},this.renderChevron()))}}const y=(0,a.Ng)((({user:e})=>({langDirection:e.DIRECTION})))(E)},Mpuh:(e,t,r)=>{r.d(t,{A:()=>h});var n,s=r("q1tI"),l=r("u7vQ"),i=r("Wp0Y"),a=r("5G9X"),o=r("YG8s"),c=r("eb01"),d=r("kotc"),u=r("ooTv"),p=r("aWMX");const h=({context:e,ids:t,type:r})=>{const h=(0,p.A)();return s.createElement(o.A,{handleClick:()=>{t.forEach((e=>h("add_to_queue",{id:e,type:r}))),l.Ay.play({addQueue:!0,context:e,id:r===a.Ay.Song||r===a.Ay.Track?t:t[0],type:r})}},n||(n=s.createElement(c.A,null,s.createElement(u.t,{size:"medium"}))),s.createElement(d.A,{value:(0,i.AP)("Ajouter à la file d'attente")}))}},XFWV:(e,t,r)=>{r.d(t,{A:()=>A});var n,s,l=r("q1tI"),i=r("TRpf"),a=r("Wp0Y"),o=r("shsj"),c=r("YG8s"),d=r("eb01"),u=r("kotc"),p=r("7bxg"),h=r("lASK"),m=r("M31W");const A=(0,i.Ng)((({cache:e,user:t},r)=>({currentAudioQuality:t.currentAudioQuality,isPersisted:(0,o._B)(e,{id:r.id,type:r.type})})))((({context:e,currentAudioQuality:t,id:r,isPersisted:i,type:o})=>{const{addToCache:A,removeFromCache:E}=(0,m.$)(),y=i?n||(n=l.createElement(p.w,{size:"medium"})):s||(s=l.createElement(h.m,{size:"medium"})),P=i?l.createElement(u.A,{value:(0,a.AP)("desktopapp_action_removefromdownloads_web")}):l.createElement(u.A,{value:(0,a.AP)("Télécharger")});return l.createElement(c.A,{handleClick:()=>{const n={id:r.toString(),type:o,context:e};return i?E({entity:n}):A({entity:n,quality:t})}},l.createElement(d.A,null,y),P)}))},CC4d:(e,t,r)=>{r.d(t,{A:()=>d});var n,s,l=r("q1tI"),i=r("eb01"),a=r("kotc"),o=r("MUSe"),c=r("rOm2");const d=({id:e,type:t})=>l.createElement(o.A,{href:`https://tag-editor.deez.re/?q=${e}&type[0]=${t}s`,isExternal:!0},n||(n=l.createElement(i.A,null,l.createElement(c.o,null))),s||(s=l.createElement(a.A,{value:"Edit Tags"})))},"7Rm4":(e,t,r)=>{r.d(t,{A:()=>p});var n=r("q1tI"),s=r("Wp0Y"),l=r("le3u"),i=r("AXVl"),a=r("N2fm"),o=r("0JBE"),c=r("LOQS");var u;const p=({id:e,type:t})=>{const r=(()=>{const{page:e,section:t,entityId:r,entity:n,item:s,itemId:l}=(0,o.iQ)();return e&&s&&l?()=>c.A.log({type:"cdp",eventName:"problem_reported",customAttributes:{screen_view_name:e,item_id:l,item_type:s,contextual_menu_option:"report_a_problem",screen_view_id_type:n||null,screen_view_id:r||null,...t&&{section_name:t}}}):()=>{}})();return n.createElement(l.A,{data:{type:t,id:e},label:(0,s.AP)("Signaler un problème"),name:"CATALOG_FEEDBACK",size:a.S.SMALL,onClick:r},u||(u=n.createElement(i.x,{size:"medium"})))}},le3u:(e,t,r)=>{r.d(t,{A:()=>h});var n=r("q1tI"),s=r("TRpf"),l=r("TqF5"),i=r("nxAS"),a=r("YG8s"),o=r("eb01"),c=r("kotc"),d=r("N2fm");class u extends n.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{name:e,data:t,dispatchOpenModal:r,dispatchOpenScreen:n,isScreen:s,size:l,onClick:i}=this.props;null==i||i(),s?n({name:e,data:t}):r({name:e,props:t,size:l})}render(){const{children:e,label:t}=this.props;return n.createElement(a.A,{handleClick:this.handleClick},n.createElement(o.A,null,e),n.createElement(c.A,{value:t}))}}u.defaultProps={data:{},isScreen:!1,size:d.S.LARGE};const p={dispatchOpenModal:l.qf,dispatchOpenScreen:i.J2},h=(0,s.Ng)(null,p)(u)},N2fm:(e,t,r)=>{r.d(t,{S:()=>n});let n=function(e){return e.SMALL="small",e.LARGE="large",e.XL="xl",e}({})},"8I5t":(e,t,r)=>{r.d(t,{A:()=>y});var n,s,l=r("q1tI"),i=r("Ty5D"),a=r("Wp0Y"),o=r("u7vQ"),c=r("5G9X"),d=r("YG8s"),u=r("eb01"),p=r("kotc"),h=r("VHPq"),m=r("dShs"),A=r("deeu"),E=r("aWMX");const y=({action:e,context:t,ids:r,trackIndex:y,type:P})=>{const _=(0,i.W6)(),S=(0,E.A)(),T=()=>{"queuelist"===t.TYPE&&e===A.h.PLAY&&y?o.Ay.playTrackAtIndex(y):("artist"===t.TYPE&&e===A.h.PLAY_RADIO&&(_.push(`/artist/${r[0]}`),t.TYPE="artist_smartradio"),o.Ay.play({addNext:e===A.h.PLAY_NEXT,context:t,id:P===c.Ay.Song||P===c.Ay.Track?r:r[0],radio:e===A.h.PLAY_RADIO,type:P}))};return e===A.h.PLAY_NEXT?l.createElement(d.A,{handleClick:()=>{r.forEach((e=>S("listen_just_after",{id:e,type:P}))),T()}},n||(n=l.createElement(u.A,null,l.createElement(h.R,{size:"medium"}))),l.createElement(p.A,{value:(0,a.AP)("Écouter juste après")})):l.createElement(d.A,{handleClick:T},s||(s=l.createElement(u.A,null,l.createElement(m.S,{size:"medium"}))),l.createElement(p.A,{value:(0,a.AP)("Lancer le mix")}))}},deeu:(e,t,r)=>{r.d(t,{h:()=>n});let n=function(e){return e.PLAY="play",e.PLAY_NEXT="play_next",e.PLAY_RADIO="play_radio",e}({})},b5Ea:(e,t,r)=>{r.d(t,{A:()=>d});var n,s=r("q1tI"),l=r("Wp0Y"),i=r("le3u"),a=r("EPmj"),o=r("Jfek"),c=r("0JBE");const d=({context:e,data:t,id:r,type:d})=>{const u=(0,c.iQ)();return s.createElement(i.A,{data:{componentType:o.Wg.contextualMenu,context:e,data:t,id:r,type:d,breadcrumb:u},label:(0,l.AP)("Partager"),name:o.DN},n||(n=s.createElement(a.l,{size:"medium"})))}},B8yT:(e,t,r)=>{r.d(t,{A:()=>T});var n,s,l,i,a=r("q1tI"),o=r("TRpf"),c=r("Mb6w"),d=r("Wp0Y"),u=r("OPhi"),p=r("5G9X"),h=r("YG8s"),m=r("eb01"),A=r("kotc"),E=r("03m0"),y=r("lb8X"),P=r("SF1U"),_=r("elFM");class S extends a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}getIcon(e,t){switch(e){case p.Ay.Artist:return t?n||(n=a.createElement(E.x,{size:"medium"})):s||(s=a.createElement(y.G,{size:"medium"}));case p.Ay.Song:return t?l||(l=a.createElement(P.e,{size:"medium"})):i||(i=a.createElement(_.z,{size:"medium"}));default:return null}}getLabel(e,t){switch(e){case p.Ay.Artist:return t?(0,d.AP)("banartist_action_allowinmyrecommendations_web"):(0,d.AP)("banartist_action_dontrecommendthisartist_web");case p.Ay.Song:return t?(0,d.AP)("banartist_action_allowinmyrecommendations_web"):(0,d.AP)("bantrack_action_dontrecommendthistrack_web");default:return""}}handleClick(){const{type:e,id:t,isDisliked:r,context:n}=this.props,s={id:t,type:e,context:n};r?c.A.remove(s):c.A.add(s)}render(){const{isDisliked:e,type:t}=this.props;return a.createElement(h.A,{handleClick:this.handleClick},a.createElement(m.A,null,this.getIcon(t,e)),a.createElement(A.A,{value:this.getLabel(t,e)}))}}const T=(0,o.Ng)((({feedbacks:e},t)=>({isDisliked:(0,u.i8)(e,t.id,t.type)})))(S)},mXa6:(e,t,r)=>{r.d(t,{A:()=>P});var n,s,l=r("q1tI"),i=r("fJgm"),a=r("Wp0Y"),o=r("OPhi"),c=r("5G9X"),d=r("e2eG"),u=r("YG8s"),p=r("eb01"),h=r("kotc"),m=r("7bxg"),A=r("gtRZ"),E=r("Nz/Y"),y=r("Fzox");const P=({context:e,id:t,type:r,isDisabled:P=!1})=>{const[_]=(0,y.G)((e=>[(0,o.BA)(e.feedbacks,t,r)])),S=(0,E.A)(),T=()=>{const n=d.A.getUserDataType(r)||r,s={id:t,context:e,type:n};_?i.A.remove(s):(i.A.add(s),S("add_to_favorite"))};if(!_&&P)return null;if(_){const e=r===c.Ay.Track?(0,a.AP)("Retirer des Coups de cœur"):(0,a.AP)("contextualmenu_text_deletefrommyfavorites_web");return l.createElement(u.A,{handleClick:T},n||(n=l.createElement(p.A,null,l.createElement(m.w,{size:"medium"}))),l.createElement(h.A,{value:e}))}const g=r===c.Ay.Track?(0,a.AP)("Ajouter aux Coups de cœur"):(0,a.AP)("contextualmenu_text_addtomyfavorites_web");return l.createElement(u.A,{handleClick:T},s||(s=l.createElement(p.A,null,l.createElement(A.M,{size:"medium"}))),l.createElement(h.A,{value:g}))}},LpaV:(e,t,r)=>{r.d(t,{K:()=>n});const n=(0,r("q1tI").createContext)("")},"o/gK":(e,t,r)=>{r.d(t,{A:()=>m});var n=r("q1tI"),s=r("TRpf"),l=r("Wp0Y"),i=r("eb01"),a=r("kotc"),o=r("RSbz"),c=r("6vqc");var u,p;class h extends n.Component{constructor(e){super(e),this.state={isHover:!1},this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}handleMouseEnter(){this.setState({isHover:!0})}handleMouseLeave(){this.setState({isHover:!1})}renderChevron(){return"ltr"===this.props.langDirection?u||(u=n.createElement(o.Y,null)):p||(p=n.createElement(c.v,null))}render(){const{handleClick:e}=this.props,{isHover:t}=this.state;return n.createElement("button",{className:"wSvrT",type:"button",onClick:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},n.createElement(i.A,{isActive:t,isSmall:!0},this.renderChevron()),n.createElement(a.A,{isActive:t,value:(0,l.AP)("Retour")}))}}const m=(0,s.Ng)((({user:e})=>({langDirection:e.DIRECTION})))(h)},eb01:(e,t,r)=>{r.d(t,{A:()=>c});var n=r("q1tI"),s=r("juqV");const c=({children:e,isActive:t=!1,isOnRight:r=!1,isSmall:c=!1})=>{const d=(0,n.cloneElement)(e,{boxSize:c?"16px":"24px"}),u=(0,s.A)("APyTE",{lXZbh:t,i0PtA:r,a6xE1:c});return n.createElement("span",{className:u},d)}},YG8s:(e,t,r)=>{r.d(t,{A:()=>c});var n=r("q1tI"),s=r("TRpf"),l=r("WfRu"),i=r("1j1w");class a extends n.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{closeOnClick:e,dispatchHidePopper:t,handleClick:r}=this.props;r(),e&&t()}render(){const{children:e}=this.props;return n.createElement("button",{className:i.A.root,type:"button",onClick:this.handleClick},e)}}a.defaultProps={closeOnClick:!0};const o={dispatchHidePopper:l.Lm},c=(0,s.Ng)(null,o)(a)},MUSe:(e,t,r)=>{r.d(t,{A:()=>d});var n=r("q1tI"),s=r("TRpf"),l=r("WfRu"),i=r("GkjM"),a=r("1j1w");class o extends n.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.dispatchHidePopper()}render(){const{children:e,href:t,isExternal:r}=this.props;return n.createElement(i.A,{className:a.A.root,to:t,onClick:this.handleClick,onKeyDown:this.handleClick,target:r?"_blank":void 0},e)}}o.defaultProps={isExternal:!1};const c={dispatchHidePopper:l.Lm},d=(0,s.Ng)(null,c)(o)},kotc:(e,t,r)=>{r.d(t,{A:()=>o});var n=r("q1tI"),s=r("juqV");const o=({isActive:e=!1,isShort:t=!1,value:r})=>{const o=(0,s.A)("_G9BW",{NExuV:e,FoAMI:t});return n.createElement("span",{className:o},r)}},"2EvD":(e,t,r)=>{r.d(t,{A:()=>ge});var n,s,l,i=r("q1tI"),a=r("5G9X"),o=r("T0hu"),c=r("AZMZ"),d=r("tZCQ"),u=r("XOWT"),p=r("oB8A"),h=r("E4MG"),m=r("xOQS"),A=r("Jfek"),E=r("TRpf"),y=r("Wp0Y"),P=r("YG8s"),_=r("eb01"),S=r("kotc"),T=r("6vqc"),g=r("RSbz"),v=r("X5lq"),C=r("pvbU");class k extends i.Component{renderChevron(){return"ltr"===this.props.langDirection?n||(n=i.createElement(T.v,null)):s||(s=i.createElement(g.Y,null))}render(){const{handleClick:e}=this.props;return i.createElement(P.A,{handleClick:()=>{e(C.Q.DESCRIPTION)},closeOnClick:!1},l||(l=i.createElement(_.A,null,i.createElement(v.u,{size:"medium"}))),i.createElement(S.A,{isShort:!0,value:(0,y.AP)("En savoir plus")}),i.createElement(_.A,{isOnRight:!0,isSmall:!0},this.renderChevron()))}}const x=(0,E.Ng)((({user:e})=>({langDirection:e.DIRECTION})))(k);var b,f,I=r("b5Ea"),R=r("RuKb"),D=r("DNpT"),L=r("IZwO"),w=r("7bxg"),N=r("eTJY");class M extends i.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{bookmark:e,id:t,dispatchMarkAsNotPlayed:r,dispatchMarkAsPlayed:n,played:s,type:l}=this.props,i=null===e?void 0:e;s?(0,D.eD)(l,t,i).then((e=>r(e))):(0,D.Nl)(l,t,i).then((e=>n(e)))}render(){const{played:e}=this.props;return e?i.createElement(P.A,{handleClick:this.handleClick},b||(b=i.createElement(_.A,null,i.createElement(w.w,{size:"medium"}))),i.createElement(S.A,{value:(0,y.AP)("contextualmenu_text_markasnotplayed_web")})):i.createElement(P.A,{handleClick:this.handleClick},f||(f=i.createElement(_.A,null,i.createElement(N.S,{size:"medium"}))),i.createElement(S.A,{value:(0,y.AP)("contextualmenu_text_markasplayed_web")}))}}const O={dispatchMarkAsNotPlayed:L.eD,dispatchMarkAsPlayed:L.Nl},Y=(0,E.Ng)((({bookmarks:e},t)=>({bookmark:(0,R.v6)(e,t.type,t.id),played:(0,R._l)(e,t.type,t.id)})),O)(M);var z=r("o/gK"),F=r("rXlm");class W extends i.Component{renderTitle(){const{title:e}=this.props;return e?i.createElement("div",{className:"xjm6K"},e):null}render(){const{handleBackClick:e,text:t}=this.props;return i.createElement(i.Fragment,null,i.createElement(z.A,{handleClick:e}),i.createElement(F.A,{className:"fpOsM"},i.createElement(i.Fragment,null,this.renderTitle(),i.createElement("div",{className:"yN2Tz","data-testid":"episode-context-menu-description"},t))))}}W.panelName=C.Q.DESCRIPTION;const U=W;var q=r("uK53"),Q=r("QoFi");class H extends i.Component{constructor(e){super(e),this.state={currentPanel:this.props.forceShowDescription?U.panelName:null},this.updateCurrentPanel=this.updateCurrentPanel.bind(this),this.resetCurrentPanel=this.resetCurrentPanel.bind(this)}hasDescription(){const{data:e,forceShowDescription:t}=this.props;return(0,u.A)(e,"EPISODE_DESCRIPTION")||!0===t}renderDescriptionPanel(){const{data:e}=this.props,{currentPanel:t}=this.state;return this.hasDescription()?i.createElement(Q.A,{isVisible:t===U.panelName},i.createElement(U,{handleBackClick:this.resetCurrentPanel,text:e.EPISODE_DESCRIPTION||""})):null}renderMainPanel(){return i.createElement(q.A,{isVisible:null===this.state.currentPanel},i.createElement("ul",null,this.renderToggleBookmark(),this.renderShare(),this.renderOpenDescription()))}renderOpenDescription(){return this.hasDescription()?i.createElement("li",null,i.createElement(x,{handleClick:this.updateCurrentPanel})):null}renderShare(){const{context:e,data:t,id:r}=this.props;return i.createElement("li",null,i.createElement(I.A,{context:e,data:t,id:r,type:A.Gb.episode}))}renderToggleBookmark(){const{id:e}=this.props;return i.createElement("li",null,i.createElement(Y,{id:e,type:p.x.EPISODE}))}updateCurrentPanel(e){e===U.panelName?this.setState({currentPanel:e}):this.setState({currentPanel:null})}resetCurrentPanel(){this.setState({currentPanel:null})}render(){return d.A.isAllowed("talk")?i.createElement(h.A,{hasMultiPanels:!0,isExtended:null!==this.state.currentPanel,"data-testid":"episode-context-menu"},this.renderMainPanel(),this.renderDescriptionPanel()):null}}H.defaultProps={forceShowDescription:!1};const X=(0,m.A)(H);var j=r("SrwL"),K=r("zDvJ"),J=r("LpaV");class $ extends i.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,j.uC)()}render(){if(!d.A.isAllowed("talk"))return null;const{anchor:e,context:t,data:r,forceShowDescription:n,id:s,placement:l}=this.props,a=n?j.Zo:"";return i.createElement(J.K.Consumer,null,(o=>{const c=o||this.contextMenuId,d={data:{context:t,data:r,forceShowDescription:n,id:String(s)},hasArrow:!1,placement:l,popperId:`${c}${a}`,trigger:[K.uW,K.h4],usePortal:!0};return i.createElement(X,d,e)}))}}$.defaultProps={forceShowDescription:!1,placement:"left"};const Z=$;var ee=r("4gOi"),te=r("deeu"),re=r("8I5t");class ne extends i.Component{renderPlay(){const{context:e,id:t}=this.props;return i.createElement("li",null,i.createElement(re.A,{action:te.h.PLAY_RADIO,context:e,ids:[t],type:a.Ay.Radio}))}renderShare(){const{context:e,data:t,id:r}=this.props;return i.createElement("li",null,i.createElement(I.A,{context:e,data:t,id:r,type:A.Gb.radio}))}render(){return i.createElement(h.A,null,i.createElement("ul",null,this.renderPlay(),this.renderShare()))}}const se=(0,m.A)(ne);class le extends i.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,j.uC)()}render(){const{anchor:e,context:t,data:r,id:n,placement:s}=this.props;return i.createElement(J.K.Consumer,null,(l=>{const a={data:{context:t,data:r,id:String(n)},hasArrow:!1,placement:s,popperId:l||this.contextMenuId,trigger:[K.uW,K.h4],usePortal:!0};return i.createElement(se,a,e)}))}}le.defaultProps={placement:"left"};const ie=le;var ae=r("mXa6");class oe extends i.Component{renderShare(){const{context:e,data:t,id:r}=this.props;return i.createElement("li",null,i.createElement(I.A,{context:e,data:t,id:r,type:A.Gb.show}))}renderToggleFavorite(){const{context:e,id:t}=this.props;return i.createElement("li",null,i.createElement(ae.A,{context:e,id:t,type:a.Ay.Show}))}render(){return d.A.isAllowed("talk")?i.createElement(h.A,null,i.createElement("ul",null,this.renderToggleFavorite(),this.renderShare())):null}}const ce=(0,m.A)(oe);class de extends i.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,j.uC)()}render(){if(!d.A.isAllowed("talk"))return null;const{anchor:e,context:t,data:r,id:n,placement:s}=this.props;return i.createElement(J.K.Consumer,null,(l=>{const a={data:{context:t,data:r,id:String(n)},hasArrow:!1,placement:s,popperId:l||this.contextMenuId,trigger:[K.uW,K.h4],usePortal:!0};return i.createElement(ce,a,e)}))}}de.defaultProps={placement:"left"};const ue=de;var pe=r("AfN5"),he=r("odR8"),me=r("Mpuh"),Ae=r("Sq8Y");class Ee extends i.Component{constructor(e){super(e),this.updateCurrentPanel=this.updateCurrentPanel.bind(this),this.resetCurrentPanel=this.resetCurrentPanel.bind(this),this.state={currentPanel:null}}canModifyQueuelist(){const{mediaType:e,playerIsRadio:t}=this.props;return!t&&e===pe.zu.SONG}getIds(){return this.props.data.SONGS.map((e=>e.SNG_ID.toString()))}renderMainPanel(){return i.createElement(q.A,{isVisible:null===this.state.currentPanel},i.createElement("ul",null,this.renderPlay(),this.renderAddToQueue(),this.renderAddToPlaylist()))}renderPlaylistsPanel(){const{context:e}=this.props,{currentPanel:t}=this.state,r=t===C.Q.PLAYLISTS;return i.createElement(Q.A,{isVisible:r},i.createElement(Ae.A,{isVisible:r,context:e,handleBackClick:this.resetCurrentPanel,ids:this.getIds()}))}renderAddToPlaylist(){return i.createElement("li",null,i.createElement(he.A,{handleClick:this.updateCurrentPanel}))}renderAddToQueue(){const{context:e,id:t}=this.props;return this.canModifyQueuelist()?i.createElement("li",null,i.createElement(me.A,{context:e,ids:[t],type:a.Ay.Smarttracklist})):null}renderPlay(){const{context:e,id:t}=this.props;return this.canModifyQueuelist()?i.createElement("li",null,i.createElement(re.A,{action:te.h.PLAY_NEXT,context:e,ids:[t],type:a.Ay.Smarttracklist})):null}resetCurrentPanel(){this.setState({currentPanel:null})}updateCurrentPanel(e){e===C.Q.PLAYLISTS?this.setState({currentPanel:e}):this.setState({currentPanel:null})}render(){return i.createElement(h.A,{hasMultiPanels:!0,isExtended:null!==this.state.currentPanel},this.renderMainPanel(),this.renderPlaylistsPanel())}}const ye=(0,m.A)((0,E.Ng)((({player:e})=>({mediaType:e.music.mediaType,playerIsRadio:e.config.isRadio})))(Ee));class Pe extends i.Component{constructor(e){super(e),this.contextMenuId="",this.contextMenuId=(0,j.uC)()}render(){const{anchor:e,context:t,data:r,id:n,placement:s}=this.props;return i.createElement(J.K.Consumer,null,(l=>{const a={data:{context:t,data:r,id:String(n)},hasArrow:!1,placement:s,popperId:l||this.contextMenuId,trigger:[K.uW,K.h4],usePortal:!0};return i.createElement(ye,a,e)}))}}Pe.defaultProps={placement:"left"};const _e=Pe;var Se=r("dSZ9");class Te extends i.Component{render(){const{type:e}=this.props;switch(e){case a.Ay.Album:return i.createElement(o.A,this.props);case a.Ay.Artist:return i.createElement(c.A,this.props);case a.Ay.Episode:return i.createElement(Z,this.props);case a.Ay.Playlist:return i.createElement(ee.A,this.props);case a.Ay.Radio:return i.createElement(ie,this.props);case a.Ay.Show:return i.createElement(ue,this.props);case a.Ay.Track:case a.Ay.Song:return i.createElement(Se.A,this.props);case a.Ay.Smarttracklist:return i.createElement(_e,this.props);default:return null}}}const ge=Te},E4MG:(e,t,r)=>{r.d(t,{A:()=>c});var n=r("+9dH"),s=r("q1tI"),l=r("juqV");const c=({hasMultiPanels:e=!1,isExtended:t=!1,...r})=>{const c=(0,l.A)("j_Ltn",{gU4lg:e,ltxSj:t});return s.createElement("div",(0,n.A)({className:c},r))}},wuUY:(e,t,r)=>{r.d(t,{Gd:()=>W,Ay:()=>q});var n,s=r("q1tI"),l=r("TRpf"),i=r("tZCQ"),a=r("Wp0Y"),o=r("xobL"),c=r("5G9X"),d=r("AfN5"),u=r("E4MG"),p=r("Jfek"),h=r("xOQS"),m=r("vZvY"),A=r("deeu"),E=r("Mpuh"),y=r("eq2Y"),P=r("WmA5"),_=r("+dDc"),S=r("iooo"),T=r("fkXJ"),g=r("TqF5"),v=r("YG8s"),C=r("eb01"),k=r("kotc"),x=r("WrS5"),b=r("Qx5r");class f extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.handleConfirm=this.handleConfirm.bind(this)}handleConfirm(e){if(e){const{dispatchRemovePlaylist:e,id:t}=this.props;e({data:{id:t}}).then((()=>{(0,T.A)({body:(0,a.AP)("toastmessage_text_playlistXhasbeendeleted_web",{sprintf:[this.props.playlistName]})}),P.A.push((0,S.jd)("/profile/me/playlists"))}))}this.props.dispatchCloseModal()}handleClick(){this.props.dispatchOpenModal({name:x.b.GENERIC_CONFIRM,props:{title:(0,a.AP)("confirmationmessage_title_deleteXplaylist_web",{sprintf:[this.props.playlistName]}),body:(0,a.AP)("confirmationmessage_text_actioncannotbeundone_web"),ctaConfirm:(0,a.AP)("Supprimer"),callback:this.handleConfirm},size:"small"})}render(){return s.createElement(v.A,{handleClick:this.handleClick},n||(n=s.createElement(C.A,null,s.createElement(b.u,{size:"medium"}))),s.createElement(k.A,{value:(0,a.AP)("Supprimer cette playlist")}))}}const I={dispatchRemovePlaylist:y.tH,dispatchOpenModal:g.qf,dispatchCloseModal:g.Oo},R=(0,l.Ng)((({entities:e},{id:t})=>({playlistName:(0,_.bt)(e,{id:t}).TITLE})),I)(f);var D,L=r("XFWV"),w=r("CC4d"),N=r("MUSe"),M=r("8I5t"),O=r("b5Ea"),Y=r("mXa6"),z=r("A2sV"),F=r("BVS8");const G=({playlistId:e,context:t})=>{var r;const{data:n}=(0,z.xxF)({variables:{playlistId:e}});return null!=n&&null!==(r=n.playlist)&&void 0!==r&&r.isBlindTestable?s.createElement("li",null,s.createElement(N.A,{href:`/game/blindtest/playlist/${e}?context=${t.TYPE}`,isExternal:!1,"data-testid":"link-blindtest"},D||(D=s.createElement(C.A,null,s.createElement(F.Q,{size:"medium"}))),s.createElement(k.A,{value:(0,a.AP)("contextualmenu_title_playXfeaturename_web")}))):null};var B,V=r("7E8A");const W={COLLABORATIVE:2,PRIVATE:1,PUBLIC:0};class U extends s.Component{getPlaylistStatus(){const{data:e}=this.props;return Number(e.STATUS)||W.PUBLIC}isMyPlaylist(){const{data:e,userID:t}=this.props;return Number(e.PARENT_USER_ID)===t}isPlayable(){const{data:e,playerIsRadio:t,mediaType:r}=this.props;return 0!==e.NB_SONG&&!t&&r===d.zu.SONG&&(this.getPlaylistStatus()!==W.PRIVATE||this.isMyPlaylist())}renderAddToQueue(){const{context:e,id:t}=this.props;return this.isPlayable()?s.createElement("li",null,s.createElement(E.A,{context:e,ids:[t],type:c.Ay.Playlist})):null}renderDownload(){const{context:e,id:t,userHasDownload:r}=this.props;return r?s.createElement("li",null,s.createElement(L.A,{context:e,id:t,type:c.Ay.Playlist})):null}renderEditTags(){const{id:e}=this.props;return i.A.isAllowed("employee_feature")?s.createElement("li",null,s.createElement(w.A,{id:e,type:c.Ay.Playlist})):null}renderOwner(){const{data:e}=this.props;return this.isMyPlaylist()?null:s.createElement("li",null,s.createElement(N.A,{href:`/profile/${e.PARENT_USER_ID||e.USER_ID}`,isExternal:!1,"data-testid":"link-profile"},B||(B=s.createElement(C.A,null,s.createElement(m.O,{size:"medium"}))),s.createElement(k.A,{value:(0,a.AP)("Profil utilisateur")})))}renderDelete(){const{context:e,id:t}=this.props;return this.isMyPlaylist()&&e&&e.TYPE===V.CONTEXT_PAGE_PLAYLIST?s.createElement("li",null,s.createElement(R,{id:t})):null}renderPlay(){const{context:e,id:t}=this.props;return this.isPlayable()?s.createElement("li",null,s.createElement(M.A,{action:A.h.PLAY_NEXT,context:e,ids:[t],type:c.Ay.Playlist})):null}renderShare(){const{context:e,data:t,id:r}=this.props;return this.getPlaylistStatus()===W.PRIVATE?null:s.createElement("li",null,s.createElement(O.A,{context:e,data:t,id:r,type:p.Gb.playlist}))}renderToggleFavorite(){const{context:e,id:t}=this.props;return this.isMyPlaylist()||this.getPlaylistStatus()===W.PRIVATE?null:s.createElement("li",null,s.createElement(Y.A,{context:e,id:t,type:c.Ay.Playlist}))}renderPlayBlindtest(){const{id:e,context:t}=this.props;return!1===i.A.isAllowed("contextual_menu_blindtest")?null:s.createElement(G,{context:t,playlistId:e.toString()})}render(){return s.createElement(u.A,null,s.createElement("ul",null,this.renderPlay(),this.renderAddToQueue(),this.renderToggleFavorite(),this.renderPlayBlindtest(),this.renderDownload(),this.renderShare(),this.renderOwner(),this.renderDelete(),this.renderEditTags()))}}const q=(0,h.A)((0,l.Ng)((({player:e,user:t})=>({mediaType:e.music.mediaType,playerIsRadio:e.config.isRadio,userHasDownload:(0,o.Jt)(t),userID:t.id})))(U))},uK53:(e,t,r)=>{r.d(t,{A:()=>a});var n=r("q1tI"),s=r("juqV");const a=({children:e,isVisible:t=!0})=>{const r=(0,s.A)("IBRGd",{CbIyw:!t});return n.createElement("div",{className:r},e)}},QoFi:(e,t,r)=>{r.d(t,{A:()=>a});var n=r("q1tI"),s=r("juqV");const a=({children:e,isVisible:t=!1})=>{const r=(0,s.A)("aC0hD",{SYVt4:t});return n.createElement("div",{onDoubleClick:e=>e.stopPropagation(),className:r},e)}},Sq8Y:(e,t,r)=>{r.d(t,{A:()=>z}),r("/eM8");var n=r("q1tI"),s=r("TRpf"),l=r("lXQd"),i=r("Wp0Y"),a=r("+dDc"),o=r("eq2Y"),c=r("TqF5"),d=r("hTBE"),u=r("5G9X"),p=r("z+LD"),h=r("34sk"),m=r("xobL"),A=r("fkXJ"),E=r("o/gK"),y=r("eb01"),P=r("YG8s"),_=r("kotc"),S=r("fSLK");const T=n.createContext({addToPlaylist:()=>{},isVisible:!1}),g=({index:e,style:t,data:r})=>{const s=r[e],{addToPlaylist:l}=n.useContext(T),i=n.useCallback((()=>{l(s.PLAYLIST_ID,e)}),[l,s,e]);return n.createElement("li",{style:t},n.createElement(P.A,{handleClick:i},n.createElement(_.A,{value:s.TITLE})))},k=({playlistList:e})=>{const[t,r]=n.useState(0),s=n.useRef(null),{isVisible:l}=n.useContext(T);return n.useEffect((()=>{s.current&&l&&r(s.current.clientHeight)}),[l]),n.createElement("div",{ref:s,className:"eoHHD",onScroll:e=>e.stopPropagation()},n.createElement("ul",null,n.createElement(S.Y1,{height:t,itemCount:e.length,itemSize:48,width:330,itemData:e},g)))};var x=r("Z9kq"),b=r("7Gye"),f=r("aoCz"),I=r("8iEq"),R=r("Nz/Y"),D=r("0JBE"),L=r("LOQS"),w=r("hMU6");const N=()=>{const{page:e,section:t,entityId:r,entity:n,item:s,itemId:l}=(0,D.iQ)();return e&&void 0!==r&&void 0!==n?(i,a=null,o)=>{(l||null!=o&&o.id)&&(s||null!=o&&o.type)&&L.A.log({type:"cdp",eventName:"item_collected",customAttributes:{screen_view_name:e,item_id:(null==o?void 0:o.id)||l,item_type:(null==o?void 0:o.type)||s,...n&&{screen_view_id_type:n},...r&&{screen_view_id:r},...t&&{section_name:t},...(0,w.W)(i,a,"playlist")}})}:()=>{}};var M,O=r("Fzox"),Y=r("WrS5");const z=({isVisible:e,context:t,handleBackClick:r,ids:S})=>{const[g,v]=n.useState(""),[D,L]=n.useState(null),w=(0,s.wA)(),z=(0,R.A)(),F=N(),[G,B,V,W]=(0,O.G)((e=>[(0,m.G8)(e.user),(0,d.A)(Object.values((0,a.Eo)(e.entities,e.feedbacks,(0,m.F6)(e.user),!0)),I.WU,u.Ay.Playlist),(0,m.mI)({SERVER_TIMESTAMP:(0,m.mS)(e.user),clientTimestampDelta:(0,m.gE)(e.user)}),(0,m.UJ)(e.user)])),U=n.useCallback((()=>{let e=null;return""!==g&&(e=B.filter((e=>e.TITLE.toLowerCase().indexOf(g)>-1))),e}),[g,B]);n.useEffect((()=>{L(U())}),[g,U]);const Q=()=>{S.length>0&&S.forEach((e=>F("0","add_to_new_playlist",{id:e,type:u.Ay.Track})))},X=D||B;return n.createElement(n.Fragment,null,n.createElement(E.A,{handleClick:r}),n.createElement("div",{className:"cBbGP"},n.createElement(x.D,{onChange:e=>{const t=(0,l.A)(e,"target.value","").toLowerCase();t!==g&&v(t)},size:"small",placeholder:(0,i.AP)("Rechercher"),value:g})),n.createElement(P.A,{handleClick:()=>{w(W?(0,c.qf)({name:"PLAYLIST_ASSISTANT",props:{type:f.F.CREATION,sngId:S,onPlaylistCreation:Q}}):(0,c.qf)({name:Y.b.AUTH_MODAL,props:{context:"create-playlist"}}))}},M||(M=n.createElement(y.A,{isActive:!0},n.createElement(b.c,null))),n.createElement(_.A,{isActive:!0,value:(0,i.AP)("Nouvelle playlist")})),n.createElement(T.Provider,{value:{addToPlaylist:async(e,r)=>{if(e===G)try{await w((0,h.jo)(S,u.Ay.Song,V,{id:t.ID,t:t.TYPE})),S.forEach((e=>z("add_to_favorite",{id:e,type:u.Ay.Track})))}catch(e){const t=e;if("ERROR_DATA_EXISTS"===t.name)return void(0,A.A)({body:(0,i.AP)("playlist_action_tracksalreadyaddedtotheplaylist_web")});if("QUOTA_ERROR"===t.name)return void(0,A.A)({body:(0,i.AP)("notification_text_maxnumberoftracksreached_web")});p.A.error(e)}else try{await w((0,o.ym)({playlist_id:e,song_id_list:S,data:{context:t,position:r}})),S.forEach((t=>F(e,"add_to_playlist",{id:t,type:u.Ay.Track})))}catch(e){(0,A.A)({body:e.message})}},isVisible:e}},n.createElement(k,{playlistList:X})))}},pvbU:(e,t,r)=>{r.d(t,{Q:()=>n});let n=function(e){return e.CONTRIBUTORS="constributors",e.DESCRIPTION="description",e.PLAYLISTS="playlists",e}({})},SrwL:(e,t,r)=>{r.d(t,{Zo:()=>l,pz:()=>i,tB:()=>s,uC:()=>a});var n=r("iUT/");const s="-showPlaylists",l="-showDescription",i=(e,t)=>e===t||e===`${t}${s}`||e===`${t}${l}`,a=()=>(0,n.A)("context-menu-")},UAd1:(e,t,r)=>{r.d(t,{IG:()=>c,PV:()=>o,no:()=>a,pE:()=>i});var n=r("3mue"),s=r("VwKc"),l=r("5LFp");function i(){return e=>{e({type:l.Dp}),e((0,s.KF)()),e((0,n.WI)()),e((0,n.eK)())}}const a=e=>({type:l.HO,active:e}),o=e=>({type:l.J,active:e}),c=e=>({type:l.Kf,active:e})},"5LFp":(e,t,r)=>{r.d(t,{Dp:()=>s,HO:()=>l,J:()=>i,Kf:()=>a,MC:()=>n});const n="components/Player/config/SET_BLIND_TEST_MODE",s="components/Player/config/UPDATED_PLAYER_TYPE",l="components/Player/config/SET_PLAYER_FULL",i="components/Player/config/SET_PLAYER_QUEUELIST",a="components/Player/config/SET_PLAYER_LYRICS"},VwKc:(e,t,r)=>{r.d(t,{Ay:()=>g,SD:()=>w,Cv:()=>G,Dx:()=>N,Tr:()=>L,VX:()=>$,b3:()=>K,hN:()=>J,$7:()=>j,iQ:()=>B,UE:()=>O,tc:()=>V,KX:()=>W,ZQ:()=>U,uY:()=>X,jk:()=>H,kI:()=>x,KF:()=>C,Up:()=>v,WN:()=>D,O:()=>R,NL:()=>I,FZ:()=>b,Fh:()=>f});var n=r("G4qV"),s=r("ucSm"),l=r("nLzw"),i=r("u7vQ"),a=r("AfN5"),o=r("Vd8Q"),c=r("3mue"),d=r("o+h5"),u=r("CyAC"),p=r("Vzbh");const h=r.p+"images/common/ads/player.887183beab8f8916c354.jpg";var m=r("JPje"),A=r("fJgm"),E=r("5G9X"),y=r("DFyM");const P={track:{},trackPrev:{},trackNext:{},id:"-1",list:[],index:0,maxPlayedIndex:0,trackDuration:0,tracklistDuration:0,albumTitle:"",trackTitle:"",trackArtists:[],isFavorite:!1,isExplicit:!1,isLastSong:!0,isFingerprinted:!1,mediaType:"",context:{},cover:`https://${o.default.get("host_img_url_ssl")}/cover/${y.e0}x${y.e0}.jpg`,unshuffledList:[],liveStreamData:{},quality:p.en.STANDARD},_=e=>{if(!(0,s.A)(e))return[];if(e.LIVE_ID)return[];const t=e.ARTISTS||[{ART_NAME:e.ART_NAME||e.SHOW_NAME,ART_ID:e.ART_ID||e.SHOW_ID}],r=[];return t.filter((e=>-1===r.indexOf(e.ART_ID)&&(r.push(e.ART_ID),!0)))};function S(){const e=i.Ay.getCurrentSong()||{},t=Object.assign({},i.Ay.getPrevSong())||{},r=Object.assign({},i.Ay.getNextSong())||{},n=i.Ay.getMediaId(e),s=i.Ay.getMediaType()||"",l=e[n]?String(e[n]):"-1";let o=i.Ay.getTrackList()||[];o=o.map((e=>Object.assign({},e)));let c=i.Ay.getTrackList(!1,!0)||[];return c=c.map((e=>Object.assign({},e))),{track:e,trackPrev:t,trackNext:r,id:l,list:o,unshuffledList:c,index:i.Ay.getTrackListIndex(),tracklistDuration:Number(i.Ay.getTrackListDuration()),trackDuration:Number(i.Ay.getDuration())||0,albumTitle:(p=e,d.Ay.parser.name(p)||""),trackArtists:_(e),isFavorite:A.A.isFavorite(E.Ay.Song,l),isExplicit:Boolean((0,u.AP)(e)||(0,u.Wh)(e)),isLastSong:i.Ay.isLastSong(),liveStreamData:s===a.zu.LIVE_STREAM?o[0]:{},isFingerprinted:!1,mediaType:i.Ay.getMediaType()||"",context:i.Ay.getContext()||{}};var p}const T=e=>{const t={...e,...S()};return t.maxPlayedIndex=(0,l.A)(e.context,t.context)?Math.max(i.Ay.getTrackListIndex(),e.maxPlayedIndex):i.Ay.getTrackListIndex(),t};function g(e=P,t={}){let r,n,s,o,c,d;switch(t.type){case y.xo:case y.Qx:return T(e);case y.gz:return r=i.Ay.getCurrentSong()||{},o=i.Ay.getMediaId(r),e.id!==String(r[o])||!(0,l.A)(e.context,i.Ay.getContext())||e.track&&e.track.UID&&e.track.UID!==r.UID||e.track&&e.track.TS&&e.track.TS!==r.TS?T(e):e;case y.p8:return r=t.track,o=i.Ay.getMediaId(r),d=String(r[o]),e.id===d&&e.isFingerprinted?e:{...e,track:r,id:d,trackArtists:_(r),isFingerprinted:!0,isFavorite:A.A.isFavorite(E.Ay.Song,d)};case y.hC:return c=A.A.isFavorite(E.Ay.Song,e.id),c!==e.isFavorite?{...e,isFavorite:c}:e;case y.q6:return t.trackDuration!==e.trackDuration?{...e,trackDuration:i.Ay.isLimited()?30:Number(t.trackDuration)}:e;case m.f6:return i.Ay.getRepeat()===a.EV.SINGLE?e:(n=Object.assign({},i.Ay.getPrevSong())||{},s=Object.assign({},i.Ay.getNextSong())||{},o=i.Ay.getMediaId(r),e.trackPrev[o]!==n[o]||e.trackNext[o]!==s[o]?{...e,trackPrev:n,trackNext:s,isLastSong:i.Ay.isLastSong()}:e);case y.GD:return{...e,trackTitle:t.trackTitle};case y.LK:return{...e,cover:t.cover};case y.Xv:return{...e,quality:t.quality};default:return e}}const v=e=>({type:y.Xv,quality:e});function C(){return(e,t)=>{const r=Q(t());r!==t().player.music.cover&&e({type:y.LK,cover:r})}}function k(){return(e,t)=>{const r=X(t());r!==t().player.music.trackTitle&&e({type:y.GD,trackTitle:r})}}function x(){return e=>{e({type:y.xo}),e(C()),e(k()),e((0,c.WI)()),e((0,c.eK)())}}function b(e={}){return t=>{t({...e,type:y.gz}),t(C()),t(k()),t((0,c.WI)()),t((0,c.eK)())}}function f(e={}){return t=>{t({...e,type:y.Qx}),t(C()),t(k()),t((0,c.WI)()),t((0,c.eK)())}}function I(e){return t=>{t({type:y.p8,track:e.track}),t(C()),t(k())}}const R=()=>({type:y.hC}),D=e=>({type:y.q6,trackDuration:Number(e.trackDuration)}),L=({player:e})=>e.music.mediaType||null,w=({player:e})=>e.music.context||null,N=({player:e})=>e.music.index,M=({player:e})=>e.music.isFingerprinted,O=({player:e})=>e.music.track||{},Y=({player:e})=>e.music.trackPrev||{},z=({player:e})=>e.music.trackNext||{},F=({player:e})=>e.config.playerType,G=({player:e})=>e.music.cover,B=({player:e})=>e.music.quality,V=({player:e})=>e.music.albumTitle,W=({player:e})=>e.music.trackArtists,U=({player:e})=>e.music.cover,q=(e,t,r,n)=>{if((0,i._k)(t)||!(0,s.A)(r))return"";let l=r[{[a.zu.EPISODE]:"EPISODE_TITLE",[a.zu.LIVE_STREAM]:n?"SNG_TITLE":"LIVESTREAM_TITLE"}[e]]||r.SNG_TITLE;return"string"==typeof r.VERSION&&r.VERSION.length>0&&(l+=" "+r.VERSION),l},Q=(0,n.Mz)([O,F,L,M,({player:e})=>e.config.isBlindTestMode,({player:e})=>e.music.track?e.music.track.ALB_PICTURE:"",({player:e})=>e.music.track?e.music.track.PICTURE_URL:"",({player:e})=>e.music.track?e.music.track.EPISODE_IMAGE_MD5:"",({player:e})=>e.music.liveStreamData],((e,t,r,n,s,l,i,c,d)=>{let u=((p=`https://${o.default.get("host_img_url_ssl")}`)&&(p=p.lastIndexOf("/")===p.length-1?p.substr(0,p.length-1):p),p);var p;let m=h;if(t!==a.Cc.ADS&&(m=`${u}/cover`,r===a.zu.EPISODE?m=`${u}/talk/${c}`:s||"string"!=typeof l||(m+="/"+l),m+=`/${y.e0}x${y.e0}.jpg`),r===a.zu.EXTERNAL||r===a.zu.LIVE_STREAM){let e="";e=r===a.zu.LIVE_STREAM?n?l:d.LIVESTREAM_IMAGE_MD5:i,m="http"===e.substring(0,4)?e:`${u}/${n?"cover":"misc"}/${e}/${y.e0}x${y.e0}.jpg`}return m})),H=(0,n.Mz)([L,O],((e,t)=>e===a.zu.SONG&&void 0!==t.LYRICS_ID&&0!==Number(t.LYRICS_ID))),X=(0,n.Mz)([L,F,O,M],q),j=(0,n.Mz)([L,F,Y],q),K=(0,n.Mz)([L,F,z],q),J=(0,n.Mz)([Y],_),$=(0,n.Mz)([z],_)},xOQS:(e,t,r)=>{r.d(t,{A:()=>A});var n=r("+9dH"),s=r("q1tI"),l=r("i8i4"),i=r("TRpf"),a=r("juqV"),o=r("8L3F"),c=r("lXQd"),d=r("WKgy"),u=r("WmA5"),p=r("WfRu"),h=r("NgX8"),m=r("zDvJ");const A=e=>{class t extends s.Component{constructor(e){super(e),this._popper=null,this._popperRef=null,this._targetRef=null,this._contentRef=null,this._arrowRef=null,this._showTimeout=null,this._unlisten=null,this._listenerClickActive=!1,this._listenerHistory=u.A.listen((()=>{this._hide()})),this._onTargetClick=this._onTargetClick.bind(this),this._onDocumentClick=this._onDocumentClick.bind(this),this._onScroll=this._onScroll.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this)}componentDidMount(){this.props.isVisible&&this._initPopper()}UNSAFE_componentWillReceiveProps(e){e.isDisabled&&(this._hide(),this._destroy(),this._listenerHistory(),this._listenerHistory=()=>{})}componentDidUpdate(){this.props.isVisible&&this._initPopper()}componentWillUnmount(){this._listenerHistory(),this._removeListener(),this._destroy()}render(){const{trigger:e,isDisabled:t,tag:r,className:n,isVisible:l}=this.props;e.includes(m.uW)&&l&&!this._listenerClickActive&&(this._listenerClickActive=!0,document.addEventListener("click",this._onDocumentClick)),e.includes(m.h4)&&l&&!this._listenerScrollActive&&(this._listenerScrollActive=!0,window.addEventListener("scroll",this._onScroll,{passive:!0}),window.addEventListener("resize",this._onScroll,{passive:!0}));const i={className:(0,a.A)("popper-wrapper",n),onMouseEnter:e.includes(m.mH)&&!t?this._onMouseEnter:null,onMouseLeave:e.includes(m.mH)&&!t?this._onMouseLeave:null,ref:e=>this._popperRef=e};return s.createElement(r,i,this._renderTarget(),this._renderWrapper())}_renderWrapper(){const{isVisible:e,usePortal:t}=this.props;if(!e)return null;const r=s.createElement("div",{className:"popper",ref:e=>this._contentRef=e,style:this._getPopperStyle()},this._renderPopper(),this._renderArrow());return t?(0,l.createPortal)(r,document.body):r}_renderTarget(){const{children:e,tooltip:t,isVisible:r}=this.props,i=s.cloneElement(e,{className:(0,a.A)(e.props.className,{"is-active":r}),onClick:this._onTargetClick,ref:e=>this._targetRef=(0,l.findDOMNode)(e)});return t?s.createElement(h.m,(0,n.A)({hasArrow:!0},t,{label:t.text,placement:t.position}),i):i}_renderPopper(){const{data:t,isFullWidth:r,isVisible:l,params:i}=this.props;return l?(r&&(t.size=m.YT),s.createElement(e,(0,n.A)({},t,i,{onClose:()=>this._hide()}))):null}_renderArrow(){const{hasArrow:e}=this.props;if(!e)return null;const t={className:"popper-arrow",ref:e=>this._arrowRef=e};return s.createElement("div",t)}_onTargetClick(e){const{children:t,trigger:r,isDisabled:n,closeOnClick:s,isVisible:l}=this.props;r.includes(m.uW)&&!n&&(l&&s?this._hide():this._show()),"function"==typeof t.props.onClick&&t.props.onClick(e)}_onDocumentClick(e){this._popperRef&&this._popperRef.contains(e.target)||(0,c.A)(this,"_popper.popper")&&this._popper.popper.contains(e.target)||this._hide()}_onScroll(){this._hide()}_onMouseEnter(){const{delay:e}=this.props;e>0?this._showTimeout=window.setTimeout((()=>{this._show()}),e):this._show()}_onMouseLeave(e){e.relatedTarget!==window?this._hide():e.stopPropagation()}_initPopper(){if(!this._targetRef||!this._contentRef)return;let e={placement:this.props.placement,modifiers:{arrow:{enabled:this.props.hasArrow,element:this._arrowRef}}};this.props.usePortal&&(e.modifiers={...e.modifiers,preventOverflow:{boundariesElement:"viewport"}}),this._popper=new o.A(this._targetRef,this._contentRef,e)}_getPopperStyle(){const{isVisible:e,isFullWidth:t,usePortal:r}=this.props;return{display:e?null:"none",width:t?"100%":void 0,zIndex:r?300:null}}_show(){const{popperId:e,isVisible:t}=this.props;t||this.props.showPopper(e)}_hide(){const{isVisible:e,usePortal:t}=this.props;this._clear(),e&&(this.props.hidePopper(),t&&this._destroy()),this._removeListener()}_destroy(){this._unlisten&&this._unlisten(),this._popper&&(this._popper.destroy(),this._popper=null)}_clear(){this._showTimeout&&window.clearTimeout(this._showTimeout)}_removeListener(){this.props.trigger.includes(m.uW)&&(this._listenerClickActive=!1,document.removeEventListener("click",this._onDocumentClick)),this.props.trigger.includes(m.h4)&&(this._listenerScrollActive=!1,window.removeEventListener("scroll",this._onScroll,{passive:!0}),window.removeEventListener("resize",this._onScroll,{passive:!0}))}}return t.defaultProps={placement:"top",hasArrow:!0,trigger:[m.uW],delay:0,closeOnClick:!0,isDisabled:!1,isFullWidth:!1,tag:"div",data:{},tooltip:null,usePortal:!1},d.A.addReducers({popper:p.Ay}),(0,i.Ng)((({popper:e},{popperId:t})=>({isVisible:(0,p.Pu)(e,t)})),{showPopper:p.On,hidePopper:p.Lm})(t)}},WfRu:(e,t,r)=>{r.d(t,{Ay:()=>l,Lm:()=>a,On:()=>i,Pu:()=>o});const n="components/Popper/SHOW_POPPER",s="components/Popper/HIDE_POPPER",l=(e={popperId:""},t={})=>{switch(t.type){case n:return{popperId:t.popperId};case s:return{popperId:""};default:return e}},i=e=>({type:n,popperId:e}),a=()=>({type:s}),o=(e,t)=>e.popperId===t},zDvJ:(e,t,r)=>{r.d(t,{Dn:()=>n,W8:()=>s,YT:()=>l,h4:()=>o,mH:()=>a,uW:()=>i});const n="sm",s="lg",l="full",i="click",a="hover",o="scroll"},rXlm:(e,t,r)=>{r.d(t,{A:()=>c}),r("noe2");var n=r("q1tI"),s=r("juqV"),l=r("VQs7"),i=r("EVdn"),a=r.n(i);class o extends n.PureComponent{constructor(e){super(e),this.getScrollTop=this.getScrollTop.bind(this),this.getScrollHeight=this.getScrollHeight.bind(this),this.getClientHeight=this.getClientHeight.bind(this),this.scrollTop=this.scrollTop.bind(this),this.scrollBottom=this.scrollBottom.bind(this),this.scrollTo=this.scrollTo.bind(this),this.scrollToTop=this.scrollToTop.bind(this),this.scrollToBottom=this.scrollToBottom.bind(this),this.update=this.update.bind(this),this._scrollerRef=null,this._nanoRef=null,this._contentRef=null,this._onScrollTop=this._onScrollTop.bind(this),this._onScrollEnd=this._onScrollEnd.bind(this),this.state={hasShadowTop:!1,hasShadowBottom:!1}}componentDidMount(){const{preventPageScrolling:e,disableResize:t,alwaysVisible:r,shadow:n,onScroll:s,onScrollTop:l,onScrollEnd:i}=this.props;("function"==typeof l||this._hasShadowTop())&&this._scrollerRef.on("scrolltop",this._onScrollTop),("function"==typeof i||this._hasShadowBottom())&&this._scrollerRef.on("scrollend",this._onScrollEnd),!1!==n&&this._scrollerRef.on("update",this.update),"function"==typeof s&&this._scrollerRef.on("update",(e=>s(e))),setImmediate((()=>{this._scrollerRef.nanoScroller({preventPageScrolling:e,disableResize:t,alwaysVisible:r}),this.update()}))}getSnapshotBeforeUpdate(){return{contentHeight:this.getContentHeight()}}componentDidUpdate(e,t,r){const{preventPageScrolling:n,disableResize:s,alwaysVisible:l}=this.props;r.contentHeight!==this.getContentHeight()&&(this._scrollerRef.nanoScroller({preventPageScrolling:n,disableResize:s,alwaysVisible:l}),this.update())}componentWillUnmount(){this._scrollerRef.off("scrolltop scrollend update"),this._scrollerRef.nanoScroller({destroy:!0})}getScrollTop(){return this._nanoRef?this._nanoRef.scrollTop:0}getScrollHeight(){return this._nanoRef?this._nanoRef.scrollHeight:0}getClientHeight(){return this._nanoRef?this._nanoRef.clientHeight:0}getContentHeight(){return this._contentRef?this._contentRef.clientHeight:0}scrollTop(e){this._scrollerRef.nanoScroller({scrollTop:e})}scrollBottom(e){this._scrollerRef.nanoScroller({scrollBottom:e})}scrollTo(e){this._scrollerRef.nanoScroller({scrollTo:e})}scrollToTop(){this._scrollerRef.nanoScroller({scroll:"top"})}scrollToBottom(){this._scrollerRef.nanoScroller({scroll:"bottom"})}update(e,t){t||(t={position:this.getScrollTop(),maximum:this.getScrollHeight()-this.getClientHeight()}),t.maximum<0||this.setState({hasShadowBottom:this._hasShadowBottom()&&t.position<t.maximum,hasShadowTop:this._hasShadowTop()&&t.position>0})}render(){const{children:e,className:t,preventPageScrolling:r,disableResize:l,alwaysVisible:i,shadow:o,onScroll:c,onScrollTop:d,onScrollEnd:u,...p}=this.props,h={className:(0,s.A)(t,"nano"),ref:e=>this._scrollerRef=a()(e),...p};return n.createElement("div",h,this._renderShadowTop(),this._renderShadowBottom(),this._renderContent())}_renderShadowTop(){const{hasShadowTop:e}=this.state,t=(0,s.A)("scroller-shadow-top",{"is-active":e});return n.createElement("div",{className:t})}_renderContent(){const{children:e}=this.props;return n.createElement(l.P.div,{layoutScroll:!0,className:"nano-content",ref:e=>this._nanoRef=e},n.createElement("div",{className:"nano-content-ref",ref:e=>this._contentRef=e},e))}_renderShadowBottom(){const{hasShadowBottom:e}=this.state,t=(0,s.A)("scroller-shadow-bottom",{"is-active":e});return n.createElement("div",{className:t})}_onScrollTop(){const{onScrollTop:e}=this.props;"function"==typeof e&&e(),this._hasShadowTop()&&this.setState({hasShadowTop:!1})}_onScrollEnd(){const{onScrollEnd:e}=this.props;"function"==typeof e&&e(),this._hasShadowBottom()&&this.setState({hasShadowBottom:!1})}_hasShadowTop(){const{shadow:e}=this.props;return!0===e||"top"===e}_hasShadowBottom(){const{shadow:e}=this.props;return!0===e||"bottom"===e}}o.defaultProps={preventPageScrolling:!0,disableResize:!1,alwaysVisible:!1,shadow:!0,onScroll:void 0,onScrollTop:void 0,onScrollEnd:void 0};const c=o},"Nz/Y":(e,t,r)=>{r.d(t,{A:()=>a});var n=r("Fzox"),s=r("0JBE"),l=r("LOQS"),i=r("hMU6");const a=()=>{const{page:e,section:t,entityId:r,entity:a,item:o,itemId:c}=(0,s.iQ)(),d=(0,n.G)((({user:e})=>e.USER.USER_ID.toString()));return e&&void 0!==r&&void 0!==a?(n=null,s)=>{(c||null!=s&&s.id)&&(o||null!=s&&s.type)&&l.A.log({type:"cdp",eventName:"item_collected",customAttributes:{screen_view_name:e,item_id:(null==s?void 0:s.id)||c,item_type:(null==s?void 0:s.type)||o,...a&&{screen_view_id_type:a},...r&&{screen_view_id:r},...t&&{section_name:t},...(0,i.W)(d,n,"favorite")}})}:()=>{}}},aWMX:(e,t,r)=>{r.d(t,{A:()=>l});var n=r("0JBE"),s=r("LOQS");const l=()=>{const{page:e,entityId:t,entity:r}=(0,n.iQ)();return e&&t&&r?(n,{id:l,type:i})=>s.A.log({type:"cdp",eventName:"item_queued",customAttributes:{screen_view_name:e,screen_view_id:t,screen_view_id_type:r,item_id:l,item_type:i,contextual_menu_option:n}}):()=>{}}},GjdC:(e,t,r)=>{r.d(t,{A:()=>l});var n=r("0JBE"),s=r("LOQS");const l=()=>{const{page:e,section:t,entityId:r,entity:l,item:i,itemId:a,itemIndex:o}=(0,n.iQ)();if(!e)return()=>{};const c=o||0===o?o+1:null;return n=>s.A.log({type:"cdp",eventName:"play_clicked",eventVersion:2,customAttributes:{screen_view_name:e,play_type:n,...l&&{screen_view_id_type:l},...r&&{screen_view_id:r},...t&&{section_name:t},...c&&{item_position:c},...a&&{item_id:a},...i&&{item_type:i}}})}},hMU6:(e,t,r)=>{r.d(t,{W:()=>n});const n=(e,t,r)=>({collection_id:e,collection_type:r,contextual_menu_option:t})},DNpT:(e,t,r)=>{r.d(t,{Ht:()=>o,Ki:()=>c,Nl:()=>d,eD:()=>u}),r("/eM8");var n=r("nrKQ"),s=r("UyDI"),l=r("oB8A");const i=(e,t)=>e.type===l.x.EPISODE?((e,t)=>new Promise(((r,s)=>{n.A.call({method:"episode.bookmarkSet",data:{EPISODE_ID:e.id,OFFSET:e.offset,DURATION:t,ISHEARD:e.played?1:0},success:()=>{r(e)},error:e=>{s(e)}})})))(e,t):Promise.reject(new Error(`Cannot persist bookmark of type ${e.type}`)),a=(e,t)=>e.type===l.x.EPISODE?((e,t)=>new Promise(((r,s)=>{n.A.call({method:t?"episode.markAsPlayed":"episode.markAsNotPlayed",data:{EPISODE_ID:e.id},success:()=>{r(e)},error:e=>{s(e)}})})))(e,t):Promise.reject(new Error(`Cannot persist bookmark of type ${e.type}`)),o=(e,t,r,n)=>{const l=s.A.createNotPlayedBookmark(t,e);return l.updateProgress(r,n),i(l,n)},c=(e,t,r)=>(e.updateProgress(t,r),i(e,r)),d=(e,t,r)=>(r?r.markAsPlayed():r=s.A.createPlayedBookmark(t,e),a(r,!0)),u=(e,t,r)=>(r?r.markAsNotPlayed():r=s.A.createNotPlayedBookmark(t,e),a(r,!1))},Mb6w:(e,t,r)=>{r.d(t,{A:()=>c});var n=r("vXsw"),s=r("WKgy"),l=r("FdMc"),i=r("OPhi"),a=r("34sk"),o=r("xobL");const c={add:({id:e,type:t,context:r})=>{if(!1===(0,o.UJ)(s.A.getState().user))return void n.g.goToConnection();if(e=String(e),(0,i.i8)(s.A.getState().feedbacks,e,t))return;let c={};"object"==typeof r&&Object.keys(r).length>=2&&(c={id:r.ID,t:r.TYPE}),s.A.dispatch((0,a.zZ)(e,t,(0,l.A)(),c))},remove:({id:e,type:t,context:r})=>{if(!1===(0,o.UJ)(s.A.getState().user))return void n.g.goToConnection();if(e=String(e),!(0,i.i8)(s.A.getState().feedbacks,e,t))return;const l={id:r.ID,t:r.TYPE};s.A.dispatch((0,a.u5)(e,t,l))}}},Fzox:(e,t,r)=>{r.d(t,{G:()=>l,j:()=>s});var n=r("TRpf");const s=()=>(0,n.wA)(),l=n.d4},"70bL":(e,t,r)=>{r.d(t,{d0:()=>s,sc:()=>n});const n=({app:e})=>e.online,s=({app:e})=>e.previousPath},nxAS:(e,t,r)=>{r.d(t,{Ay:()=>i,Fn:()=>o,J2:()=>a});const n="fullscreen/SHOW_FULLSCREEN",s="fullscreen/HIDE_FULLSCREEN",l={name:"",data:{}};function i(e=l,t={type:null}){switch(t.type){case n:return t.name?{name:t.name,data:t.data}:e;case s:return l;default:return e}}const a=({name:e,data:t})=>({type:n,name:e,data:t}),o=()=>({type:s})},hTBE:(e,t,r)=>{r.d(t,{A:()=>A,v:()=>m}),r("W8Tb");var n=r("5G9X"),s=r("WKgy"),l=r("OPhi"),i=r("6EMc"),a=r("/sVC"),o=r("8iEq");const c=e=>(t,r)=>{let i=null,a=null;const o=e?n.vn[e]:null;o&&(i=t[o]?(0,l.vN)(s.A.getState().feedbacks,e,t[o]):null,a=r[o]?(0,l.vN)(s.A.getState().feedbacks,e,r[o]):null);const c=t.DATE_CREATE?Date.parse(t.DATE_CREATE.replace(" ","T")+".000Z")/1e3:null,d=r.DATE_CREATE?Date.parse(r.DATE_CREATE.replace(" ","T")+".000Z")/1e3:null,u=i||c||0,p=a||d||0;return u===p?0:u<p?1:-1},d=e=>(t,r,n)=>{n="boolean"==typeof n&&n;const s=(t.ALB_TITLE||"").toLowerCase().trim(),l=(r.ALB_TITLE||"").toLowerCase().trim();return s===l?n?0:u(e)(t,r,!0):(0,i.A)(s,l)},u=e=>(t,r,n)=>{n="boolean"==typeof n&&n;const s=(t.ART_NAME||"").toLowerCase().trim(),l=(r.ART_NAME||"").toLowerCase().trim();return s===l?n?0:d(e)(t,r,!0):(0,i.A)(s,l)},p=()=>(e,t)=>{const r=(e.SHOW_NAME||"").toLowerCase().trim(),n=(t.SHOW_NAME||"").toLowerCase().trim();return r===n?0:(0,i.A)(r,n)},h={[o.lG]:u,[o._y]:d,[o.WU]:()=>(e,t)=>{const r=e.DATE_MOD||"0000-00-00 00:00:00",n=t.DATE_MOD||"0000-00-00 00:00:00";return r===n?0:r<n?1:-1},[o.L$]:c,[o.Lq]:()=>(e,t)=>{const r=(e.TITLE||"").toLowerCase().trim(),n=(t.TITLE||"").toLowerCase().trim();return r===n?0:(0,i.A)(r,n)},[o.pZ]:()=>(e,t)=>{const r=(e.NAME||"").toLowerCase().trim(),n=(t.NAME||"").toLowerCase().trim();return r===n?0:(0,i.A)(r,n)},[o.D7]:p,[o.Lh]:c,[o.QS]:()=>(e,t,r)=>{const n=(0,a.A)(e)||"0000-00-00 00:00:00",s=(0,a.A)(t)||"0000-00-00 00:00:00";return n===s?r?0:((e,t)=>Number(e.ALB_ID)<Number(t.ALB_ID)?1:-1)(e,t):n<s?1:-1},[o.m0]:e=>(t,r)=>{const n=Number(t.RANK),s=Number(r.RANK);return n===s?d(e)(t,r):s>n?1:-1},[o.Y]:()=>(e,t)=>{if(!e.LATEST_EPISODE||!t.LATEST_EPISODE)return 0;if(e.LATEST_EPISODE.data.length>0&&t.LATEST_EPISODE.data.length>0){const r=e.LATEST_EPISODE.data[0],n=t.LATEST_EPISODE.data[0],s=r.EPISODE_PUBLISHED_TIMESTAMP||"0000-00-00 00:00:00",l=n.EPISODE_PUBLISHED_TIMESTAMP||"0000-00-00 00:00:00";return s===l?p()(e,t):s<l?1:-1}return 0}},m=e=>"function"==typeof h[e],A=(e,t,r)=>(e=e.slice(0),t!==o.cT&&m(t)?e.sort(h[t](r)):e)},"0JBE":(e,t,r)=>{r.d(t,{OJ:()=>l,S2:()=>a,iQ:()=>i});var n=r("q1tI");const s=(0,n.createContext)({}),l=({value:e,children:t})=>{const r=(0,n.useContext)(s);return n.createElement(s.Provider,{value:{...r,...e}},t)},i=()=>(0,n.useContext)(s);function a(e,t){const r=e.displayName||e.name||"Component",s=r=>n.createElement(l,{value:"function"==typeof t?t(r):t},n.createElement(e,r));return s.displayName=`withBreadcrumb(${r})`,s}},"6EMc":(e,t,r)=>{r.d(t,{A:()=>l});var n=r("WKgy");const s={},l=(e,t)=>{if(!window||!window.Intl||!window.Intl.Collator)return e<t?-1:1;const r=n.A.getState().user.SETTING_LOCALE;return{}.hasOwnProperty.call(s,r)||(s[r]=new Intl.Collator([r,"en-US"])),s[r].compare(e,t)}},g1Fm:(e,t,r)=>{function n(e,t=!1){return e?t?e.charAt(0).toUpperCase()+e.substr(1).toLocaleLowerCase():e.charAt(0).toUpperCase()+e.substr(1):e}r.d(t,{A:()=>n})},"1j1w":(e,t,r)=>{r.d(t,{A:()=>n});const n={root:"KUMiD"}}}]);