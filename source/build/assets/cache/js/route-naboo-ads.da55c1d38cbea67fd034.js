(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[4569],{"45CL":function(e){e.exports=function(){"use strict";function e(){return void 0!==navigator.brave&&void 0!==navigator.brave.isBrave}function t(){return"string"==typeof navigator.userAgent&&navigator.userAgent.match(/Opera|OPR\//)}function s(){return new Promise((function(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&e(s)},s.open("GET","https://raw.githubusercontent.com/wmcmurray/just-detect-adblock/master/baits/pagead2.googlesyndication.com",!0),s.send()}))}function n(e){return 200===e.status&&!e.responseText.match(/^thistextshouldbethere(\n|)$/)}function a(e){return 0===e.status&&!e.responseText.match(/^thistextshouldbethere(\n|)$/)}function r(){if(null!==window.document.body.getAttribute("abp"))return!0;var e=function(){var e=document.createElement("div");return e.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adContent adBanner"),e.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"),e}();window.document.body.appendChild(e);var t=function(e){if(null===e.offsetParent||0==e.offsetHeight||0==e.offsetLeft||0==e.offsetTop||0==e.offsetWidth||0==e.clientHeight||0==e.clientWidth)return!0;if(void 0!==window.getComputedStyle){var t=window.getComputedStyle(e,null);if(t&&("none"==t.getPropertyValue("display")||"hidden"==t.getPropertyValue("visibility")))return!0}return!1}(e);return window.document.body.removeChild(e),t}var i;return{detectAnyAdblocker:function(){return new Promise((function(i,o){if(r())return i(!0);e()||t()?s().then((function(s){return e()?i(n(s)):t()?i(a(s)):void i(!1)})):i(!1)}))},detectDomAdblocker:(i=r,function(){var e=arguments;return new Promise((function(t,s){t(i.apply(this,e))}))}),detectBraveShields:function(){return new Promise((function(t,a){e()?s().then((function(e){t(n(e))})):t(!1)}))},detectOperaAdblocker:function(){return new Promise((function(e,n){t()?s().then((function(t){e(a(t))})):e(!1)}))},isDetected:function(e,t){return function(){return console.warn("just-detect-adblock : The `isDetected()` method is now deprecated, please use `detectAnyAdblocker()` instead, which returns a Promise and can detect more stuff (like Brave Shields)."),e.apply(this,arguments)}}(r)}}()},RFor:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n={wrapper:"S5aHZ",containerRevamp:"n7Pze",container:"M0TJf",gradientRevamp:"oS89a",gradient:"oYrBR",button:"XuiT3"}},fPrZ:(e,t,s)=>{"use strict";s.d(t,{CY:()=>o,TE:()=>i,wH:()=>d});const n="ads/ADD_ARGS_ADS",r=document.styleSheets.length;function i(e){return{type:n,args:e}}const o=e=>(t,s)=>{let n;e&&(n=`sas_${e}`),window.sas&&window.sas.clean&&(window.sas.clean(n),e?t(l(e)):s().ads.shownFormatIds.forEach((e=>{t(l(e))})));const a=/sas_[0-9]{0,}/,i=document.styleSheets.length;if(i!==r&&i>0){const e=i-1,t=document.styleSheets[e];!1!==a.test(t.innerHTML)&&t.ownerNode.parentNode.removeChild(t.ownerNode)}return t({type:"ads/CLEAN_ADS"})},d=e=>"none"===document.getElementById(`sas_${e}`).style.display,l=e=>({type:"ads/HIDE_FORMAT",formatId:e})},tpKx:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>de});var n=s("q1tI"),a=s("TRpf"),r=s("X6oL"),i=s("qMCD"),o=s("axbb"),d=s("juqV"),l=s("FuY1"),c=s("Vd8Q"),u=s("ntT5"),p=s("tZCQ"),h=s("nxAS"),m=s("xobL"),A=s("aHAS"),g=s("fPrZ"),y=s("MeIc"),_=s("mUtM"),f=s("TqF5"),v=s("UA58"),E=s("MAes"),b=s("Ty5D"),w=s("ea/m"),T=s("+9dH"),P=s("Aw62"),C=s("JsMx"),S=s("4PKR");const D=e=>t=>n.createElement(S.Ay.Consumer,null,(s=>n.createElement(P.Ay.Consumer,null,(a=>n.createElement(C.Ay.Consumer,null,(r=>n.createElement(e,(0,T.A)({},t,{adsContext:s,audioBreakContext:a,adsConfigContext:r}))))))));var k=s("45CL");const L=()=>{const{isArchBanner:e}=(0,S.gA)(),{pathname:t}=(0,b.zy)();return t.includes("account")?null:n.createElement("div",{className:"page-wrapper","data-testid":"adslot1"},n.createElement("div",{className:"page-content"},n.createElement("div",{id:"adslot1",className:"ads ads-top"+(e?" has-ads-full":"")})))};var B,R=s("RFor");const I=()=>{const e=p.A.isAllowed("revamp2023"),{pathname:t}=(0,b.zy)();return t.includes("playlist")?n.createElement("div",{className:R.A.wrapper},n.createElement("div",{className:e?R.A.gradientRevamp:R.A.gradient}),n.createElement("div",{"data-testid":"sponsored_playlist",id:"sponsored_playlist",className:e?R.A.containerRevamp:R.A.container}),B||(B=n.createElement("div",{className:"ads ads-bottom ads-bottom-alone"},n.createElement("div",{"data-testid":"adslot2",id:"adslot2"})))):null};var N,M;const U=({type:e})=>"sponsored_playlist"===e?N||(N=n.createElement(I,null)):M||(M=n.createElement(L,null));var O,F,H=s("u7vQ"),z=s("AfN5");const $=e=>{switch(e){case"home":return"homepage";case"loved":return"favorite_tracks";case"channels_explore":return"channel_home";default:return e}},j=({children:e})=>{var t;const{isScriptLoaded:s,setIsSponsored:r,displayAdSlot:i,destroySlot1:o}=(0,S.gA)(),{adsConfigState:d}=(0,C.Y9)(),l=null==d||null===(t=d.profile)||void 0===t?void 0:t.user_hashed_uniq_id,{getProfileType:c,getProfileReg:u,getDzgroup:p,adsConfigReady:h,getIsWhitelisted:A}=(0,C.Y9)(),[g,y]=(0,n.useState)(),[_,f]=(0,n.useState)(!1),v=(0,a.d4)((({user:e})=>e)),E=(0,m.Z0)(v),b=location.pathname.replace(/[^0-9]/g,""),w=e=>e===T?b:null,T=(0,a.d4)((({app:e})=>e.currentPage)),P=(0,a.d4)((({app:e})=>"channels"===e.currentPage?e.currentPath.split("/").slice(-1):"")),D=e=>`/104134276/deezer_app_windows/${$(T)}/${e}/${E}${P?"/"+P:""}`,k=(0,n.useCallback)((()=>{const e=window.googletag;if(e){const t=e.pubads().setTargeting("pagetype",$(T)).setTargeting("user_gender",(e=>{switch(e){case"F":return"female";case"M":return"male";case"NonBinary":return"non_binary";default:return"other"}})((0,m.o_)(v))).setTargeting("user_age",Math.min((0,m.QO)(v),99).toString()).setTargeting("user_age_range",(e=>{switch(!0){case e<18:return"-18";case e<25:return"18-24";case e<35:return"25-34";case e<50:return"35-49";default:return"over65"}})((0,m.QO)(v))).setTargeting("user_id",((0,m.F6)(v)||0).toString()).setTargeting("user_profile",c()||"").setTargeting("user_reg_days",u()||""),s=p(),n=w("album"),a=w("artist"),r=w("playlist"),i=w("show"),o=A();n&&t.setTargeting("album_id",n),a&&t.setTargeting("artist_id",a),r&&t.setTargeting("playlist_id",r),i&&t.setTargeting("podcast_id",i),s&&t.setTargeting("dzgroup",s),P&&t.setTargeting("channel",P),o&&t.setTargeting("whitelisted_users",o)}}),[s,T,v]),x=(0,n.useCallback)((()=>{if(!_){const e=window.googletag;null==e||e.pubads().collapseEmptyDivs(),null==e||e.pubads().disableInitialLoad(),null==e||e.pubads().enableSingleRequest(),l&&(null==e||e.pubads().setPublisherProvidedId(l)),null==e||e.enableServices(),f(!0)}}),[s,h,_]),L=(0,n.useCallback)((()=>{var e;if(H.Ay.getPlayerType()===z.Cc.ADS||H.Ay.getPlayerType()===z.Cc.TRITON_AD)return;const t=window.googletag;null==t||null===(e=t.destroySlots)||void 0===e||e.call(t),t&&i(D("web_adslot1"))}),[s,T]);return(0,n.useEffect)((()=>{if(s&&h){const e=window.googletag;if(e.cmd.push((()=>{x(),k(),null==e||e.destroySlots(),y(void 0)})),"playlist"===T){if(void 0!==g&&!g)return void r(!1);e.cmd.push((()=>{var t,s;const n=null===(t=e.defineSlot(D("web_adslot2"),[[1e3,90],[728,90]],"adslot2"))||void 0===t?void 0:t.addService(e.pubads()).setTargeting("placement","web_adslot2"),a=null===(s=e.defineSlot(D("web_sponsored_playlist"),[1630,360],"sponsored_playlist"))||void 0===s?void 0:s.addService(e.pubads()).setTargeting("placement","web_sponsored_playlist");e.pubads().refresh(n&&a&&[a,n]);const i=e=>{e.slot.getAdUnitPath()===(null==a?void 0:a.getAdUnitPath())&&(y(!e.isEmpty),r(!e.isEmpty),e.isEmpty&&L())};return e.pubads().addEventListener("slotRenderEnded",i),()=>{e.pubads().removeEventListener("slotRenderEnded",i)}}))}else r(!1),L()}}),[s,h,T,location]),"account"===T||"page"===T?(s&&o(),n.createElement(n.Fragment,null,e)):n.createElement("div",null,n.createElement("a",{id:"companion_banner",target:"_blank",style:{height:250,display:"none"}},n.createElement("img",{style:{height:"100%",margin:"auto"}})),"playlist"===T&&n.createElement("div",{style:{display:g?"block":"none"}},O||(O=n.createElement(U,{type:"sponsored_playlist"}))),!g&&(F||(F=n.createElement(U,{type:"adslot1"}))),e)};class q extends n.Component{constructor(...e){super(...e),this._fetchAds=()=>{this.props.fetchAds("navigation")}}componentDidMount(){this.props.fetchAds("initial")}componentDidUpdate({currentPage:e}){e!==this.props.currentPage&&this._fetchAds()}render(){return null}}const Q=(0,a.Ng)((({app:{currentPage:e}})=>({currentPage:e})))(q);var Z=s("H/eQ");class W extends n.Component{constructor(){super(),this._onPlayerPlaying=()=>{this._startTimer()},this._onPlayerPaused=()=>{this._startTimer()},this._onTimeout=e=>{this._clearTimer(),(this.props.hasFocus||e)&&(this.props.fetchAds("inactivity"),this._startTimer())},this._startTimer=()=>{this.state.isActive||(this._setIsActive(!0),this._timer=setTimeout(this._onTimeout,6e4))},this._clearTimer=()=>{this._setIsActive(!1),clearTimeout(this._timer)},this._resetTimer=()=>{this._clearTimer(),this._startTimer()},this._setIsActive=e=>{this.setState({isActive:e})},this.state={isActive:!1}}componentDidMount(){H.Ay.playing||this._resetTimer(),Z.A.subscribe(Z.A.ads.refreshDisplay,this._resetTimer),Z.A.subscribe(Z.A.navigation.page_displayed,this._resetTimer),Z.A.subscribe(Z.A.player.playing,this._onPlayerPlaying),Z.A.subscribe(Z.A.player.paused,this._onPlayerPaused),Z.A.subscribe(Z.A.player.finishTrackList,this._resetTimer)}componentDidUpdate(e,t){e.hasFocus||!this.props.hasFocus||t.isActive||this._onTimeout(!0)}componentWillUnmount(){this._clearTimer(),Z.A.unsubscribe(Z.A.ads.refreshDisplay,this._resetTimer),Z.A.unsubscribe(Z.A.navigation.page_displayed,this._resetTimer),Z.A.unsubscribe(Z.A.player.playing,this._onPlayerPlaying),Z.A.unsubscribe(Z.A.player.paused,this._onPlayerPaused),Z.A.unsubscribe(Z.A.player.finishTrackList,this._resetTimer)}render(){return null}}var Y=s("vGT4");class J extends n.Component{constructor(...e){super(...e),this.audioEl=void 0,this._onAudioError=()=>{Z.A.trigger(Z.A.ads.adError)},this._onAudioEnd=()=>{Z.A.trigger(Z.A.triton.audioEnd),Z.A.trigger(Z.A.ads.adEnd)},this._onAudioPlay=()=>{this.props.hasAdBlock||Z.A.trigger(Z.A.ads.adBegin)}}componentDidMount(){const e=this.audioEl;e&&(e.load(),e.addEventListener("ended",this._onAudioEnd),e.addEventListener("error",this._onAudioError),e.addEventListener("play",this._onAudioPlay))}componentWillUnmount(){const e=this.audioEl;e&&(e.removeEventListener("ended",this._onAudioEnd),e.removeEventListener("error",this._onAudioError),e.removeEventListener("play",this._onAudioPlay))}play(){this.audioEl&&this.audioEl.play()}render(){return n.createElement("audio",{"data-testid":"jinglePlayer",autoPlay:!1,className:"jinglePlayer",controls:!1,loop:!1,ref:e=>this.audioEl=e,src:this.props.audioSrc})}}J.defaultProps={audioSrc:"",hasAdBlock:!1};class V extends n.Component{constructor(...e){super(...e),this.state={timer:null},this._onAdsEnd=()=>{this._adsPlayed=!0},this._onPlay=()=>{this._adsPlayed||(H.Ay.control.pause(),H.Ay.previousPlayerType=H.Ay.getPlayerType())}}componentDidMount(){Z.A.subscribe(Z.A.player.play,this._onPlay),Z.A.subscribe(Z.A.triton.audioEnd,this._onAdsEnd),Z.A.subscribe(Z.A.ads.adEnd,this._onAdsEnd),this._playAds()}componentWillUnmount(){clearInterval(this.state.timer),Z.A.unsubscribe(Z.A.player.play,this._onPlay),Z.A.unsubscribe(Z.A.triton.audioEnd,this._onAdsEnd),Z.A.unsubscribe(Z.A.ads.adEnd,this._onAdsEnd)}render(){return n.createElement(J,{ref:e=>this.audioPlayer=e,hasAdBlock:this.props.hasAdBlock})}_playAds(){var e;const{fetchAudioBreak:t}=this.props.audioBreakContext,s=H.Ay.getMediaType()===z.zu.LIVE_STREAM,n=this.props.consentContext?null===(e=this.props.consentContext.state.settings)||void 0===e?void 0:e.consentString:void 0;!s&&this.audioPlayer&&this.audioPlayer.play?t(n).then((()=>{var e;null===(e=this.audioPlayer)||void 0===e||e.play(),H.Ay.previousPlayerType=H.Ay.getPlayerType(),H.Ay.control.pause(),H.Ay.setPlayerType(z.Cc.TRITON_AD)})):(setTimeout((()=>Z.A.trigger(Z.A.triton.audioEnd)),100),setTimeout((()=>Z.A.trigger(Z.A.ads.adEnd)),100))}}const K=(0,a.Ng)((({app:e,user:t})=>({userCountry:t.COUNTRY,userSessionId:t.SESSION_ID,hasAdBlock:e.hasAdBlock})),{})((e=>n.forwardRef(((t,s)=>n.createElement(Y.A.Consumer,null,(a=>n.createElement(e,(0,T.A)({consentContext:a},t,{ref:s})))))))(D(V)));var X;const ee=()=>{const{isAdsReady:e}=(0,P.ZQ)();return e&&(X||(X=n.createElement(K,null)))};var te;const se=({fetchAds:e=(()=>{}),hasAdBlock:t=!1,isReady:s=!0})=>{const{state:a}=(0,Y.b)(),{audioBreakState:r}=(0,P.ZQ)(),[i,o]=(0,n.useState)(!0),d=()=>o(!0),l=()=>o(!1);return(0,n.useEffect)((()=>(window.addEventListener(Z.A.ads.blur,l),window.addEventListener(Z.A.ads.focus,d),()=>{window.removeEventListener(Z.A.ads.blur,l),window.removeEventListener(Z.A.ads.focus,d)})),[]),s||t?n.createElement("div",null,n.createElement(Q,{fetchAds:e}),n.createElement(W,{fetchAds:e,hasFocus:i}),!0===t&&Object.values(r).length>0||!1===t?te||(te=n.createElement(ee,null)):null):null};var ne,ae;class re extends i.App{constructor(e){super(e),this.state={...this.state,mainPageClasses:(0,d.A)({"page-main":!0})}}componentDidMount(){super.componentDidMount&&super.componentDidMount(),this._updateAdsArgs(),this.props.adsConfigContext.loadAdConfig();const e={url:`https://${c.default.get("host_common_assets_ssl")}/js/yzfdmoan.js`,id:"837slaBksSjd9jh"};(function(e){return new Promise((t=>{const s=[(0,k.detectAnyAdblocker)()],{url:n,id:a,scriptKey:r}=e||{};var i;n&&a&&s.push((i={url:n,id:a},new Promise((e=>{const t=document.createElement("script");t.onload=()=>{e(!document.getElementById(i.id))},t.onerror=()=>{e(!0)},t.src=i.url,t.async=!0,document.body.appendChild(t)})))),r&&s.push(function(e){return new Promise((t=>{t(void 0===window[e])}))}(r)),Promise.all(s).then((e=>{t(e.some((e=>!0===e)))})).catch((()=>{t(!1)}))}))})(p.A.isAllowed("adblock_bait_file")?e:null).then((e=>{e&&this.props.updateHasAdBlock(e)}))}componentDidUpdate(...e){this._updateAdsArgs(),super.componentDidUpdate&&super.componentDidUpdate(...e)}shouldComponentUpdate(e,t){return super.shouldComponentUpdate(e,t)||this.props.shownFormatIds!==e.shownFormatIds||this.props.isAdsAllowed!==e.isAdsAllowed}_updateAdsArgs(){const e=this.props.location.pathname,t=(0,E.A)(e);let s={element_type:t,element_id:this.props.match.params.id?this.props.match.params.id:"",element_data:""};if("search"===t&&(s={element_type:"result",element_id:"ALL",element_data:this.props.match.params.query||this.props.match.params.tags||""}),""===s.element_id){const t=/[0-9]*/g;e.split("/").forEach((e=>{e.match(t)&&(s.element_id=e)}))}this.props.setAdsArgs(s)}_hasDisplayAdsAuthorization(){return this.props.isAdsAllowed&&this.props.adsConfigContext.hasDisplayAds()}_renderMain(){if(this.state.error)return n.createElement("div",{className:this.state.mainPageClasses,id:"page_content",role:"main"},ne||(ne=n.createElement(l.A,null)));const e=this.props.location.pathname.replace(/^\/|\/$/g,"")===this.props.userLanguage,t=n.createElement(n.Fragment,null,n.createElement(w.A,{displayContentCard:e}),ae||(ae=n.createElement(o.s,null)),this.props.children);return n.createElement("main",{className:this.state.mainPageClasses,id:"page_content",key:"main",role:"main"},p.A.isAllowed("ad_display_hubvisor")?n.createElement(j,null,n.createElement(se,{hasAdBlock:this.props.hasAdBlock}),t):t)}}const ie=(0,a.Ng)((({app:{currentPage:e,hasAdBlock:t},user:s,alerts:n,entities:a},{location:r})=>({useFamilyScreen:!0===s.__DZR_GATEKEEPS__.family_screen,userID:s.USER.USER_ID,isConnected:(0,m.UJ)(s),hasOnBoarding:s.USER.ONBOARDING_MODAL,userAge:(0,m.QO)(s),userGender:(0,m.o_)(s),userLanguage:(0,m.Z0)(s),userOfferId:(0,m.id)(s),hasNoChildAccountSelected:!1,alerts:n,isSubProfile:(0,m.W$)(s),isHardbounce:s.USER.HARDBOUNCED_EMAIL,hasParent:(0,m.p7)(s),hasMultiAccountEnabled:(0,m.mE)(s),isSubAccount:(0,m.m0)(s),isAdsAllowed:(0,v.Mq)(a,{id:r.pathname.replace(/[^0-9]/g,""),currentPage:e}),hasAdBlock:t})),{selectChildAccount:A.me,setAdsArgs:g.TE,cleanAds:g.CY,updateCurrentPage:y.yf,updateHasAdBlock:y.eT,openScreen:h.J2,dispatchShowAlert:_.S7,dispatchHideAlert:_.Hd,openModal:f.qf,fetchChildAccount:A.C9}),oe=(0,r.Ay)((e=>({virtualpageurl:e.location.pathname,language:e.userLanguage,uilogged:e.isConnected})),{process:e=>e.pagename?e:null,dispatch:e=>{void 0!==window.dataLayer&&window.dataLayer.push(e),(0,u.TD)(e)}}),de=(0,b.y)(ie(oe(D(re))))}}]);