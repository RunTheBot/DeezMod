"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[1278],{"3gOz":(e,t,n)=>{n.d(t,{A:()=>c});var i=n("q1tI"),l=n("TRpf"),a=n("juqV"),o=n("kSUS");const r=23.26;class s extends i.Component{constructor(e){super(e),this._containerRef=null,this._containerWidth=0,this._wrapperRef=null,this._childrenRef=null,this._scrollOffset=0,this._scrollWidth=0,this._frameId=null,this._isLastLoop=!1,this._hasScrollingMarquee=!1,this._onResize=(0,o.A)(this._measureText.bind(this),100),this._onMouseEnter=(0,o.A)(this._start.bind(this),1e3),this.state={isTruncated:!1}}componentDidMount(){this._measureText(),window.addEventListener("resize",this._onResize,!1)}UNSAFE_componentWillReceiveProps(){this._measureText()}componentWillUnmount(){this._clear(),window.removeEventListener("resize",this._onResize)}render(){const{langDirection:e,isCentered:t}=this.props,{isTruncated:n}=this.state;let l={className:(0,a.A)("marquee-wrapper",{"is-centered":t&&!n}),ref:e=>this._wrapperRef=e};return n&&(l.onMouseEnter=()=>this._onMouseEnter(),l.onMouseLeave=()=>this._stop(),l.style=this._getWrapperStyle(0)),i.createElement("div",{className:"marquee",dir:e,ref:e=>this._containerRef=e},i.createElement("div",l,this._renderContent(),this._renderContent(!1)))}_renderContent(e=!0){const{children:t,langDirection:n}=this.props,{isTruncated:l}=this.state;if(!e&&!l)return null;if(e)return i.createElement("div",{className:"marquee-content",ref:e=>this._childrenRef=e},t);const a={paddingLeft:"ltr"===n?"24px":null,paddingRight:"rtl"===n?"24px":null};return i.createElement("div",{className:"marquee-content",style:a},t)}_measureText(){if(!this._childrenRef||!this._containerRef)return;const e=this._childrenRef.offsetWidth>this._containerRef.offsetWidth;this.state.isTruncated!==e&&this.setState({isTruncated:e},(()=>{this._clear()}))}_start(){const{onScrollStart:e}=this.props;this._isLastLoop&&(this._isLastLoop=!1),this._isScrolling()||(this._scrollWidth=this._childrenRef.offsetWidth,this._containerWidth=this._containerRef.offsetWidth,"function"==typeof e&&e(),this._frameId=window.requestAnimationFrame(this._move.bind(this)))}_stop(){this._onMouseEnter.cancel(),this._isScrolling()&&(this._isLastLoop=!0)}_move(){if(this._frameId=window.requestAnimationFrame(this._move.bind(this)),this._scrollOffset=Math.ceil(this._scrollOffset+.8),this._scrollOffset>this._scrollWidth+24&&(this._scrollOffset=0),this._moveTo(this._scrollOffset),0===this._scrollOffset&&this._isLastLoop){const{onScrollEnd:e}=this.props;"function"==typeof e&&e(),this._clear()}}_moveTo(e){if(!this._wrapperRef)return;if(!1===this.state.isTruncated)return void this._setStyle(this._containerRef,this._getGradientStyle());this._setStyle(this._wrapperRef,this._getWrapperStyle(this._getTranslateOffset(e)));const t=.23260000000000003*this._containerWidth;if(this._isScrolling()||0!==e){if(e<t&&!this._hasScrollingMarquee){const n=e*r/t;this._setStyle(this._containerRef,this._getGradientStyle(n))}else if(!this._isLastLoop&&e>t)this._hasScrollingMarquee=!0;else if(this._isLastLoop){const n=this._scrollWidth+24-e;if(this._isLastLoop&&n<t){const e=t?n*r/t:0;this._setStyle(this._containerRef,this._getGradientStyle(e))}}}else this._setStyle(this._containerRef,this._getGradientStyle(0))}_clear(){this._isScrolling()&&window.cancelAnimationFrame(this._frameId),this._moveTo(0),this._frameId=null,this._isLastLoop=!1,this._hasScrollingMarquee=!1,this._scrollOffset=0}_setStyle(e,t){e.style&&Object.assign(e.style,t)}_getWrapperStyle(e){return{transform:`translate3d(${e}px, 0px, 0px)`,willChange:"transform"}}_getGradientStyle(e){const{langDirection:t}=this.props;return void 0===e?{"-webkit-mask-image":"","mask-image":""}:0===e?{"-webkit-mask-image":`linear-gradient(\n\t\t\t\t\t${"ltr"===t?270:90}deg,\n\t\t\t\t\trgba(0 0 0 / 0%) 0%,\n\t\t\t\t\trgba(0 0 0 / 0%) 2.42%,\n\t\t\t\t\trgba(0 0 0 / 100%) 23.26%\n\t\t\t\t)`,"mask-image":`linear-gradient(\n\t\t\t\t\t${"ltr"===t?270:90}deg,\n\t\t\t\t\trgba(0 0 0 / 0%) 0%,\n\t\t\t\t\trgba(0 0 0 / 0%) 2.42%,\n\t\t\t\t\trgba(0 0 0 / 100%) 23.26%\n\t\t\t\t)`}:{"-webkit-mask-image":`linear-gradient(\n\t\t\t\t270deg,\n\t\t\t\ttransparent 2.42%,\n\t\t\t\trgba(0 0 0 / 100%) ${"rtl"===t?e:r}%,\n\t\t\t\trgba(0 0 0 / 100%) ${"ltr"===t?100-e:76.74}%,\n\t\t\t\ttransparent 97.58%\n\t\t\t)`,"mask-image":`linear-gradient(\n\t\t\t\t270deg,\n\t\t\t\ttransparent 2.42%,\n\t\t\t\trgba(0 0 0 / 100%) ${"rtl"===t?e:r}%,\n\t\t\t\trgba(0 0 0 / 100%) ${"ltr"===t?100-e:76.74}%,\n\t\t\t\ttransparent 97.58%\n\t\t\t)`}}_getTranslateOffset(e){const{langDirection:t}=this.props;return 0!==e&&"ltr"===t?e-2*e:e}_isScrolling(){return null!==this._frameId}}s.defaultProps={isCentered:!1,onScrollStart:()=>{},onScrollEnd:()=>{}};const c=(0,l.Ng)((({user:e})=>({langDirection:e.DIRECTION})))(s)},"5xmB":(e,t,n)=>{n.d(t,{B:()=>r,A:()=>s});var i=n("q1tI"),l=n("juqV"),a=n("Wp0Y");const o={img:"wPuzu",text:"sIMmz",nocontent:"k4rH3",private:"OXBI2",recommendation:"IMAtw"};let r=function(e){return e.NO_CONTENT="nocontent",e.PRIVATE="private",e.RECOMMENDATION="recommendation",e}({});const s=({img:e=r.NO_CONTENT,wording:t=(0,a.AP)("Aucun résultat."),className:n})=>i.createElement("div",{className:(0,l.A)(o.root,n)},i.createElement("div",{className:(0,l.A)(o.img,o[e])}),i.createElement("div",{className:o.text},t))},aEwM:(e,t,n)=>{n.d(t,{A:()=>s});var i,l=n("q1tI"),a=n("KVgY"),o=n("RGaU"),r=n("5xmB");const s=({placeholder:e,hasMore:t,loadMore:n,children:s})=>s?"function"==typeof n?l.createElement(a.A,{hasMore:t,loadMore:n,loader:i||(i=l.createElement(o.k,{key:"loader"}))},s):l.createElement(l.Fragment,null,s):l.createElement(r.A,e)},ailv:(e,t,n)=>{n.d(t,{SP:()=>l,U$:()=>c,Xw:()=>o,rc:()=>a,uV:()=>s,v5:()=>r});var i=n("LOQS");let l=function(e){return e.CONCERT="concert",e.CONCERT_WITH_LIVESTREAM="concert_with_livestream",e.FESTIVAL="festival",e.FESTIVAL_WITH_LIVESTREAM="festival_with_livestream",e}({}),a=function(e){return e.CLICK_CONCERT="click_concert",e.BUY_TICKET="buy_ticket",e.SEARCH="search",e.REMINDER="put_concert_reminder",e}({}),o=function(e){return e.CONCERT_HUB_FOR_YOU="concert_hub_for_you",e.CONCERT_DETAIL="concert_detail",e.ARTIST="artist",e.VIEW_ALL="view_all_concerts",e.ALBUM="album",e}({}),r=function(e){return e.CITY="city",e.CONCERT="concert",e.ARTIST="artist",e.ALBUM="album",e}({});const s=e=>{i.A.log({type:"cdp",eventName:"concert_hub_used",customAttributes:e})},c=e=>null!=e&&e.isConcert?l.CONCERT:null!=e&&e.isFestival?l.FESTIVAL:null!=e&&e.isLivestreamConcert?l.CONCERT_WITH_LIVESTREAM:null!=e&&e.isLivestreamFestival?l.FESTIVAL_WITH_LIVESTREAM:void 0},esNd:(e,t,n)=>{n.d(t,{$g:()=>r,rL:()=>c,v6:()=>o}),n("W8Tb");var i=n("Wp0Y"),l=n("5G9X");const a=12;function o(e,t=!1){const n=null==e?void 0:e.map((e=>{var n;return null==e||null===(n=e.node)||void 0===n||null===(n=n.albums)||void 0===n||null===(n=n.edges)||void 0===n?void 0:n.map((n=>{var l,a,o,r,s,c;if(null!=n&&n.node)return{ART_ID:null==e||null===(l=e.node)||void 0===l?void 0:l.id,ART_NAME:t?"":null==e||null===(a=e.node)||void 0===a?void 0:a.name,ALB_ID:n.node.id,ALB_TITLE:n.node.displayTitle,ALB_DATE:n.node.releaseDate,MD5_ORIGIN:null===(o=n.node.cover)||void 0===o?void 0:o.id,ALB_PICTURE:null===(r=n.node.cover)||void 0===r?void 0:r.md5,__TYPE__:"album",target:`/album/${n.node.id}`,layout_parameters:{cta:{label:(0,i.AP)("Écouter"),type:"play"},override:{pictures:[{type:"cover",md5:null===(s=n.node.cover)||void 0===s?void 0:s.md5}],subtitle:null==e||null===(c=e.node)||void 0===c?void 0:c.name,title:n.node.displayTitle}}}})).filter(Boolean)}));return[].concat(...n).sort(((e,t)=>e.ALB_DATE>t.ALB_DATE?-1:e.ALB_DATE<t.ALB_DATE?1:0)).slice(0,a)}function r(e){return null==e?void 0:e.map((e=>{var t,n,i,a;return{ART_ID:null==e||null===(t=e.node)||void 0===t?void 0:t.id,ART_NAME:null==e||null===(n=e.node)||void 0===n?void 0:n.name,ROLE:s(e),ART_PICTURE:null==e||null===(i=e.node)||void 0===i||null===(i=i.picture)||void 0===i?void 0:i.md5,__TYPE__:l.Ay.ArtistLineUp,type:l.Ay.ArtistLineUp,layout_parameters:{override:{pictures:[{type:"artist",md5:null==e||null===(a=e.node)||void 0===a||null===(a=a.picture)||void 0===a?void 0:a.md5}]}}}})).filter(Boolean).slice(0,a)}function s(e){var t;if(null!=e&&null!==(t=e.concertContributorMetadata)&&void 0!==t&&null!==(t=t.roles)&&void 0!==t&&t.isMain)return e.concertContributorMetadata.roles.isMain?(0,i.AP)("eventpage_title_headliner_web"):(0,i.AP)("eventpage_title_openingact_web")}function c(e,t){if(!e)return[];const n=[...e].sort(((e,t)=>e.node&&t.node?t.node.fansCount-e.node.fansCount:0)).sort(((e,t)=>e.node&&t.node?e.node.isFavorite===t.node.isFavorite?0:e.node.isFavorite?-1:1:0)).sort(((e,t)=>{var n,i,l;return e.node&&t.node?(null===(n=e.concertContributorMetadata)||void 0===n?void 0:n.roles.isMain)===(null===(i=t.concertContributorMetadata)||void 0===i?void 0:i.roles.isMain)?0:null!==(l=e.concertContributorMetadata)&&void 0!==l&&l.roles.isMain?-1:1:0}));if(t){const e=n.findIndex((({node:e})=>(null==e?void 0:e.id)===t));if(e>=0){const t=n[e];n.splice(e,1),n.unshift(t)}}return n}},lI2z:(e,t,n)=>{n.d(t,{A:()=>c});var i,l=n("q1tI"),a=n("w/ZN"),o=n("Wp0Y"),r=n("d84/"),s=n("waeH");const c=({value:e})=>l.createElement(r.s,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center"},i||(i=l.createElement(a.i,{mb:"spacing.l",color:"icon.neutral.secondary.default",boxSize:"12",scale:"3"})),l.createElement(s.D,{as:"p",fontSize:"lg",fontWeight:"semibold",pb:"spacing.m"},(0,o.AP)("emptystate_title_noresultsforXsearchterm_web",{sprintf:[e]})))},sq6I:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ye});var i=n("q1tI"),l=n("WBQ7"),a=n("aEwM"),o=n("rxfZ"),r=n("gBSU"),s=n("RRxT"),c=n("xAqu"),d=n("Wp0Y"),u=n("waeH"),m=(n("/eM8"),n("SY8E")),_=n("phrf"),v=n("HmE0"),h=n("Z+z7"),g=n("YxJ6"),p=n("2pes"),E=n("00Ii"),f=n("7fl8"),b=n("yCtO"),C=n("kSUS"),A=n("Z9kq"),y=n("YSOA"),T=n("d84/"),w=n("RGaU"),R=n("x1jq"),S=n("lI2z"),L=n("eTJY");const I=(0,n("Al8Q").A)(R.ck,{target:"e1mrnejz0"})({name:"ohw6c9",styles:"border-radius:var(--tempo-space-1);padding:0 var(--tempo-space-2);&:hover{cursor:pointer;background-color:var(--tempo-colors-background-accent-on-light-default);}"});var N;const k=(0,i.memo)((({index:e,name:t,countryCode:n,longitude:l,latitude:a,selection:o,onClick:r})=>i.createElement(I,{key:e,onClick:()=>r({name:t,countryCode:n,longitude:l,latitude:a})},i.createElement(T.s,{justifyContent:"space-between",alignItems:"center"},i.createElement("div",null,i.createElement(h.E,{fontSize:"md",noOfLines:1},t),i.createElement(h.E,{fontSize:"sm",color:"text.neutral.secondary.default",noOfLines:1},n)),i.createElement("div",null,(null==o?void 0:o.longitude)===l&&(null==o?void 0:o.latitude)===a&&(N||(N=i.createElement(L.S,{boxSize:"6",color:"icon.accent.primary.default"}))))))));var M;const x=({hasValue:e,isSearching:t,hasResults:n,inputText:l,results:a,onClick:o,selection:r})=>e?t?M||(M=i.createElement(T.s,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center"},i.createElement(w.k,null))):n?i.createElement(R.B8,{spacing:3},a.map((({name:e,countryCode:t,longitude:n,latitude:l},a)=>i.createElement(k,{key:`${a}_${e}`,selection:r,index:a,name:e,countryCode:t,longitude:n,latitude:l,onClick:o})))):i.createElement(S.A,{value:l}):null,D=({value:e,options:t,onChange:n,onSearch:l,onClose:a,loading:o,isClosed:r})=>{var s;const[c,u]=(0,i.useState)(""),[m,_]=(0,i.useState)(e||void 0),[v,h]=(0,i.useState)(!1),g=(0,i.useRef)((0,C.A)((e=>{(null==e?void 0:e.length)>1&&l(e),h(!1)}),400)).current;(0,i.useEffect)((()=>{r&&E()}),[r]),(0,i.useEffect)((()=>()=>g.cancel()),[g]);const E=()=>{u("")},f=null==t||null===(s=t.map((({name:e})=>e)))||void 0===s?void 0:s.filter((e=>e.toLowerCase().includes(c.toLowerCase()))),b=Boolean(c),T=(null==f?void 0:f.length)>0,w=o||v,R=null==t?void 0:t.filter((({name:e})=>f.includes(e)));return i.createElement(i.Fragment,null,i.createElement(A.D,{placeholder:(0,d.AP)("searchfielddescription_text_enteracity_web"),onChange:({target:{value:e}})=>{h(!0),(e=>{u(e)})(e),g(e)},value:c,"data-testid":"input_city"}),i.createElement(y.m,{paddingY:"4",paddingX:"0",height:"362px",overflowY:"auto"},i.createElement(x,{hasResults:T,hasValue:b,isSearching:w,results:c?R:[],inputText:c,onClick:({name:e,countryCode:t,longitude:i,latitude:l})=>{u(e),_({longitude:i,latitude:l}),n({name:e,countryCode:t,longitude:i,latitude:l}),a()},selection:m})))};var z,F,P=n("A2sV");const B=({location:e,changeLocation:t})=>{var n;const[l,a]=(0,i.useState)(!0),[o,{data:r,loading:s}]=(0,P.N6A)(),c=null==r||null===(n=r.search)||void 0===n||null===(n=n.results)||void 0===n||null===(n=n.cities)||void 0===n||null===(n=n.edges)||void 0===n?void 0:n.map((({node:e})=>{var t,n;return{countryCode:null==e?void 0:e.countryCode,longitude:null==e||null===(t=e.coordinates)||void 0===t?void 0:t.longitude,latitude:null==e||null===(n=e.coordinates)||void 0===n?void 0:n.latitude,name:null==e?void 0:e.name}})),C=e&&c?c.find((({latitude:t,longitude:n})=>e.latitude===t&&e.longitude===n)):void 0,[A,y]=(0,i.useState)(C||e),T=(0,i.useCallback)((async e=>{await o({variables:{city:e},fetchPolicy:"cache-and-network"})}),[o]);return i.createElement(m.A,{placement:"bottom-start",onOpen:()=>a(!1),onClose:()=>a(!0)},(({onClose:e})=>i.createElement(i.Fragment,null,i.createElement(_.W,null,i.createElement(v.$n,{size:"small",backgroundColor:"background.neutral.primary.selected",borderRadius:"full",outlineColor:"border.accent.primary.default",variant:"contain","data-testid":"location_filter",rightIcon:z||(z=i.createElement(b.e,{color:"text.neutral.primary.default"}))},i.createElement(h.E,{color:"text.neutral.primary.default"},null!=A&&A.name?A.name:(0,d.AP)("concerthub_action_aroundyou_web")))),i.createElement(g.h,{borderRadius:"2xl",width:"375px"},F||(F=i.createElement(p.R,null)),i.createElement(E.D,{display:"flex",justifyContent:"space-between",alignItems:"center"},i.createElement(u.D,{variant:"heading.s"},(0,d.AP)("generic_title_city_web")),i.createElement(v.$n,{onClick:()=>(e=>{t(null),y(null),e()})(e),variant:"outline",size:"small",isDisabled:!A},(0,d.AP)("generic_action_reset_web"))),i.createElement(f.e,{paddingX:2},i.createElement(D,{value:A,onClose:e,isClosed:l,options:c,onChange:e=>(y(e),t(e)),onSearch:T,loading:s}))))))},W=({children:e})=>i.createElement(o.a,{className:"container",pb:0},e),$=({location:e,changeLocation:t})=>i.createElement("div",{"data-testid":"masthead-concerts"},i.createElement(W,null,i.createElement(u.D,{mb:"spacing.xl",as:"h1",fontSize:"6xl","data-testid":"masthead-title",noOfLines:2},(0,d.AP)("generic_title_concerts_web")),i.createElement(B,{location:e,changeLocation:t})));var U,Y,V;const q=()=>i.createElement(i.Fragment,null,U||(U=i.createElement(o.a,{height:"95px"})),Y||(Y=i.createElement(W,null,i.createElement(r.E,{width:"100px",height:"50px"}))),i.createElement("div",{className:"container"},i.createElement("div",{className:"thumbnail-grid thumbnail-grid-responsive"},[...Array(20).keys()].map((e=>i.createElement("div",{key:e,className:"thumbnail-col"},V||(V=i.createElement(s.E,{className:"picture-img"},i.createElement(r.E,{height:"inherit",mb:"-10px",mt:"5"}),i.createElement(c.r,{mt:"4",noOfLines:2,spacing:"2"})))))))));var H,Z=n("w/ZN");const j=()=>i.createElement(T.s,{alignItems:"center",direction:"column",mt:"6rem"},H||(H=i.createElement(Z.i,{mb:"spacing.l",color:"icon.neutral.secondary.default",boxSize:"12",scale:3})),i.createElement(u.D,{as:"p",fontWeight:"bold",fontSize:"lg",mb:"spacing.s"},(0,d.AP)("genericerrormessage_title_oops_web")),i.createElement(h.E,{fontSize:"sm",color:"text.neutral.secondary.default"},(0,d.AP)("errormessage_title_noconcertsfoundaroundyourlocation_web")));var X,G=n("ailv"),J=n("0sL9"),K=n("oJ8y"),Q=n("lhvF"),ee=n("CrR0"),te=n("+RX7"),ne=n("/eXD"),ie=n("wZBD"),le=n("uN8A"),ae=n("brAN"),oe=n("wdFl"),re=n("GkjM"),se=n("3gOz");const ce=({artistId:e,url:t,onClick:n,name:l,location:a,startDate:r,isLiveStream:s,cover:c,isNotified:u,toggleNotification:m})=>i.createElement(o.a,null,i.createElement(J.V,null,i.createElement(re.A,{"data-testid":"picture-link",to:t,onClick:n},i.createElement(K.Y,{src:c,alt:l,border:"none"},s&&i.createElement(Q.Q,null,i.createElement(ee.U,{"data-testid":"btn-notification",onClick:()=>{m(u)},"aria-label":"Love",icon:i.createElement(ae.$,{"data-testid":"BellOutlinedIcon",color:u?"icon.accent.primary.default":"current"})})),i.createElement(te.V,{date:r,size:{base:"md"},position:"absolute",top:"2",right:"2"}))),i.createElement(re.A,{to:`artist/${e}`},i.createElement(ne.r,{title:l},l)),s?i.createElement(T.s,{alignItems:"center"},X||(X=i.createElement(ie.J,{me:"1",variant:"live"},i.createElement(oe.J,null))),i.createElement(re.A,{to:t},i.createElement(le.f,null,(0,d.AP)("concerthub_title_liveondeezer_web")))):i.createElement(se.A,null,i.createElement(re.A,{to:t},i.createElement(le.f,null,a)))));var de=n("esNd"),ue=n("fkXJ"),me=n("xobL"),_e=n("TRpf"),ve=n("Sw69"),he=n("znFr"),ge=n("nDZ7"),pe=n("sLq1");const Ee=({artistId:e,url:t,onClick:n,name:l,location:a,startDate:o,cover:r})=>{const s=(e=>{const t=new Date,n=e.getTime()-t.getTime();return Math.floor(n/864e5)})(o);return i.createElement(ve.Z,{margin:"spacing.s",gridColumn:"span 3",gridRow:"span 2",width:"auto",maxHeight:"530px"},i.createElement(ve.Z.Image,null,i.createElement(re.A,{to:t,onClick:n},i.createElement(he._,{"data-testid":"concert_highlight_cover",src:r,alt:l,objectFit:"cover",width:"100%"})),i.createElement(ve.Z.Overlay,{top:"spacing.s",right:"spacing.s",zIndex:2,"data-testid":"concert_highlight_calendar"},i.createElement(te.V,{date:o,position:"relative",top:"spacing.s",right:"spacing.s",alignSelf:"flex-end",size:{base:"md",lg:"lg"}})),i.createElement(ve.Z.Overlay,{top:"0",bottom:"0",left:"0",right:"0",zIndex:2,pointerEvents:"none"},i.createElement(ge.N,null,i.createElement(u.D,{variant:"heading.l",pointerEvents:"auto","data-testid":"concert_highlight_title"},i.createElement(re.A,{color:"text.accent.onDark.default",to:`artist/${e}`},l)),i.createElement(h.E,{variant:"body.s.default",noOfLines:1,pointerEvents:"auto","data-testid":"concert_highlight_subtitle"},i.createElement(re.A,{to:t,color:"text.accent.onDark.default"},a))))),i.createElement(ve.Z.Container,null,i.createElement(ve.Z.Footer,null,i.createElement(T.s,{justifyContent:"space-between",w:"100%",alignItems:"center"},i.createElement(T.s,{gap:"1",alignItems:"center"},s>=0&&s<=30?i.createElement(pe.K,{color:"text.neutral.primary.default","data-testid":"concert_highlight_countdown"},i.createElement(pe.t,null,s>0?(0,d.AP)("concerthub_title_inXdays_web",{sprintf:[s],count:s}).toLocaleUpperCase():(0,d.AP)("concerthub_action_ontoday_web"))):null),i.createElement(v.$n,{"data-testid":"concert_highlight_details"},i.createElement(re.A,{color:"text.neutral.onDark.default",to:t},(0,d.AP)("generic_action_seemore_web")))))))},fe=({concert:e,index:t,locationName:n})=>{var l;const{startDate:a,contributors:o,venue:r,types:s,id:c,hasSubscribedToNotification:u,name:m}=e,[_]=(0,P.BMS)(),[v]=(0,P.oih)(),h=(0,_e.d4)((e=>e)),g=(0,de.rL)(o.edges),p=g[0].node;if(!(r&&s&&null!=p&&p.name&&c))return null;const E=new Date(a),f=E.getFullYear(),b=null==p||null===(l=p.picture)||void 0===l||null===(l=l.large)||void 0===l?void 0:l[0],C=g.some((e=>{var t;return null===(t=e.concertContributorMetadata)||void 0===t?void 0:t.roles.isMain})),A=g.map((e=>{var t,n,i;return C?null!==(n=e.concertContributorMetadata)&&void 0!==n&&n.roles.isMain?null===(i=e.node)||void 0===i?void 0:i.name:"":null===(t=e.node)||void 0===t?void 0:t.name})).filter(Boolean).join(", "),y=null==p?void 0:p.id,T=!0===s.isLivestreamConcert||!0===s.isLivestreamFestival,w=s.isFestival||s.isLivestreamFestival,R=T?(0,d.AP)("concerthub_title_liveondeezer_web"):r,S=(0,me.Z0)(h.user),L=Intl.DateTimeFormat(S,{day:"2-digit",month:"long"}),I=(new Date).getFullYear(),N=r&&I<f?`${L.format(E)} ${f} ${R?`• ${R}`:R}`:`${L.format(E)} ${R?`• ${R}`:R}`,O=`/concert/${c}`,k=()=>{(0,G.uV)({screen_view_name:G.Xw.CONCERT_HUB_FOR_YOU,screen_view_id_type:G.v5.CITY,screen_view_id:n||"around_me",action:G.rc.CLICK_CONCERT,item_type:(0,G.U$)(s),item_id:c,concert_ranking:t})};return 0===t?i.createElement(Ee,{artistId:y,url:O,onClick:k,name:w?m:A,location:N,startDate:E,cover:b}):i.createElement(ce,{artistId:y,url:O,name:w?m:A,startDate:E,location:N,isLiveStream:T,cover:b,onClick:k,isNotified:u,toggleNotification:async()=>{if(u)return(0,ue.A)({body:(0,d.AP)("livestreammodule_action_cancelreminder_web")}),v({optimisticResponse:{__typename:"Mutation",unsubscribeToLiveEventNotification:{__typename:"LiveEventMutationUnsubscribeToNotificationOutput",status:!1,liveEvent:{__typename:"LiveEvent",id:c,hasSubscribedToNotification:!1}}},variables:{eventId:c}});(0,G.uV)({screen_view_name:G.Xw.CONCERT_HUB_FOR_YOU,screen_view_id_type:G.v5.CITY,screen_view_id:n||"around_me",action:G.rc.REMINDER,item_type:(0,G.U$)(s),item_id:c,concert_ranking:t}),await _({optimisticResponse:{__typename:"Mutation",subscribeToLiveEventNotification:{__typename:"LiveEventMutationSubscribeToNotificationOutput",status:!0,liveEvent:{__typename:"LiveEvent",id:c,hasSubscribedToNotification:!0}}},variables:{eventId:c}}),(0,ue.A)({body:(0,d.AP)("livestreammodule_action_setreminder_web")})}})};var be,Ce,Ae=n("3ns7");const ye=()=>{var e,t,n,o,r;const[s,c]=(0,i.useState)(l.default.get("concert_hub_location")),{data:d,loading:u,error:m,fetchMore:_}=(0,P.A22)({fetchPolicy:"cache-and-network",variables:{latitude:null==s?void 0:s.latitude,longitude:null==s?void 0:s.longitude,first:20,after:null}}),v=(0,i.useCallback)((()=>{var e;return _({variables:{latitude:null==s?void 0:s.latitude,longitude:null==s?void 0:s.longitude,first:20,after:null==d||null===(e=d.liveEventsRecommended)||void 0===e||null===(e=e.pageInfo)||void 0===e?void 0:e.endCursor}})}),[s,d,_]),h=(0,i.useCallback)((e=>(l.default.set("concert_hub_location",e),c(e),(0,G.uV)({screen_view_name:G.Xw.CONCERT_HUB_FOR_YOU,screen_view_id_type:G.v5.CITY,screen_view_id:(null==e?void 0:e.name)||"around_me",action:G.rc.SEARCH,item_type:G.SP.CONCERT,item_id:(null==e?void 0:e.name)||"around_me"}))),[]);if(m)throw m;if(u)return be||(be=i.createElement(q,null));const g=null==d||null===(e=d.liveEventsRecommended)||void 0===e?void 0:e.edges.filter(Boolean),p=!(null!=g&&g.length)||s&&(null==d||null===(t=d.liveEventsRecommended)||void 0===t?void 0:t.edges)&&0===(null==d||null===(n=d.liveEventsRecommended)||void 0===n||null===(n=n.edges)||void 0===n?void 0:n.length)&&!(null!=d&&null!==(o=d.liveEventsRecommended)&&void 0!==o&&null!==(o=o.edges)&&void 0!==o&&null!==(o=o[0])&&void 0!==o&&null!==(o=o.node)&&void 0!==o&&o.id),E=[];null==g||g.forEach((({node:e})=>{var t;E.push((null==e||null===(t=e.contributors)||void 0===t||null===(t=t.edges[0])||void 0===t||null===(t=t.node)||void 0===t||null===(t=t.picture)||void 0===t||null===(t=t.large)||void 0===t?void 0:t[0])||"")}));const f=null==d||null===(r=d.liveEventsRecommended)||void 0===r||null===(r=r.pageInfo)||void 0===r?void 0:r.hasNextPage;return i.createElement(i.Fragment,null,i.createElement($,{changeLocation:h,location:s}),p?Ce||(Ce=i.createElement(j,null)):i.createElement("div",{className:"container"},i.createElement(a.A,{hasMore:f,loadMore:v},i.createElement(Ae.kK,{gap:"spacing.s"},null==g?void 0:g.filter((({node:e})=>e)).map((({node:e},t)=>e&&i.createElement(fe,{concert:e,index:t,key:`${e.id}_${null==e?void 0:e.name}`,locationName:null==s?void 0:s.name})))))))}}}]);